{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Documents/react app/agilecreditportal/src/pages/IdentificationUpload.tsx\";\nimport React, { useEffect, useState, useCallback } from \"react\";\nimport OnboardingSideBar from \"../components/OnboardingSideBar\";\nimport { useForm } from \"react-hook-form\";\nimport { useQuery } from \"react-query\";\nimport useProfileStore from \"../stores/profileStore\";\nimport { getIdentificationFields, uploadDocument, deleteDocument, getProfileSection } from \"../clients/onboarding\";\nimport useAuthStore from \"../stores/authStore\";\n\nconst IdentificationUpload = props => {\n  let pageType = \"profile\";\n\n  if (props.location.pathname.includes(\"/onboarding\")) {\n    pageType = \"onboarding\";\n  }\n\n  const [errorMsg, setErrorMsg] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [uploadedFile, setUploadedFile] = useState([]);\n  const [deleted, setDeleted] = useState(false);\n  const profile = useProfileStore(state => state.data);\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm();\n  const [submitted, setSubmitted] = useState(false);\n  const token = useAuthStore(state => state.accessToken);\n  const {\n    isLoading,\n    error,\n    data\n  } = useQuery(\"identity\", () => getIdentificationFields(token));\n  const [uploaded, setUploaded] = useState(profile[\"kyc_documents\"]);\n  const [checklistCompletion, setChecklistCompletion] = useState(false);\n  const {\n    isLoading: isLoading2,\n    error: error2,\n    data: uploadSection\n  } = useQuery(\"sections\", () => getProfileSection(token));\n  const initializeProfileSection = useProfileStore(useCallback(state => state.initializeProfileSection, []));\n  useEffect(() => {\n    uploadSection && initializeProfileSection(uploadSection, uploadSection.every(loan => loan.completed === true));\n  }, [uploadSection]);\n  useEffect(() => {\n    setUploaded(profile[\"kyc_documents\"]);\n  }, [profile]);\n  let loanStatus = uploadSection && uploadSection.every(loan => loan.completed === true);\n  console.log(loanStatus);\n\n  if (isLoading || isLoading2) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-full m-auto px-8 relative\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"/img/loading-gif.gif\",\n      alt: \"\",\n      className: \"w-1/8 m-auto py-20\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }\n    })));\n  }\n\n  const onChangeHandler = (event, type) => {\n    let dataValue = [];\n    let oldData = [];\n    oldData = [...uploadedFile];\n    dataValue = {\n      value: event.target.files[0],\n      name: type\n    };\n    let filterData = [];\n    filterData = oldData.filter(val => val.name == type);\n\n    if (filterData.length) {\n      filterData[0].value = event.target.files[0];\n      let newFilterData = [];\n      newFilterData = oldData.filter(val => val.name != type);\n\n      if (newFilterData.length) {\n        filterData.push(...newFilterData);\n      }\n\n      setUploadedFile(filterData);\n      return;\n    }\n\n    oldData.push(dataValue);\n    setUploadedFile(oldData);\n  };\n\n  const updateErrors = errors => {\n    setErrorMsg(Object.values(errors).flat());\n  };\n\n  const onSubmit = async name => {\n    if (!uploadedFile.length) {\n      return;\n    }\n\n    setLoading(true);\n    let val = [];\n    val = [...uploadedFile];\n    let newVale = [];\n    newVale = val.filter(val => val.name == name);\n\n    try {\n      const files = new FormData();\n      files.append(\"document\", newVale[0].value);\n      files.append(\"tag\", name);\n      let postData = await uploadDocument(token, files);\n      const {\n        message,\n        data\n      } = postData;\n      let getUploaded = [...uploaded];\n      getUploaded.push(data);\n      setUploaded(getUploaded); // uploaded.push(data);\n\n      setLoading(false);\n      setErrorMsg([]);\n      setSubmitted(true);\n      setTimeout(function () {\n        setSubmitted(false);\n      }, 8000); // refetch();\n    } catch (error) {\n      setLoading(false);\n\n      if (error && error.response.status == 500) {\n        let msg = [];\n        msg.push(error.response.data.message);\n        setErrorMsg(msg);\n        return;\n      }\n\n      if (!error.response) {\n        let msg = [];\n        msg.push(\"Network Error, Check Your Internet Connection\");\n        setErrorMsg(msg);\n        return;\n      }\n\n      const {\n        response: {\n          data\n        }\n      } = error;\n      data.errors && updateErrors(data.errors);\n    } // console.log(uploadedFile);\n\n  };\n\n  const ActiveDeleteDocument = async id => {\n    setLoading(true);\n\n    try {\n      let deleteData = await deleteDocument(token, id);\n      let UpdateUploaded = uploaded.filter(del => del.id != id);\n      setUploaded(UpdateUploaded);\n      setLoading(false);\n      setDeleted(true);\n      setTimeout(function () {\n        setDeleted(false);\n      }, 8000); // refetch();\n    } catch (error) {\n      setLoading(false);\n\n      if (error && error.response.status == 500) {\n        let msg = [];\n        msg.push(error.response.data.message);\n        setErrorMsg(msg);\n        return;\n      }\n\n      if (!error.response) {\n        let msg = [];\n        msg.push(\"Network Error, Check Your Internet Connection\");\n        setErrorMsg(msg);\n        return;\n      }\n\n      const {\n        response: {\n          data\n        }\n      } = error;\n      data.errors && updateErrors(data.errors);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"hidden md:block w-5/12 mb-6 border-r-2 border-gray-200\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(OnboardingSideBar, {\n    name: \"documents\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    src: \"/img/checklists.svg\",\n    alt: \"\",\n    className: \"w-1/4 m-auto pt-16\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"md:w-7/12 w-full mb-6 px-8 relative\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"block text-gray-700 text-lg font-bold mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 9\n    }\n  }, \"UPLOAD YOUR ID\"), deleted ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fade-in\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"py-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    className: \"fill-current h-6 w-6 text-teal-500 mr-4\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 19\n    }\n  }, \"Deleted successfully\"))))) : \"\", submitted ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"py-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    className: \"fill-current h-6 w-6 text-teal-500 mr-4\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 19\n    }\n  }, \"Uploaded successfully\"))))) : \"\", errorMsg.length ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-red-100 border-t-4 border-red-500 rounded-b text-red-900 px-4 py-3 shadow-md my-5\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"py-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    className: \"fill-current h-6 w-6 text-red-500 mr-4\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    style: {\n      listStyleType: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 17\n    }\n  }, errorMsg.map((error, i) => /*#__PURE__*/React.createElement(\"li\", {\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 21\n    }\n  }, error)))))) : \"\", loading ? /*#__PURE__*/React.createElement(\"img\", {\n    src: \"/img/30.gif\",\n    className: \"ml-2 my-5 w-auto m-auto\",\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 11\n    }\n  }) : \"\", /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-col my-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"w-full max-w-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-wrap -mx-3 mb-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 13\n    }\n  }, data && data.map((data, key) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex flex-wrap \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md:w-3/5 px-3 my-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 25\n      }\n    }, data.label), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      name: data.name,\n      className: \"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500\",\n      onChange: e => onChangeHandler(e, data.name),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex items-center justify-between mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"bg-blue-700 hover:bg-blue-800 text-white text-sm md:text-lg font-light py-3 px-10 rounded-lg focus:outline-none focus:shadow-outline inline-flex items-center shadow-lg\",\n      type: \"button\",\n      onClick: () => onSubmit(data.name),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 27\n      }\n    }, \" Upload \"), /*#__PURE__*/React.createElement(\"svg\", {\n      className: \"ml-2\",\n      width: \"13\",\n      height: \"13\",\n      viewBox: \"0 0 18 18\",\n      fill: \"none\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"g\", {\n      id: \"save_icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      \"clip-rule\": \"evenodd\",\n      d: \"M2 0H14L18 4V16C18 17.1 17.1 18 16 18H2C0.89 18 0 17.1 0 16V2C0 0.9 0.89 0 2 0ZM16 16V4.83L13.17 2H2V16H16ZM9 9C7.34 9 6 10.34 6 12C6 13.66 7.34 15 9 15C10.66 15 12 13.66 12 12C12 10.34 10.66 9 9 9ZM12 3H3V7H12V3Z\",\n      fill: \"white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 31\n      }\n    }))))));\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-full my-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 11\n    }\n  }, uploaded && uploaded.length > 0 ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"text-gray-700 text-lg font-medium mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 17\n    }\n  }, \"Uploaded Documents\")) : \"\", uploaded && uploaded.map(val => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex items-center border my-2 border-t-0 border-r-0 border-l-0 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-3/5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 21\n      }\n    }, val.tag), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-2/5 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"bg-red-600 py-1 px-2 text-white rounded-lg\",\n      onClick: () => ActiveDeleteDocument(val.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 23\n      }\n    }, \"X\")));\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex justify-end w-full pr-0 md:pr-4 mt-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inline-flex justify-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 364,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => pageType === \"onboarding\" ? props.history.push(\"/onboarding/account\") : props.history.push(\"/profile/account\"),\n    className: \"bg-gray-500 hover:bg-gray-600 text-white text-md md:text-xl font-light py-2 px-6 md:py-3 md:px-8 rounded focus:outline-none focus:shadow-outline inline-flex items-center\",\n    type: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    className: \"mr-2 -mt-1\",\n    width: \"18\",\n    height: \"18\",\n    viewBox: \"0 0 18 18\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"chevron_right_24px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    id: \"icon/navigation/chevron_left_24px\",\n    d: \"M15.705 16.59L11.125 12L15.705 7.41L14.295 6L8.29498 12L14.295 18L15.705 16.59Z\",\n    fill: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 15\n    }\n  }, \" Previous \")), pageType === \"onboarding\" ? /*#__PURE__*/React.createElement(\"button\", {\n    disabled: !checklistCompletion,\n    onClick: () => props.history.push(\"/new-loan-request\"),\n    className: checklistCompletion && checklistCompletion ? \"bg-green-600 hover:bg-green-700 text-white text-xl font-light py-3 px-10 rounded-r focus:outline-none focus:shadow-outline inline-flex items-center\" : \"bg-gray-400 text-white text-xl font-light py-3 px-10 rounded focus:outline-none focus:shadow-outline inline-flex items-center cursor-not-allowed\",\n    type: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 393,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 17\n    }\n  }, \" Complete \"), /*#__PURE__*/React.createElement(\"svg\", {\n    className: \"ml-2 -mt-1\",\n    width: \"18\",\n    height: \"18\",\n    viewBox: \"0 0 18 18\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"chevron_right_24px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 412,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    id: \"icon/action/done_24px\",\n    d: \"M6.5999 11.925L3.4499 8.775L2.3999 9.825L6.5999 14.025L15.5999 5.025L14.5499 3.975L6.5999 11.925Z\",\n    fill: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 413,\n      columnNumber: 21\n    }\n  })))) : \"\"))));\n};\n\nexport default IdentificationUpload;","map":{"version":3,"sources":["/Users/mac/Documents/react app/agilecreditportal/src/pages/IdentificationUpload.tsx"],"names":["React","useEffect","useState","useCallback","OnboardingSideBar","useForm","useQuery","useProfileStore","getIdentificationFields","uploadDocument","deleteDocument","getProfileSection","useAuthStore","IdentificationUpload","props","pageType","location","pathname","includes","errorMsg","setErrorMsg","loading","setLoading","uploadedFile","setUploadedFile","deleted","setDeleted","profile","state","data","register","handleSubmit","errors","submitted","setSubmitted","token","accessToken","isLoading","error","uploaded","setUploaded","checklistCompletion","setChecklistCompletion","isLoading2","error2","uploadSection","initializeProfileSection","every","loan","completed","loanStatus","console","log","onChangeHandler","event","type","dataValue","oldData","value","target","files","name","filterData","filter","val","length","newFilterData","push","updateErrors","Object","values","flat","onSubmit","newVale","FormData","append","postData","message","getUploaded","setTimeout","response","status","msg","ActiveDeleteDocument","id","deleteData","UpdateUploaded","del","listStyleType","map","i","key","label","e","tag","history"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useCallback } from \"react\";\nimport OnboardingSideBar from \"../components/OnboardingSideBar\";\nimport { useForm } from \"react-hook-form\";\nimport { useQuery } from \"react-query\";\n\nimport useProfileStore from \"../stores/profileStore\";\nimport {\n  getIdentificationFields,\n  uploadDocument,\n  deleteDocument,\n  getProfileSection,\n} from \"../clients/onboarding\";\nimport useAuthStore from \"../stores/authStore\";\nimport FormInput from \"../components/FormInput\";\n\nconst IdentificationUpload = (props: any) => {\n  let pageType = \"profile\";\n\n  if (props.location.pathname.includes(\"/onboarding\")) {\n    pageType = \"onboarding\";\n  }\n\n  const [errorMsg, setErrorMsg] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [uploadedFile, setUploadedFile] = useState([]);\n  const [deleted, setDeleted] = useState(false);\n  const profile = useProfileStore((state) => state.data);\n  const { register, handleSubmit, errors } = useForm();\n  const [submitted, setSubmitted] = useState(false);\n  const token = useAuthStore((state) => state.accessToken);\n  const { isLoading, error, data } = useQuery(\"identity\", () =>\n    getIdentificationFields(token)\n  );\n\n  const [uploaded, setUploaded] = useState(profile[\"kyc_documents\"]);\n  const [checklistCompletion, setChecklistCompletion] = useState(false);\n\n  const {\n    isLoading: isLoading2,\n    error: error2,\n    data: uploadSection,\n  } = useQuery(\"sections\", () => getProfileSection(token));\n\n  const initializeProfileSection = useProfileStore(\n    useCallback((state) => state.initializeProfileSection, [])\n  );\n\n  useEffect(() => {\n    uploadSection &&\n      initializeProfileSection(\n        uploadSection,\n        uploadSection.every((loan) => loan.completed === true)\n      );\n  }, [uploadSection]);\n\n  useEffect(() => {\n    setUploaded(profile[\"kyc_documents\"]);\n  }, [profile]);\n\n  let loanStatus =\n    uploadSection && uploadSection.every((loan) => loan.completed === true);\n  console.log(loanStatus);\n  if (isLoading || isLoading2) {\n    return (\n      <>\n        <div className=\"w-full m-auto px-8 relative\">\n          <img\n            src=\"/img/loading-gif.gif\"\n            alt=\"\"\n            className=\"w-1/8 m-auto py-20\"\n          />\n        </div>\n      </>\n    );\n  }\n\n  const onChangeHandler = (event: any, type) => {\n    let dataValue = [] as any;\n    let oldData = [] as any;\n    oldData = [...uploadedFile];\n    dataValue = { value: event.target.files[0], name: type };\n\n    let filterData = [] as any;\n    filterData = oldData.filter((val) => val.name == type);\n\n    if (filterData.length) {\n      filterData[0].value = event.target.files[0];\n      let newFilterData = [] as any;\n      newFilterData = oldData.filter((val) => val.name != type);\n      if (newFilterData.length) {\n        filterData.push(...newFilterData);\n      }\n      setUploadedFile(filterData);\n      return;\n    }\n    oldData.push(dataValue);\n    setUploadedFile(oldData);\n  };\n\n  const updateErrors = (errors: []) => {\n    setErrorMsg(Object.values(errors).flat());\n  };\n\n  const onSubmit = async (name: any) => {\n    if (!uploadedFile.length) {\n      return;\n    }\n    setLoading(true);\n    let val = [] as any;\n    val = [...uploadedFile];\n    let newVale = [] as any;\n    newVale = val.filter((val) => val.name == name);\n    try {\n      const files = new FormData();\n      files.append(\"document\", newVale[0].value);\n      files.append(\"tag\", name);\n      let postData = await uploadDocument(token, files);\n      const { message, data } = postData;\n      let getUploaded = [...uploaded];\n      getUploaded.push(data);\n      setUploaded(getUploaded);\n      // uploaded.push(data);\n\n      setLoading(false);\n      setErrorMsg([]);\n      setSubmitted(true);\n      setTimeout(function () {\n        setSubmitted(false);\n      }, 8000);\n      // refetch();\n    } catch (error) {\n      setLoading(false);\n      if (error && error.response.status == 500) {\n        let msg = [] as any;\n        msg.push(error.response.data.message);\n        setErrorMsg(msg);\n        return;\n      }\n      if (!error.response) {\n        let msg = [] as any;\n        msg.push(\"Network Error, Check Your Internet Connection\");\n        setErrorMsg(msg);\n        return;\n      }\n      const {\n        response: { data },\n      } = error;\n      data.errors && updateErrors(data.errors);\n    }\n    // console.log(uploadedFile);\n  };\n\n  const ActiveDeleteDocument = async (id: any) => {\n    setLoading(true);\n\n    try {\n      let deleteData = await deleteDocument(token, id);\n      let UpdateUploaded = uploaded.filter((del) => del.id != id);\n      setUploaded(UpdateUploaded);\n      setLoading(false);\n      setDeleted(true);\n      setTimeout(function () {\n        setDeleted(false);\n      }, 8000);\n      // refetch();\n    } catch (error) {\n      setLoading(false);\n      if (error && error.response.status == 500) {\n        let msg = [] as any;\n        msg.push(error.response.data.message);\n        setErrorMsg(msg);\n        return;\n      }\n      if (!error.response) {\n        let msg = [] as any;\n        msg.push(\"Network Error, Check Your Internet Connection\");\n        setErrorMsg(msg);\n        return;\n      }\n      const {\n        response: { data },\n      } = error;\n      data.errors && updateErrors(data.errors);\n    }\n  };\n\n  return (\n    <>\n      <div className=\"hidden md:block w-5/12 mb-6 border-r-2 border-gray-200\">\n        <OnboardingSideBar name=\"documents\" />\n        <img src=\"/img/checklists.svg\" alt=\"\" className=\"w-1/4 m-auto pt-16\" />\n      </div>\n\n      <div className=\"md:w-7/12 w-full mb-6 px-8 relative\">\n        <h1 className=\"block text-gray-700 text-lg font-bold mb-2\">\n          UPLOAD YOUR ID\n        </h1>\n        {deleted ? (\n          <>\n            <div\n              className=\"bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fade-in\"\n              role=\"alert\"\n            >\n              <div className=\"flex\">\n                <div className=\"py-1\">\n                  <svg\n                    className=\"fill-current h-6 w-6 text-teal-500 mr-4\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    viewBox=\"0 0 20 20\"\n                  >\n                    <path d=\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\" />\n                  </svg>\n                </div>\n                <div>\n                  {/* <p className=\"font-bold\">Sent successfully</p> */}\n                  <p className=\"text-sm\">Deleted successfully</p>\n                </div>\n              </div>\n            </div>\n          </>\n        ) : (\n          \"\"\n        )}\n        {submitted ? (\n          <>\n            <div\n              className=\"bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md\"\n              role=\"alert\"\n            >\n              <div className=\"flex\">\n                <div className=\"py-1\">\n                  <svg\n                    className=\"fill-current h-6 w-6 text-teal-500 mr-4\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    viewBox=\"0 0 20 20\"\n                  >\n                    <path d=\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\" />\n                  </svg>\n                </div>\n                <div>\n                  {/* <p className=\"font-bold\">Sent successfully</p> */}\n                  <p className=\"text-sm\">Uploaded successfully</p>\n                </div>\n              </div>\n            </div>\n          </>\n        ) : (\n          \"\"\n        )}\n        {errorMsg.length ? (\n          <div\n            className=\"bg-red-100 border-t-4 border-red-500 rounded-b text-red-900 px-4 py-3 shadow-md my-5\"\n            role=\"alert\"\n          >\n            <div className=\"flex\">\n              <div className=\"py-1\">\n                <svg\n                  className=\"fill-current h-6 w-6 text-red-500 mr-4\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 20 20\"\n                >\n                  <path d=\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\" />\n                </svg>\n              </div>\n              <div>\n                {/* <p className=\"font-bold\">Sent successfully</p> */}\n                {/* <p className=\"text-sm\">{errorMsg}</p> */}\n                <ul style={{ listStyleType: \"none\" }}>\n                  {errorMsg.map((error, i) => (\n                    <li key={i}>{error}</li>\n                  ))}\n                </ul>\n              </div>\n            </div>\n          </div>\n        ) : (\n          \"\"\n        )}\n        {loading ? (\n          <img src=\"/img/30.gif\" className=\"ml-2 my-5 w-auto m-auto\" alt=\"\" />\n        ) : (\n          \"\"\n        )}\n        {/* <h3 className=\"text-gray-600 text-sm\"> We hate to ask, but regulations mandate us to. <br/> Your BVN is safe with us!</h3> */}\n        <div className=\"flex flex-col my-10\">\n          <form className=\"w-full max-w-lg\">\n            <div className=\"flex flex-wrap -mx-3 mb-6\">\n              {data &&\n                data.map((data, key) => {\n                  return (\n                    <div className=\"flex flex-wrap \">\n                      <div className=\"md:w-3/5 px-3 my-4\">\n                        <label className=\"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2\">\n                          {data.label}\n                        </label>\n                        <input\n                          type=\"file\"\n                          name={data.name}\n                          className=\"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500\"\n                          onChange={(e) => onChangeHandler(e, data.name)}\n                        />\n                      </div>\n                      <div className=\"flex items-center justify-between mt-5\">\n                        <button\n                          className=\"bg-blue-700 hover:bg-blue-800 text-white text-sm md:text-lg font-light py-3 px-10 rounded-lg focus:outline-none focus:shadow-outline inline-flex items-center shadow-lg\"\n                          type=\"button\"\n                          onClick={() => onSubmit(data.name)}\n                        >\n                          <span> Upload </span>\n                          <svg\n                            className=\"ml-2\"\n                            width=\"13\"\n                            height=\"13\"\n                            viewBox=\"0 0 18 18\"\n                            fill=\"none\"\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                          >\n                            <g id=\"save_icon\">\n                              <path\n                                fill-rule=\"evenodd\"\n                                clip-rule=\"evenodd\"\n                                d=\"M2 0H14L18 4V16C18 17.1 17.1 18 16 18H2C0.89 18 0 17.1 0 16V2C0 0.9 0.89 0 2 0ZM16 16V4.83L13.17 2H2V16H16ZM9 9C7.34 9 6 10.34 6 12C6 13.66 7.34 15 9 15C10.66 15 12 13.66 12 12C12 10.34 10.66 9 9 9ZM12 3H3V7H12V3Z\"\n                                fill=\"white\"\n                              />\n                            </g>\n                          </svg>\n                        </button>\n                      </div>\n                    </div>\n                  );\n                })}\n            </div>\n          </form>\n          <div className=\"w-full my-10\">\n            {uploaded && uploaded.length > 0 ? (\n              <>\n                <h2 className=\"text-gray-700 text-lg font-medium mb-4\">\n                  Uploaded Documents\n                </h2>\n              </>\n            ) : (\n              \"\"\n            )}\n            {uploaded &&\n              uploaded.map((val) => {\n                return (\n                  <div className=\"flex items-center border my-2 border-t-0 border-r-0 border-l-0 pb-2\">\n                    <div className=\"w-3/5\">{val.tag}</div>\n                    <div className=\"w-2/5 text-center\">\n                      <button\n                        className=\"bg-red-600 py-1 px-2 text-white rounded-lg\"\n                        onClick={() => ActiveDeleteDocument(val.id)}\n                      >\n                        X\n                      </button>\n                    </div>\n                  </div>\n                );\n              })}\n          </div>\n        </div>\n\n        <div className=\"flex justify-end w-full pr-0 md:pr-4 mt-10\">\n          <div className=\"inline-flex justify-end\">\n            <button\n              onClick={() =>\n                pageType === \"onboarding\"\n                  ? props.history.push(\"/onboarding/account\")\n                  : props.history.push(\"/profile/account\")\n              }\n              className=\"bg-gray-500 hover:bg-gray-600 text-white text-md md:text-xl font-light py-2 px-6 md:py-3 md:px-8 rounded focus:outline-none focus:shadow-outline inline-flex items-center\"\n              type=\"button\"\n            >\n              <svg\n                className=\"mr-2 -mt-1\"\n                width=\"18\"\n                height=\"18\"\n                viewBox=\"0 0 18 18\"\n                fill=\"none\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <g id=\"chevron_right_24px\">\n                  <path\n                    id=\"icon/navigation/chevron_left_24px\"\n                    d=\"M15.705 16.59L11.125 12L15.705 7.41L14.295 6L8.29498 12L14.295 18L15.705 16.59Z\"\n                    fill=\"white\"\n                  />\n                </g>\n              </svg>\n              <span> Previous </span>\n            </button>\n            {pageType === \"onboarding\" ? (\n              <button\n                disabled={!checklistCompletion}\n                onClick={() => props.history.push(\"/new-loan-request\")}\n                className={\n                  checklistCompletion && checklistCompletion\n                    ? \"bg-green-600 hover:bg-green-700 text-white text-xl font-light py-3 px-10 rounded-r focus:outline-none focus:shadow-outline inline-flex items-center\"\n                    : \"bg-gray-400 text-white text-xl font-light py-3 px-10 rounded focus:outline-none focus:shadow-outline inline-flex items-center cursor-not-allowed\"\n                }\n                type=\"button\"\n              >\n                <span> Complete </span>\n                <svg\n                  className=\"ml-2 -mt-1\"\n                  width=\"18\"\n                  height=\"18\"\n                  viewBox=\"0 0 18 18\"\n                  fill=\"none\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                  <g id=\"chevron_right_24px\">\n                    <path\n                      id=\"icon/action/done_24px\"\n                      d=\"M6.5999 11.925L3.4499 8.775L2.3999 9.825L6.5999 14.025L15.5999 5.025L14.5499 3.975L6.5999 11.925Z\"\n                      fill=\"white\"\n                    />\n                  </g>\n                </svg>\n              </button>\n            ) : (\n              \"\"\n            )}\n          </div>\n        </div>\n\n        {/* <div className=\"absolute bottom-0 right-0 mr-10 -mt-8\">\n          <button\n            // disabled\n            onClick={() => props.history.push(\"/new-loan-request\")}\n            className=\"bg-gray-400 hover:bg-gray-600 text-white text-xl font-light py-3 px-10 rounded-lg focus:outline-none focus:shadow-outline inline-flex items-center\"\n            type=\"button\"\n          >\n            <span> Next </span>\n            <svg\n              className=\"ml-2 -mt-1\"\n              width=\"18\"\n              height=\"18\"\n              viewBox=\"0 0 18 18\"\n              fill=\"none\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <g id=\"chevron_right_24px\">\n                <path\n                  id=\"icon/navigation/chevron_right_24px\"\n                  d=\"M9.70492 6L8.29492 7.41L12.8749 12L8.29492 16.59L9.70492 18L15.7049 12L9.70492 6Z\"\n                  fill=\"white\"\n                />\n              </g>\n            </svg>\n          </button>\n        </div> */}\n      </div>\n    </>\n  );\n};\n\nexport default IdentificationUpload;\n"]},"metadata":{},"sourceType":"module"}