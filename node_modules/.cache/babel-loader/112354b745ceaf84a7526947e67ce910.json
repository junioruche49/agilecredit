{"ast":null,"code":"import React from\"react\";import{useQuery}from\"react-query\";import{useHistory,Route,Switch,useLocation}from\"react-router-dom\";import{withRouter}from\"react-router\";import Bvn from\"./Bvn\";import PersonalDetails from\"./PersonalDetails\";import EducationalDetails from\"./EducationalDetails\";import AccountDetails from\"./AccountDetails\";import Employment from\"./Employment\";import IdentificationUpload from\"./IdentificationUpload\";import NextofKin from\"./NextofKin\";import ContactInformation from\"./ContactInformation\";import useProfileStore from\"../stores/profileStore\";import useAuthStore from\"../stores/authStore\";import{getProfileSection}from\"../clients/onboarding\";function Onboarding(props){var profile=useProfileStore(function(state){return state.profileSection;});// const [checkList, setcheckList] = useState([]);\nvar token=useAuthStore(function(state){return state.accessToken;});// console.log(\"profile\",  profile[7]);\nvar history=useHistory();var location=useLocation();var _useQuery=useQuery(\"sections\",function(){return getProfileSection(token);}),checklistLoading=_useQuery.isLoading,checklistError=_useQuery.error,checklistData=_useQuery.data;var checklist=checklistData?checklistData:[];var completedKyc=checklist.every(function(loan){return loan.completed===true;});if(completedKyc&&location.pathname.includes(\"/onboarding\")){history.replace(\"/profile\");}var pageType=\"profile\";if(history.location.pathname.includes(\"/onboarding\")){pageType=\"onboarding\";}if(location.pathname===\"/onboarding/\"||location.pathname===\"/onboarding\"){history.replace(\"/onboarding/bvn\");}if(location.pathname===\"/profile/\"||location.pathname===\"/profile\"){history.replace(\"/profile/bvn\");}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"main\",{className:\"md:pl-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex \"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-full \"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex items-center mt-10 lg:mt-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-8 h-1 bg-blue-700 rounded mr-3 hidden md:block\"}),/*#__PURE__*/React.createElement(\"h4\",{className:\"bg-blue-700 md:bg-transparent text-white md:text-gray-700 font-light md:font-semibold text-sm md:text-xl tracking-wide uppercase md:normal-case py-2 px-6 rounded-r-lg\"},\"Profile Update\")),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"img\",{src:\"/img/bvn-mobile-card-bg.svg\",alt:\"\",className:\"md:hidden absolute mobile-card-bg\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"relative w-11/12 bg-white flex rounded py-12 shadow-lg border-b-4 border-blue-700 md:border-none mb-20 m-auto md:m-0 mt-12 md:mt-0\"},/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{path:pageType===\"onboarding\"?\"/onboarding/next_of_kin\":\"/profile/next_of_kin\",component:NextofKin,pageType:pageType}),/*#__PURE__*/React.createElement(Route,{path:pageType===\"onboarding\"?\"/onboarding/contact\":\"/profile/contact\",component:ContactInformation,pageType:pageType}),/*#__PURE__*/React.createElement(Route,{path:pageType===\"onboarding\"?\"/onboarding/employment\":\"/profile/employment\",component:Employment,pageType:pageType}),/*#__PURE__*/React.createElement(Route,{path:pageType===\"onboarding\"?\"/onboarding/account\":\"/profile/account\",component:AccountDetails,pageType:pageType}),/*#__PURE__*/React.createElement(Route,{path:pageType===\"onboarding\"?\"/onboarding/personal\":\"/profile/personal\",component:PersonalDetails,pageType:pageType}),/*#__PURE__*/React.createElement(Route,{path:pageType===\"onboarding\"?\"/onboarding/education\":\"/profile/education\",component:EducationalDetails,pageType:pageType}),/*#__PURE__*/React.createElement(Route,{path:pageType===\"onboarding\"?\"/onboarding/documents\":\"/profile/documents\",component:IdentificationUpload,pageType:pageType}),/*#__PURE__*/React.createElement(Route,{path:pageType===\"onboarding\"?\"/onboarding/bvn\":\"/profile/bvn\",component:Bvn,pageType:pageType})),/*#__PURE__*/React.createElement(\"br\",null)),/*#__PURE__*/React.createElement(\"div\",{className:\"w-11/12 mt-8 hidden md:block\"},/*#__PURE__*/React.createElement(\"hr\",{className:\"w-9/12 border-t-2 border-blue-600 bg-blue-400 rounded m-auto\"})))),/*#__PURE__*/React.createElement(\"br\",null)));}export default withRouter(Onboarding);","map":{"version":3,"sources":["/Users/mac/Documents/react app/agilecreditportal/src/pages/Onboarding.tsx"],"names":["React","useQuery","useHistory","Route","Switch","useLocation","withRouter","Bvn","PersonalDetails","EducationalDetails","AccountDetails","Employment","IdentificationUpload","NextofKin","ContactInformation","useProfileStore","useAuthStore","getProfileSection","Onboarding","props","profile","state","profileSection","token","accessToken","history","location","checklistLoading","isLoading","checklistError","error","checklistData","data","checklist","completedKyc","every","loan","completed","pathname","includes","replace","pageType"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useQuery } from \"react-query\";\nimport { NavLink, useHistory, Route, Switch, useLocation } from \"react-router-dom\";\nimport { withRouter } from \"react-router\";\nimport Bvn from \"./Bvn\";\nimport PersonalDetails from \"./PersonalDetails\";\nimport EducationalDetails from \"./EducationalDetails\";\nimport OnboardingSideBar from \"../components/OnboardingSideBar\";\nimport AccountDetails from \"./AccountDetails\";\nimport LoanRequest from \"./LoanApplication\";\nimport Employment from \"./Employment\";\nimport IdentificationUpload from \"./IdentificationUpload\";\nimport NextofKin from \"./NextofKin\";\nimport ContactInformation from \"./ContactInformation\";\n\nimport useProfileStore from \"../stores/profileStore\";\nimport useAuthStore from \"../stores/authStore\";\nimport { getProfileSection } from \"../clients/onboarding\";\n\nfunction Onboarding(props: any) {\n  const profile = useProfileStore((state) => state.profileSection);\n  // const [checkList, setcheckList] = useState([]);\n  const token = useAuthStore((state) => state.accessToken);\n  // console.log(\"profile\",  profile[7]);\n\n  const history = useHistory();\n  const location = useLocation();\n\n  const { isLoading : checklistLoading, error: checklistError, data: checklistData } = useQuery(\"sections\", () =>\n    getProfileSection(token)\n  );\n\n  const checklist = checklistData? checklistData : [];\n\n  const completedKyc = checklist.every((loan) => loan.completed === true);\n\n  if(completedKyc && location.pathname.includes(\"/onboarding\")) {\n    history.replace(\"/profile\");\n  }\n  \n  let pageType = \"profile\";\n\n  if(history.location.pathname.includes(\"/onboarding\")){\n    pageType = \"onboarding\";\n  } \n\n  if(location.pathname === \"/onboarding/\" || location.pathname === \"/onboarding\") {\n    history.replace(\"/onboarding/bvn\");\n  }\n\n  if(location.pathname === \"/profile/\" || location.pathname === \"/profile\" ) {\n    history.replace(\"/profile/bvn\");\n  }\n\n\n\n\n  return (\n    <>\n      <main className=\"md:pl-12\">\n        <div className=\"flex \">\n          <div className=\"w-full \">\n            <div className=\"flex items-center mt-10 lg:mt-0\">\n              <div className=\"w-8 h-1 bg-blue-700 rounded mr-3 hidden md:block\"></div>\n              <h4 className=\"bg-blue-700 md:bg-transparent text-white md:text-gray-700 font-light md:font-semibold text-sm md:text-xl tracking-wide uppercase md:normal-case py-2 px-6 rounded-r-lg\">\n                Profile Update\n              </h4>\n            </div>\n            <br />\n            <img\n              src=\"/img/bvn-mobile-card-bg.svg\"\n              alt=\"\"\n              className=\"md:hidden absolute mobile-card-bg\"\n            />\n            <div className=\"relative w-11/12 bg-white flex rounded py-12 shadow-lg border-b-4 border-blue-700 md:border-none mb-20 m-auto md:m-0 mt-12 md:mt-0\">\n\n                  <Switch>\n                    <Route path={pageType === \"onboarding\" ?  \"/onboarding/next_of_kin\": \"/profile/next_of_kin\"} component={NextofKin} pageType={pageType}/>\n                    <Route path={pageType === \"onboarding\" ?  \"/onboarding/contact\" : \"/profile/contact\"} component={ContactInformation} pageType={pageType}/>\n                    <Route path={pageType === \"onboarding\" ?  \"/onboarding/employment\" : \"/profile/employment\"} component={Employment} pageType={pageType}/>\n                    <Route path={pageType === \"onboarding\" ?  \"/onboarding/account\" : \"/profile/account\"} component={AccountDetails} pageType={pageType}/>\n                    <Route path={pageType === \"onboarding\" ?  \"/onboarding/personal\" : \"/profile/personal\"} component={PersonalDetails} pageType={pageType}/>\n                    <Route path={pageType === \"onboarding\" ?  \"/onboarding/education\" : \"/profile/education\"} component={EducationalDetails} pageType={pageType}/>\n                    <Route path={pageType === \"onboarding\" ?  \"/onboarding/documents\" : \"/profile/documents\"} component={IdentificationUpload} pageType={pageType}/>\n                    <Route path={pageType === \"onboarding\" ?  \"/onboarding/bvn\" : \"/profile/bvn\"} component={Bvn} pageType={pageType}/>\n                  </Switch>\n                  <br />\n                {/* <Switch>\n                  <Route path=\"/onboarding/next_of_kin\" component={NextofKin} />\n                  <Route\n                    path=\"/onboarding/contact\"\n                    component={ContactInformation}\n                  />\n                  <Route path=\"/onboarding/employment\" component={Employment} />\n                  <Route\n                    path=\"/onboarding/account\"\n                    component={AccountDetails}\n                  />\n                  <Route\n                    path=\"/onboarding/personal\"\n                    component={PersonalDetails}\n                  />\n                  <Route\n                    path=\"/onboarding/education\"\n                    component={EducationalDetails}\n                  />\n                  <Route\n                    path=\"/onboarding/documents\"\n                    component={IdentificationUpload}\n                  />\n                  <Route path=\"/onboarding/bvn\" component={Bvn} />\n                </Switch> */}\n            </div>\n            <div className=\"w-11/12 mt-8 hidden md:block\">\n              <hr className=\"w-9/12 border-t-2 border-blue-600 bg-blue-400 rounded m-auto\"></hr>\n            </div>\n          </div>\n        </div>\n        <br />\n      </main>\n    </>\n  );\n}\n\nexport default withRouter(Onboarding);\n"]},"metadata":{},"sourceType":"module"}