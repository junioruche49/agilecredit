{"ast":null,"code":"import axios from \"axios\";\nimport keycloak from \"../auth/keycloak\";\nexport default function apiHandler(token = null) {\n  const axiosInstance = axios.create({\n    baseURL: process.env.REACT_APP_APP_BASE_URL,\n    ...(token ? {\n      headers: {\n        Authorization: `Bearer ${token}`,\n        \"Access-Control-Allow-Origin\": \"*\"\n      }\n    } : {})\n  });\n  axiosInstance.interceptors.response.use(function (response) {\n    return response;\n  }, function (error) {\n    if (error.response && error.response.status == 401) {\n      keycloak.logout();\n      return;\n    }\n\n    return Promise.reject(error);\n  });\n  return axiosInstance;\n}","map":{"version":3,"sources":["/Users/mac/Documents/react app/agilecreditportal/src/clients/base.js"],"names":["axios","keycloak","apiHandler","token","axiosInstance","create","baseURL","process","env","REACT_APP_APP_BASE_URL","headers","Authorization","interceptors","response","use","error","status","logout","Promise","reject"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,kBAArB;AAEA,eAAe,SAASC,UAAT,CAAoBC,KAAK,GAAG,IAA5B,EAAkC;AAC/C,QAAMC,aAAa,GAAGJ,KAAK,CAACK,MAAN,CAAa;AACjCC,IAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,sBADY;AAEjC,QAAIN,KAAK,GACL;AACEO,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAG,UAASR,KAAM,EADxB;AAEP,uCAA+B;AAFxB;AADX,KADK,GAOL,EAPJ;AAFiC,GAAb,CAAtB;AAYAC,EAAAA,aAAa,CAACQ,YAAd,CAA2BC,QAA3B,CAAoCC,GAApC,CACE,UAAUD,QAAV,EAAoB;AAClB,WAAOA,QAAP;AACD,GAHH,EAIE,UAAUE,KAAV,EAAiB;AACf,QAAIA,KAAK,CAACF,QAAN,IAAkBE,KAAK,CAACF,QAAN,CAAeG,MAAf,IAAyB,GAA/C,EAAoD;AAClDf,MAAAA,QAAQ,CAACgB,MAAT;AACA;AACD;;AACD,WAAOC,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,GAVH;AAaA,SAAOX,aAAP;AACD","sourcesContent":["import axios from \"axios\";\nimport keycloak from \"../auth/keycloak\";\n\nexport default function apiHandler(token = null) {\n  const axiosInstance = axios.create({\n    baseURL: process.env.REACT_APP_APP_BASE_URL,\n    ...(token\n      ? {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            \"Access-Control-Allow-Origin\": \"*\",\n          },\n        }\n      : {}),\n  });\n\n  axiosInstance.interceptors.response.use(\n    function (response) {\n      return response;\n    },\n    function (error) {\n      if (error.response && error.response.status == 401) {\n        keycloak.logout();\n        return;\n      }\n      return Promise.reject(error);\n    }\n  );\n\n  return axiosInstance;\n}\n"]},"metadata":{},"sourceType":"module"}