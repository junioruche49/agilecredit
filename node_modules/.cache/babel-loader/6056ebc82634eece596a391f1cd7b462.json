{"ast":null,"code":"import _slicedToArray from\"/Users/mac/Documents/react app/agilecreditportal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useCallback}from\"react\";import useAuthStore from\"../stores/authStore\";import useProfileStore from\"../stores/profileStore\";import{withRouter}from\"react-router-dom\";import PayWithExistingCard from\"./PayWithExistingCard\";import PayWithNewCard from\"./PayWithNewCard\";var PayWithCard=function PayWithCard(props){var amountToPay=props.amount?props.amount:null;var loanId=props.loanId?props.loanId:null;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setLoading=_useState2[1];var token=useAuthStore(function(state){return state.accessToken;});var profile=useProfileStore(useCallback(function(state){return state.data;},[]));var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),responseData=_useState4[0],setResponse=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),responseMessage=_useState6[0],setResponseMessage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showCardsList=_useState8[0],setShowCardsList=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),selectedCard=_useState10[0],setSelectedCard=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),launchInitializaPayment=_useState12[0],setLaunchInitializePayment=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),errorMsg=_useState14[0],setErrorMsg=_useState14[1];var updateErrors=function updateErrors(errors){setErrorMsg(Object.values(errors).flat());};var _handlePayWithExistingCard=function _handlePayWithExistingCard(){setShowCardsList(true);};var _handleCardSelection=function _handleCardSelection(id){setSelectedCard(id);};var _handlePayWithNewCard=function _handlePayWithNewCard(){setLaunchInitializePayment(true);};if(isLoading||!profile.e_mail){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"w-11/12 bg-white rounded py-12 shadow-lg m-auto px-8 relative mt-20\"},/*#__PURE__*/React.createElement(\"img\",{src:\"/img/loading-gif.gif\",alt:\"\",className:\"w-1/8 m-auto py-10\"}),/*#__PURE__*/React.createElement(\"h6\",{className:\"m-auto text-lg text-gray-700 text-center\"},\"Please wait while we process your request...\")));}if(amountToPay===null||loanId===null){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"w-11/12 bg-white rounded py-12 m-auto px-4 relative mt-20\"},/*#__PURE__*/React.createElement(\"img\",{src:\"/img/error-icon.svg\",alt:\"\",className:\"w-2/4 md:w-1/4 m-auto\"}),/*#__PURE__*/React.createElement(\"h6\",{className:\"m-auto text-lg text-red-600 text-center font-semibold mt-4\"},\"Ooops! The system was unable to capture one or more of your payment data. Please try again!\")));}return/*#__PURE__*/React.createElement(React.Fragment,null,errorMsg.length?/*#__PURE__*/React.createElement(\"div\",{className:\"w-11/12 m-auto bg-red-100 border-t-4 border-red-500 rounded-b text-red-900 px-4 py-3 shadow-md my-5\",role:\"alert\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"py-1\"},/*#__PURE__*/React.createElement(\"svg\",{className:\"fill-current h-6 w-6 text-red-500 mr-4\",xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 20 20\"},/*#__PURE__*/React.createElement(\"path\",{d:\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\"}))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"ul\",{style:{listStyleType:\"none\"}},errorMsg.map(function(error,i){return/*#__PURE__*/React.createElement(\"li\",{key:i},error);}))))):\"\",responseMessage&&(responseData===null||responseData===void 0?void 0:responseData.length)>0?/*#__PURE__*/React.createElement(\"div\",{className:\"w-11/12 m-auto bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fade-in\",role:\"alert\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"py-1\"},/*#__PURE__*/React.createElement(\"svg\",{className:\"fill-current h-6 w-6 text-teal-500 mr-4\",xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 20 20\"},/*#__PURE__*/React.createElement(\"path\",{d:\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\"}))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"text-sm\"},responseMessage)))):null,!showCardsList&&!launchInitializaPayment?/*#__PURE__*/React.createElement(\"div\",{className:\"md:flex w-11/12 m-auto\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex justify-between items-center w-full md:w-1/2 h-28 p-4 my-6 mr-2 hover:bg-green-100 rounded-lg border border-blue-300 shadow-md cursor-pointer transition duration-300 ease-in-out fadeInUp\",onClick:_handlePayWithExistingCard},/*#__PURE__*/React.createElement(\"div\",{className:\"flex items-center\"},/*#__PURE__*/React.createElement(\"img\",{className:\"rounded-lg h-12 w-12\",src:\"/img/new-card.svg\",alt:\"Saved cards\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"ml-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-sm font-semibold text-gray-600\"},\"Use Existing Card\"),/*#__PURE__*/React.createElement(\"div\",{className:\"text-sm font-light text-gray-500\"},\"Pay with any of your previously saved cards.\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"flex justify-between items-center w-full md:w-1/2 h-28 p-4 my-6 mr-2 hover:bg-green-100 rounded-lg border border-blue-300 shadow-md cursor-pointer transition duration-300 ease-in-out fadeInUp\",onClick:_handlePayWithNewCard},/*#__PURE__*/React.createElement(\"div\",{className:\"flex items-center\"},/*#__PURE__*/React.createElement(\"img\",{className:\"rounded-lg h-12 w-12\",src:\"/img/saved-cards.svg\",alt:\"New card\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"ml-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-sm font-semibold text-gray-600\"},\"New Card\"),/*#__PURE__*/React.createElement(\"div\",{className:\"text-sm font-light text-gray-500\"},\"Pay with a new card\"))))):null,showCardsList?/*#__PURE__*/React.createElement(PayWithExistingCard,{amount:amountToPay,loanId:loanId}):null,launchInitializaPayment?/*#__PURE__*/React.createElement(PayWithNewCard,{amount:amountToPay,loanId:loanId}):null);};export default withRouter(PayWithCard);","map":{"version":3,"sources":["/Users/mac/Documents/react app/agilecreditportal/src/pages/PayWithCard.tsx"],"names":["React","useState","useCallback","useAuthStore","useProfileStore","withRouter","PayWithExistingCard","PayWithNewCard","PayWithCard","props","amountToPay","amount","loanId","isLoading","setLoading","token","state","accessToken","profile","data","responseData","setResponse","responseMessage","setResponseMessage","showCardsList","setShowCardsList","selectedCard","setSelectedCard","launchInitializaPayment","setLaunchInitializePayment","errorMsg","setErrorMsg","updateErrors","errors","Object","values","flat","_handlePayWithExistingCard","_handleCardSelection","id","_handlePayWithNewCard","e_mail","length","listStyleType","map","error","i"],"mappings":"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","sourcesContent":["import React, { useState, useCallback } from \"react\";\nimport MyCards from \"./MyCards\";\nimport useAuthStore from \"../stores/authStore\";\nimport useProfileStore from \"../stores/profileStore\";\nimport { getCards } from \"../clients/cards\";\nimport { withRouter } from \"react-router-dom\";\nimport PayWithExistingCard from \"./PayWithExistingCard\";\nimport PayWithNewCard from \"./PayWithNewCard\";\n\nconst PayWithCard = (props: any) => {\n  const amountToPay = props.amount ? props.amount : null;\n  const loanId = props.loanId ? props.loanId : null;\n  const [isLoading, setLoading] = useState(false);\n\n  const token = useAuthStore((state) => state.accessToken);\n  const profile: any = useProfileStore(useCallback((state) => state.data, []));\n  const [responseData, setResponse]: any = useState();\n  const [responseMessage, setResponseMessage]: any = useState(null);\n  const [showCardsList, setShowCardsList]: any = useState(false);\n  const [selectedCard, setSelectedCard] = useState<any>();\n  const [launchInitializaPayment, setLaunchInitializePayment] = useState(false);\n\n  const [errorMsg, setErrorMsg] = useState([]);\n\n  const updateErrors = (errors: []) => {\n    setErrorMsg(Object.values(errors).flat());\n  };\n\n  const _handlePayWithExistingCard = () => {\n    setShowCardsList(true);\n  };\n\n  const _handleCardSelection = (id) => {\n    setSelectedCard(id);\n  };\n\n  const _handlePayWithNewCard = () => {\n    setLaunchInitializePayment(true);\n  };\n\n  if (isLoading || !profile.e_mail) {\n    return (\n      <>\n        <div className=\"w-11/12 bg-white rounded py-12 shadow-lg m-auto px-8 relative mt-20\">\n          <img\n            src=\"/img/loading-gif.gif\"\n            alt=\"\"\n            className=\"w-1/8 m-auto py-10\"\n          />\n          <h6 className=\"m-auto text-lg text-gray-700 text-center\">\n            Please wait while we process your request...\n          </h6>\n        </div>\n      </>\n    );\n  }\n\n  if (amountToPay === null || loanId === null) {\n    return (\n      <>\n        <div className=\"w-11/12 bg-white rounded py-12 m-auto px-4 relative mt-20\">\n          <img\n            src=\"/img/error-icon.svg\"\n            alt=\"\"\n            className=\"w-2/4 md:w-1/4 m-auto\"\n          />\n          <h6 className=\"m-auto text-lg text-red-600 text-center font-semibold mt-4\">\n            Ooops! The system was unable to capture one or more of your payment data. Please try\n            again!\n          </h6>\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <>\n      {errorMsg.length ? (\n        <div\n          className=\"w-11/12 m-auto bg-red-100 border-t-4 border-red-500 rounded-b text-red-900 px-4 py-3 shadow-md my-5\"\n          role=\"alert\"\n        >\n          <div className=\"flex\">\n            <div className=\"py-1\">\n              <svg\n                className=\"fill-current h-6 w-6 text-red-500 mr-4\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                viewBox=\"0 0 20 20\"\n              >\n                <path d=\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\" />\n              </svg>\n            </div>\n            <div>\n              <ul style={{ listStyleType: \"none\" }}>\n                {errorMsg.map((error, i) => (\n                  <li key={i}>{error}</li>\n                ))}\n              </ul>\n            </div>\n          </div>\n        </div>\n      ) : (\n        \"\"\n      )}\n      {responseMessage && responseData?.length > 0 ? (\n        <div\n          className=\"w-11/12 m-auto bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fade-in\"\n          role=\"alert\"\n        >\n          <div className=\"flex\">\n            <div className=\"py-1\">\n              <svg\n                className=\"fill-current h-6 w-6 text-teal-500 mr-4\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                viewBox=\"0 0 20 20\"\n              >\n                <path d=\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\" />\n              </svg>\n            </div>\n            <div>\n              <p className=\"text-sm\">{responseMessage}</p>\n            </div>\n          </div>\n        </div>\n      ) : null}\n\n      {!showCardsList && !launchInitializaPayment ? (\n        <div className=\"md:flex w-11/12 m-auto\">\n          <div\n            className=\"flex justify-between items-center w-full md:w-1/2 h-28 p-4 my-6 mr-2 hover:bg-green-100 rounded-lg border border-blue-300 shadow-md cursor-pointer transition duration-300 ease-in-out fadeInUp\"\n            onClick={_handlePayWithExistingCard}\n          >\n            <div className=\"flex items-center\">\n              <img\n                className=\"rounded-lg h-12 w-12\"\n                src=\"/img/new-card.svg\"\n                alt=\"Saved cards\"\n              />\n              <div className=\"ml-4\">\n                <div className=\"text-sm font-semibold text-gray-600\">\n                  Use Existing Card\n                </div>\n                <div className=\"text-sm font-light text-gray-500\">\n                  Pay with any of your previously saved cards.\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"flex justify-between items-center w-full md:w-1/2 h-28 p-4 my-6 mr-2 hover:bg-green-100 rounded-lg border border-blue-300 shadow-md cursor-pointer transition duration-300 ease-in-out fadeInUp\" onClick={_handlePayWithNewCard}>\n            <div className=\"flex items-center\">\n              <img\n                className=\"rounded-lg h-12 w-12\"\n                src=\"/img/saved-cards.svg\"\n                alt=\"New card\"\n              />\n              <div className=\"ml-4\">\n                <div className=\"text-sm font-semibold text-gray-600\">\n                  New Card\n                </div>\n                <div className=\"text-sm font-light text-gray-500\">\n                  Pay with a new card\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      ) : null}\n      {showCardsList ? <PayWithExistingCard amount={amountToPay} loanId={loanId} /> : null}\n      {launchInitializaPayment ? <PayWithNewCard amount={amountToPay} loanId={loanId}/> : null}\n    </>\n  );\n};\n\nexport default withRouter(PayWithCard);\n"]},"metadata":{},"sourceType":"module"}