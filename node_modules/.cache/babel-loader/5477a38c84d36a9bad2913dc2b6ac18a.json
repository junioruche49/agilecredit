{"ast":null,"code":"import _objectSpread from\"/Users/mac/Documents/react app/agilecreditportal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useMemo}from\"react\";import{useQuery}from\"react-query\";import useAuthStore from\"../stores/authStore\";import{getTotalLoanAmount,getTotalOutstandingBalance,getNextLoanDueDate,getRecentLoanAmountTable,getRecentRepaymentsTable}from\"../clients/reports\";import DoughnutChart from\"../components/Dashboard/DoughnutChart\";import{withRouter}from\"react-router-dom\";import RepaymentsGraph from\"../components/Dashboard/RepaymentsGraph\";var getMonth=function getMonth(dateString){var monthNames=[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"June\",\"July\",\"Aug\",\"Sept\",\"Oct\",\"Nov\",\"Dec\"];return monthNames[new Date(dateString).getMonth()];};function Home(props){var _lastTenPayments;var token=useAuthStore(function(state){return state.accessToken;});var user=useAuthStore(function(state){return state.currentUser;});var _useQuery=useQuery(\"totalLoanAMount\",function(){return getTotalLoanAmount(token);},{retry:1}),isTotalLoanAmountLoading=_useQuery.isLoading,totalLoanAmountError=_useQuery.error,totalLoanAmountData=_useQuery.data;var _useQuery2=useQuery(\"totalOutstandingBalance\",function(){return getTotalOutstandingBalance(token);},{retry:1}),isTotalOutstandingBalanceLoading=_useQuery2.isLoading,totalOutstandingBalanceError=_useQuery2.error,totalOutstandingBalanceData=_useQuery2.data;var _useQuery3=useQuery(\"nextLoanDueDate\",function(){return getNextLoanDueDate(token);},{retry:1}),isNextLoanDueDateLoading=_useQuery3.isLoading,nextLoanDueDateError=_useQuery3.error,nextLoanDueDateBalanceData=_useQuery3.data;var _useQuery4=useQuery(\"recentLoanAmountTable\",function(){return getRecentLoanAmountTable(token);},{retry:1}),isRecentLoanAmountTableLoading=_useQuery4.isLoading,recentLoanAmountTableError=_useQuery4.error,recentLoanAmountTableData=_useQuery4.data;var _useQuery5=useQuery(\"recentRepaymentsTable\",function(){return getRecentRepaymentsTable(token);},{retry:1}),isRecentRepaymentsTableLoading=_useQuery5.isLoading,recentRepaymentsTableError=_useQuery5.error,recentRepaymentsTableData=_useQuery5.data;var doughnutChartData=useMemo(function(){if(!recentLoanAmountTableData){return{labels:[],values:[]};}var labels=Object.keys(recentLoanAmountTableData===null||recentLoanAmountTableData===void 0?void 0:recentLoanAmountTableData.data).map(function(label){return new Date(label).toDateString();});return{labels:labels,values:Object.values(recentLoanAmountTableData===null||recentLoanAmountTableData===void 0?void 0:recentLoanAmountTableData.data)};},[recentLoanAmountTableData]);var repaymentGraphData=useMemo(function(){if(!recentRepaymentsTableData){return{labels:[],values:[]};}var rawRepaymentsData=recentRepaymentsTableData===null||recentRepaymentsTableData===void 0?void 0:recentRepaymentsTableData.data.map(function(data){return _objectSpread(_objectSpread({},data),{},{created_at:getMonth(data===null||data===void 0?void 0:data.created_at)});});var labels=rawRepaymentsData.map(function(data){return data.created_at;}).filter(function(data,index,arr){return arr.indexOf(data)===index;});var values=labels.map(function(label){var data=rawRepaymentsData.filter(function(data){return data.created_at===label;});var value=data.reduce(function(acc,curr){return acc+Number(curr.amount);},0);return value;});return{labels:labels,values:values};},[recentRepaymentsTableData]);var myPayments=[];var lastTenPayments=[];if(recentRepaymentsTableData){myPayments=recentRepaymentsTableData.data;lastTenPayments=myPayments.slice(0,10);}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"lg:hidden\"},/*#__PURE__*/React.createElement(\"br\",{className:\"lg:hidden\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"w-full text-center mb-10 lg:hidden\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"text-green-500 font-semibold lg:hidden\"},\"Hello, \",user&&user.firstName,\"!\")),/*#__PURE__*/React.createElement(\"div\",{className:\"pl-10 mobile-dashboard-stats\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex overflow-x-auto mt-4\"},isTotalLoanAmountLoading?/*#__PURE__*/React.createElement(\"div\",{className:\"w-64 bg-white flex-none  rounded p-4 p-8 shadow-sm mr-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex animate-pulse items-center justify-between mb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"bg-blue-200  w-8 h-8 rounded-full\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"bg-blue-200 w-2/3 h-2 rounded-md\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"animate-pulse bg-blue-200 w-full h-2 rounded-md\"})):/*#__PURE__*/React.createElement(\"div\",{className:\"w-64 bg-white flex-none border rounded p-4 shadow-sm mr-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex items-center justify-start mb-2\"},/*#__PURE__*/React.createElement(\"img\",{src:\"img/loan-amount-icon.svg\",className:\"w-8\",alt:\"\"}),/*#__PURE__*/React.createElement(\"h3\",{className:\"font-normal text-blue-600 ml-6 text-sm font-medium\"},\"Loans Received\")),Number(totalLoanAmountData===null||totalLoanAmountData===void 0?void 0:totalLoanAmountData.data)>0?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"h3\",{className:\"font-bold text-xl text-gray-600\"},\"\\u20A6\",Number(totalLoanAmountData===null||totalLoanAmountData===void 0?void 0:totalLoanAmountData.data).toLocaleString(undefined,{maximumFractionDigits:2}))):/*#__PURE__*/React.createElement(\"h3\",{className:\"font-bold text-xl text-gray-300\"},\"\\u20A60.00\")),isTotalOutstandingBalanceLoading?/*#__PURE__*/React.createElement(\"div\",{className:\"w-64 bg-white flex-none  rounded p-4 p-8 shadow-sm mr-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex animate-pulse items-center justify-between mb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"bg-blue-200  w-8 h-8 rounded-full\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"bg-blue-200 w-2/3 h-2 rounded-md\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"animate-pulse bg-blue-200 w-full h-2 rounded-md\"})):/*#__PURE__*/React.createElement(\"div\",{className:\"w-64 bg-white border-green-500 flex-none border rounded p-4 shadow-sm mr-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex items-center justify-start mb-2\"},/*#__PURE__*/React.createElement(\"img\",{src:\"img/repayment-icon.svg\",className:\"w-8\",alt:\"\"}),/*#__PURE__*/React.createElement(\"h3\",{className:\"font-normal text-green-600 ml-6 text-sm font-medium\"},\"Total Outstanding\")),Number(totalOutstandingBalanceData===null||totalOutstandingBalanceData===void 0?void 0:totalOutstandingBalanceData.data)>0?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"h3\",{className:\"font-bold text-xl text-gray-600\"},\"\\u20A6\",Number(totalOutstandingBalanceData===null||totalOutstandingBalanceData===void 0?void 0:totalOutstandingBalanceData.data).toLocaleString(undefined,{maximumFractionDigits:2}))):/*#__PURE__*/React.createElement(\"h3\",{className:\"font-bold text-xl text-gray-300\"},\"\\u20A60.00\")),isNextLoanDueDateLoading?/*#__PURE__*/React.createElement(\"div\",{className:\"w-64 bg-white flex-none  rounded p-4 p-8 shadow-sm mr-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex animate-pulse items-center justify-between mb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"bg-blue-200  w-8 h-8 rounded-full\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"bg-blue-200 w-2/3 h-2 rounded-md\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"animate-pulse bg-blue-200 w-full h-2 rounded-md\"})):/*#__PURE__*/React.createElement(\"div\",{className:\"w-64 bg-white flex-none border rounded p-4 shadow-sm\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex items-center justify-start mb-2\"},/*#__PURE__*/React.createElement(\"img\",{src:\"img/next-repayment-icon.svg\",className:\"w-8\",alt:\"\"}),/*#__PURE__*/React.createElement(\"h3\",{className:\"font-normal text-purple-600 ml-6 text-sm font-medium\"},\"Next Repayment Date\")),(nextLoanDueDateBalanceData===null||nextLoanDueDateBalanceData===void 0?void 0:nextLoanDueDateBalanceData.data)?/*#__PURE__*/React.createElement(\"h3\",{className:\"font-bold text-xl text-gray-600\"},\" \",new Date(nextLoanDueDateBalanceData===null||nextLoanDueDateBalanceData===void 0?void 0:nextLoanDueDateBalanceData.data).toLocaleDateString(),\" \"):/*#__PURE__*/React.createElement(\"h3\",{className:\"font-bold text-xl text-gray-300\"},\"--\")))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"w-56 bg-blue-700 p-2 pr-10 rounded-tr-md rounded-br-md\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"text-right text-white font-normal text-xs\"},\"Your Recent Payments\")),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"\"},isRecentRepaymentsTableLoading||recentRepaymentsTableData===null?/*#__PURE__*/React.createElement(\"div\",{className:\"sm:w-8/12 flex-none  rounded pt-6 p-8 m-auto\"},/*#__PURE__*/React.createElement(\"div\",{className:\"animate-pulse flex space-x-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex-1 space-y-6 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"h-4 bg-blue-200 rounded w-3/4\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"space-y-6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"h-4 bg-blue-200 rounded\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"h-4 bg-blue-200 rounded\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"h-4 bg-blue-200 rounded\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"h-4 bg-blue-200 rounded\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"h-4 bg-blue-200 rounded\"}))))):/*#__PURE__*/React.createElement(\"table\",{className:\"table-fixed sm:w-8/12  m-auto\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",{className:\"bg-blue-200 border-0\"},/*#__PURE__*/React.createElement(\"th\",{className:\"w-1/6 px-4 py-3 text-xs font-semibold text-blue-700 rounded-bl-md rounded-tl-md text-left\"},\"S/N\"),/*#__PURE__*/React.createElement(\"th\",{className:\"w-1/4 px-4 py-3 text-xs font-semibold text-blue-700\"},\"Amount\"),/*#__PURE__*/React.createElement(\"th\",{className:\"w-1/3 px-4 py-3 text-xs font-semibold text-blue-700 text-right\"},\"Date\"))),/*#__PURE__*/React.createElement(\"tbody\",null,(_lastTenPayments=lastTenPayments)===null||_lastTenPayments===void 0?void 0:_lastTenPayments.map(function(d,i){return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{className:\"w-1/6 border-b px-4 py-3 text-xs text-gray-600 text-left\"},i+1,\".\"),/*#__PURE__*/React.createElement(\"td\",{className:\"w-1/6 border-b px-4 py-3 text-xs text-green-700 text-center\"},\"\\u20A6\",Number(d.amount).toLocaleString(undefined,{maximumFractionDigits:2})),/*#__PURE__*/React.createElement(\"td\",{className:\"w-1/3 border-b px-4 py-3 text-xs text-gray-600 text-right\"},new Date(d.created_at).toLocaleDateString()));})))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null)),/*#__PURE__*/React.createElement(\"main\",{className:\"hidden lg:block lg:pl-12\"},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-1/3\"},isTotalLoanAmountLoading?/*#__PURE__*/React.createElement(\"div\",{className:\"w-10/12 bg-white flex-none  rounded pt-6 p-8 shadow-sm mr-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex animate-pulse items-center justify-between mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"bg-blue-200  w-12 h-12 rounded-full\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"bg-blue-200 w-2/3 h-4 rounded-md\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"animate-pulse bg-blue-200 w-full h-4 rounded-md\"})):/*#__PURE__*/React.createElement(\"div\",{className:\"w-10/12 bg-white flex-none  rounded pt-6 p-8 shadow-sm mr-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex items-center justify-start mb-2\"},/*#__PURE__*/React.createElement(\"img\",{src:\"img/loan-amount-icon.svg\",className:\"w-10\",alt:\"\"}),/*#__PURE__*/React.createElement(\"h3\",{className:\"font-normal text-blue-600 ml-6 text-base font-medium\"},\"Loans Received\")),Number(totalLoanAmountData===null||totalLoanAmountData===void 0?void 0:totalLoanAmountData.data)>0?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"h3\",{className:\"font-bold text-2xl text-gray-600\"},\"\\u20A6\",Number(totalLoanAmountData===null||totalLoanAmountData===void 0?void 0:totalLoanAmountData.data).toLocaleString(undefined,{maximumFractionDigits:2}))):/*#__PURE__*/React.createElement(\"h3\",{className:\"font-bold text-2xl text-gray-300\"},\"\\u20A60.00\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"w-1/3\"},isTotalOutstandingBalanceLoading?/*#__PURE__*/React.createElement(\"div\",{className:\"w-10/12 bg-white flex-none  rounded pt-6 p-8 shadow-sm mr-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex animate-pulse items-center justify-between mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"bg-blue-200  w-12 h-12 rounded-full\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"bg-blue-200 w-2/3 h-4 rounded-md\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"animate-pulse bg-blue-200 w-full h-4 rounded-md\"})):/*#__PURE__*/React.createElement(\"div\",{className:\"w-10/12 bg-white border border-green-500 flex-none  rounded pt-6 p-8 shadow-sm mr-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex items-center justify-start mb-2\"},/*#__PURE__*/React.createElement(\"img\",{src:\"img/repayment-icon.svg\",className:\"w-10\",alt:\"\"}),/*#__PURE__*/React.createElement(\"h3\",{className:\"font-normal text-green-600 ml-6 text-base font-medium\"},\"Total Outstanding\")),Number(totalOutstandingBalanceData===null||totalOutstandingBalanceData===void 0?void 0:totalOutstandingBalanceData.data)>0?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"h3\",{className:\"font-bold text-2xl text-gray-600\"},\"\\u20A6\",Number(totalOutstandingBalanceData===null||totalOutstandingBalanceData===void 0?void 0:totalOutstandingBalanceData.data).toLocaleString(undefined,{maximumFractionDigits:2}))):/*#__PURE__*/React.createElement(\"h3\",{className:\"font-bold text-2xl text-gray-300\"},\"\\u20A60.00\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"w-1/3\"},isNextLoanDueDateLoading?/*#__PURE__*/React.createElement(\"div\",{className:\"w-10/12 bg-white flex-none  rounded pt-6 p-8 shadow-sm mr-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex animate-pulse items-center justify-between mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"bg-blue-200  w-12 h-12 rounded-full\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"bg-blue-200 w-2/3 h-4 rounded-md\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"animate-pulse bg-blue-200 w-full h-4 rounded-md\"})):/*#__PURE__*/React.createElement(\"div\",{className:\"w-10/12 bg-white flex-none  rounded pt-6 p-8 shadow-sm mr-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex items-center justify-start mb-2\"},/*#__PURE__*/React.createElement(\"img\",{src:\"img/next-repayment-icon.svg\",className:\"w-10\",alt:\"\"}),/*#__PURE__*/React.createElement(\"h3\",{className:\"font-normal text-purple-500 ml-6 text-base font-medium\"},\"Next Repayment Date\")),(nextLoanDueDateBalanceData===null||nextLoanDueDateBalanceData===void 0?void 0:nextLoanDueDateBalanceData.data)?/*#__PURE__*/React.createElement(\"h3\",{className:\"font-bold text-2xl text-gray-600\"},\" \",new Date(nextLoanDueDateBalanceData===null||nextLoanDueDateBalanceData===void 0?void 0:nextLoanDueDateBalanceData.data).toLocaleDateString(),\" \"):/*#__PURE__*/React.createElement(\"h3\",{className:\"font-bold text-2xl text-gray-300\"},\"--\")))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"flex \"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-8/12 \"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-8 h-1 bg-blue-700 rounded mr-3\"}),/*#__PURE__*/React.createElement(\"h4\",{className:\"text-gray-700 font-semibold text-xl tracking-wide\"},\"Repayment Trend\")),/*#__PURE__*/React.createElement(\"br\",null),isRecentRepaymentsTableLoading||recentRepaymentsTableData===null?/*#__PURE__*/React.createElement(\"div\",{className:\"w-11/12 bg-white flex-none  rounded pt-6 p-8 shadow-sm mr-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"animate-pulse flex space-x-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex-1 space-y-6 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"h-4 bg-blue-200 rounded w-3/4\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"space-y-6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"h-4 bg-blue-200 rounded\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"h-4 bg-blue-200 rounded\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"h-4 bg-blue-200 rounded\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"h-4 bg-blue-200 rounded\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"h-4 bg-blue-200 rounded\"}))))):/*#__PURE__*/React.createElement(\"div\",{className:\"w-11/12 bg-white flex-none  rounded pt-6 p-8 shadow-lg \"},/*#__PURE__*/React.createElement(RepaymentsGraph,{data:repaymentGraphData}))),/*#__PURE__*/React.createElement(\"div\",{className:\"w-1/3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-10/12 \"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-8 h-1 bg-blue-700 rounded mr-3\"}),/*#__PURE__*/React.createElement(\"h4\",{className:\"text-gray-700 font-semibold text-xl tracking-wide\"},\"Recent Loans\")),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"w-full bg-white flex-none  rounded pt-6 p-8 shadow-lg mb-3\"},isRecentLoanAmountTableLoading||recentLoanAmountTableData===null?/*#__PURE__*/React.createElement(\"div\",{className:\"animate-pulse flex space-x-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex-1 space-y-6 py-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"h-4 bg-blue-200 rounded w-3/4\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"space-y-6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"h-4 bg-blue-200 rounded\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"h-4 bg-blue-200 rounded\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"h-4 bg-blue-200 rounded\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"h-4 bg-blue-200 rounded\"})))):/*#__PURE__*/React.createElement(DoughnutChart,{data:doughnutChartData})),/*#__PURE__*/React.createElement(\"button\",{className:\"flex w-full shadow-xl text-xl font-light text-white justify-center pt-3 pb-3 items-center bg-blue-700 hover:bg-blue-600 rounded-md transition-colors duration-150 ease-in-out\",onClick:function onClick(){return props.history.push(\"/loans\");}},/*#__PURE__*/React.createElement(\"span\",{className:\"ml-4 text-sm xl:text-lg lg:text-sm pr-2\"},\"See loan history\"),/*#__PURE__*/React.createElement(\"img\",{src:\"img/chevron-right.svg\",className:\"w-5 pt-1\",alt:\"\"}))))),/*#__PURE__*/React.createElement(\"br\",null)));}export default withRouter(Home);","map":{"version":3,"sources":["/Users/mac/Documents/react app/agilecreditportal/src/pages/Home.tsx"],"names":["React","useMemo","useQuery","useAuthStore","getTotalLoanAmount","getTotalOutstandingBalance","getNextLoanDueDate","getRecentLoanAmountTable","getRecentRepaymentsTable","DoughnutChart","withRouter","RepaymentsGraph","getMonth","dateString","monthNames","Date","Home","props","token","state","accessToken","user","currentUser","retry","isTotalLoanAmountLoading","isLoading","totalLoanAmountError","error","totalLoanAmountData","data","isTotalOutstandingBalanceLoading","totalOutstandingBalanceError","totalOutstandingBalanceData","isNextLoanDueDateLoading","nextLoanDueDateError","nextLoanDueDateBalanceData","isRecentLoanAmountTableLoading","recentLoanAmountTableError","recentLoanAmountTableData","isRecentRepaymentsTableLoading","recentRepaymentsTableError","recentRepaymentsTableData","doughnutChartData","labels","values","Object","keys","map","label","toDateString","repaymentGraphData","rawRepaymentsData","created_at","filter","index","arr","indexOf","value","reduce","acc","curr","Number","amount","myPayments","lastTenPayments","slice","firstName","toLocaleString","undefined","maximumFractionDigits","toLocaleDateString","d","i","history","push"],"mappings":"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","sourcesContent":["import React, { useMemo } from \"react\";\nimport { useQuery } from \"react-query\";\nimport useAuthStore from \"../stores/authStore\";\nimport {\n  getTotalLoanAmount,\n  getTotalOutstandingBalance,\n  getNextLoanDueDate,\n  getRecentLoanAmountTable,\n  getRecentRepaymentsTable,\n} from \"../clients/reports\";\nimport DoughnutChart from \"../components/Dashboard/DoughnutChart\";\nimport { withRouter } from \"react-router-dom\";\nimport RepaymentsGraph from \"../components/Dashboard/RepaymentsGraph\";\n\nconst getMonth = (dateString) => {\n  const monthNames = [\n    \"Jan\",\n    \"Feb\",\n    \"Mar\",\n    \"Apr\",\n    \"May\",\n    \"June\",\n    \"July\",\n    \"Aug\",\n    \"Sept\",\n    \"Oct\",\n    \"Nov\",\n    \"Dec\",\n  ];\n\n  return monthNames[new Date(dateString).getMonth()];\n};\n\nfunction Home(props: any) {\n  const token = useAuthStore((state) => state.accessToken);\n  const user: any = useAuthStore((state) => state.currentUser);\n\n  const {\n    isLoading: isTotalLoanAmountLoading,\n    error: totalLoanAmountError,\n    data: totalLoanAmountData,\n  } = useQuery(\"totalLoanAMount\", () => getTotalLoanAmount(token), {\n    retry: 1\n  });\n\n  const {\n    isLoading: isTotalOutstandingBalanceLoading,\n    error: totalOutstandingBalanceError,\n    data: totalOutstandingBalanceData,\n  } = useQuery(\"totalOutstandingBalance\", () =>\n    getTotalOutstandingBalance(token), {\n      retry: 1\n    }\n  );\n\n  const {\n    isLoading: isNextLoanDueDateLoading,\n    error: nextLoanDueDateError,\n    data: nextLoanDueDateBalanceData,\n  } = useQuery(\"nextLoanDueDate\", () => getNextLoanDueDate(token), {\n    retry: 1\n  });\n\n  const {\n    isLoading: isRecentLoanAmountTableLoading,\n    error: recentLoanAmountTableError,\n    data: recentLoanAmountTableData,\n  } = useQuery(\"recentLoanAmountTable\", () => getRecentLoanAmountTable(token), {\n    retry: 1\n  });\n\n  const {\n    isLoading: isRecentRepaymentsTableLoading,\n    error: recentRepaymentsTableError,\n    data: recentRepaymentsTableData,\n  } = useQuery(\"recentRepaymentsTable\", () => getRecentRepaymentsTable(token), {\n    retry: 1\n  });\n\n  const doughnutChartData = useMemo(() => {\n    if (!recentLoanAmountTableData) {\n      return { labels: [], values: [] };\n    }\n    let labels = Object.keys(recentLoanAmountTableData?.data).map((label) => {\n      return new Date(label).toDateString();\n    });\n    return {\n      labels: labels,\n      values: Object.values(recentLoanAmountTableData?.data),\n    };\n  }, [recentLoanAmountTableData]);\n\n  const repaymentGraphData = useMemo(() => {\n    if (!recentRepaymentsTableData) {\n      return { labels: [], values: [] };\n    }\n    const rawRepaymentsData = recentRepaymentsTableData?.data.map((data) => {\n      return {\n        ...data,\n        created_at: getMonth(data?.created_at),\n      };\n    });\n\n    const labels = rawRepaymentsData\n      .map((data) => {\n        return data.created_at;\n      })\n      .filter((data, index, arr) => {\n        return arr.indexOf(data) === index;\n      });\n\n    const values = labels.map((label) => {\n      let data = rawRepaymentsData.filter((data) => {\n        return data.created_at === label;\n      });\n\n      const value = data.reduce((acc, curr) => {\n        return acc + Number(curr.amount);\n      }, 0);\n\n      return value;\n    });\n\n    return { labels, values };\n  }, [recentRepaymentsTableData]);\n\n  let myPayments = [];\n  let lastTenPayments: any[] = [];\n\n  if (recentRepaymentsTableData) {\n    myPayments = recentRepaymentsTableData.data;\n    lastTenPayments = myPayments.slice(0, 10);\n  }\n\n  return (\n    <>\n      {/* Mobile View */}\n      <div className=\"lg:hidden\">\n        <br className=\"lg:hidden\" />\n        <div className=\"w-full text-center mb-10 lg:hidden\">\n          <h1 className=\"text-green-500 font-semibold lg:hidden\">\n            Hello, {user && user.firstName}!\n          </h1>\n        </div>\n\n        <div className=\"pl-10 mobile-dashboard-stats\">\n          <div className=\"flex overflow-x-auto mt-4\">\n            {isTotalLoanAmountLoading ? (\n              <div className=\"w-64 bg-white flex-none  rounded p-4 p-8 shadow-sm mr-5\">\n                <div className=\"flex animate-pulse items-center justify-between mb-2\">\n                  <div className=\"bg-blue-200  w-8 h-8 rounded-full\"></div>\n                  <div className=\"bg-blue-200 w-2/3 h-2 rounded-md\"></div>\n                </div>\n                <div className=\"animate-pulse bg-blue-200 w-full h-2 rounded-md\"></div>\n              </div>\n            ) : (\n              <div className=\"w-64 bg-white flex-none border rounded p-4 shadow-sm mr-5\">\n                <div className=\"flex items-center justify-start mb-2\">\n                  <img src=\"img/loan-amount-icon.svg\" className=\"w-8\" alt=\"\" />\n                  <h3 className=\"font-normal text-blue-600 ml-6 text-sm font-medium\">\n                    Loans Received\n                  </h3>\n                </div>\n                {Number(totalLoanAmountData?.data) > 0 ? (\n                  <>\n                    <h3 className=\"font-bold text-xl text-gray-600\">\n                      ₦\n                      {Number(totalLoanAmountData?.data).toLocaleString(\n                        undefined,\n                        {\n                          maximumFractionDigits: 2,\n                        }\n                      )}\n                    </h3>\n                  </>\n                ) : (\n                  <h3 className=\"font-bold text-xl text-gray-300\">₦0.00</h3>\n                )}\n              </div>\n            )}\n\n            {isTotalOutstandingBalanceLoading ? (\n              <div className=\"w-64 bg-white flex-none  rounded p-4 p-8 shadow-sm mr-5\">\n                <div className=\"flex animate-pulse items-center justify-between mb-2\">\n                  <div className=\"bg-blue-200  w-8 h-8 rounded-full\"></div>\n                  <div className=\"bg-blue-200 w-2/3 h-2 rounded-md\"></div>\n                </div>\n                <div className=\"animate-pulse bg-blue-200 w-full h-2 rounded-md\"></div>\n              </div>\n            ) : (\n              <div className=\"w-64 bg-white border-green-500 flex-none border rounded p-4 shadow-sm mr-5\">\n                <div className=\"flex items-center justify-start mb-2\">\n                  <img src=\"img/repayment-icon.svg\" className=\"w-8\" alt=\"\" />\n                  <h3 className=\"font-normal text-green-600 ml-6 text-sm font-medium\">\n                    Total Outstanding\n                  </h3>\n                </div>\n                {Number(totalOutstandingBalanceData?.data) > 0 ? (\n                  <>\n                    <h3 className=\"font-bold text-xl text-gray-600\">\n                      ₦\n                      {Number(totalOutstandingBalanceData?.data).toLocaleString(\n                        undefined,\n                        {\n                          maximumFractionDigits: 2,\n                        }\n                      )}\n                    </h3>\n                  </>\n                ) : (\n                  <h3 className=\"font-bold text-xl text-gray-300\">₦0.00</h3>\n                )}\n              </div>\n            )}\n            {isNextLoanDueDateLoading ? (\n              <div className=\"w-64 bg-white flex-none  rounded p-4 p-8 shadow-sm mr-5\">\n                <div className=\"flex animate-pulse items-center justify-between mb-2\">\n                  <div className=\"bg-blue-200  w-8 h-8 rounded-full\"></div>\n                  <div className=\"bg-blue-200 w-2/3 h-2 rounded-md\"></div>\n                </div>\n                <div className=\"animate-pulse bg-blue-200 w-full h-2 rounded-md\"></div>\n              </div>\n            ) : (\n              <div className=\"w-64 bg-white flex-none border rounded p-4 shadow-sm\">\n                <div className=\"flex items-center justify-start mb-2\">\n                  <img\n                    src=\"img/next-repayment-icon.svg\"\n                    className=\"w-8\"\n                    alt=\"\"\n                  />\n                  <h3 className=\"font-normal text-purple-600 ml-6 text-sm font-medium\">\n                    Next Repayment Date\n                  </h3>\n                </div>\n                {nextLoanDueDateBalanceData?.data ? (\n                  <h3 className=\"font-bold text-xl text-gray-600\">\n                    {\" \"}\n                    {new Date(\n                      nextLoanDueDateBalanceData?.data\n                    ).toLocaleDateString()}{\" \"}\n                  </h3>\n                ) : (\n                  <h3 className=\"font-bold text-xl text-gray-300\">--</h3>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n        <br />\n        <div className=\"w-56 bg-blue-700 p-2 pr-10 rounded-tr-md rounded-br-md\">\n          <h4 className=\"text-right text-white font-normal text-xs\">\n            Your Recent Payments\n          </h4>\n        </div>\n        <br />\n        <div className=\"\">\n          {isRecentRepaymentsTableLoading ||\n          recentRepaymentsTableData === null ? (\n            <div className=\"sm:w-8/12 flex-none  rounded pt-6 p-8 m-auto\">\n              <div className=\"animate-pulse flex space-x-4\">\n                <div className=\"flex-1 space-y-6 py-1\">\n                  <div className=\"h-4 bg-blue-200 rounded w-3/4\"></div>\n                  <div className=\"space-y-6\">\n                    <div className=\"h-4 bg-blue-200 rounded\"></div>\n                    <div className=\"h-4 bg-blue-200 rounded\"></div>\n                    <div className=\"h-4 bg-blue-200 rounded\"></div>\n                    <div className=\"h-4 bg-blue-200 rounded\"></div>\n                    <div className=\"h-4 bg-blue-200 rounded\"></div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          ) : (\n            <table className=\"table-fixed sm:w-8/12  m-auto\">\n              <thead>\n                <tr className=\"bg-blue-200 border-0\">\n                  <th className=\"w-1/6 px-4 py-3 text-xs font-semibold text-blue-700 rounded-bl-md rounded-tl-md text-left\">\n                    S/N\n                  </th>\n                  <th className=\"w-1/4 px-4 py-3 text-xs font-semibold text-blue-700\">\n                    Amount\n                  </th>\n                  <th className=\"w-1/3 px-4 py-3 text-xs font-semibold text-blue-700 text-right\">\n                    Date\n                  </th>\n                </tr>\n              </thead>\n              <tbody>\n                {lastTenPayments?.map((d, i) => {\n                  return (\n                    <tr>\n                      <td className=\"w-1/6 border-b px-4 py-3 text-xs text-gray-600 text-left\">\n                        {i + 1}.\n                      </td>\n                      <td className=\"w-1/6 border-b px-4 py-3 text-xs text-green-700 text-center\">\n                        ₦\n                        {Number(d.amount).toLocaleString(undefined, {\n                          maximumFractionDigits: 2,\n                        })}\n                      </td>\n                      <td className=\"w-1/3 border-b px-4 py-3 text-xs text-gray-600 text-right\">\n                        {new Date(d.created_at).toLocaleDateString()}\n                      </td>\n                    </tr>\n                  );\n                })}\n              </tbody>\n            </table>\n          )}\n        </div>\n        <br />\n        <br />\n        <br />\n      </div>\n\n      {/* End of Mobile View */}\n\n      {/* Desktop view */}\n      <main className=\"hidden lg:block lg:pl-12\">\n        <br />\n        <div className=\"flex\">\n          <div className=\"w-1/3\">\n            {isTotalLoanAmountLoading ? (\n              <div className=\"w-10/12 bg-white flex-none  rounded pt-6 p-8 shadow-sm mr-5\">\n                <div className=\"flex animate-pulse items-center justify-between mb-4\">\n                  <div className=\"bg-blue-200  w-12 h-12 rounded-full\"></div>\n                  <div className=\"bg-blue-200 w-2/3 h-4 rounded-md\"></div>\n                </div>\n                <div className=\"animate-pulse bg-blue-200 w-full h-4 rounded-md\"></div>\n              </div>\n            ) : (\n              <div className=\"w-10/12 bg-white flex-none  rounded pt-6 p-8 shadow-sm mr-5\">\n                <div className=\"flex items-center justify-start mb-2\">\n                  <img src=\"img/loan-amount-icon.svg\" className=\"w-10\" alt=\"\" />\n                  <h3 className=\"font-normal text-blue-600 ml-6 text-base font-medium\">\n                    Loans Received\n                  </h3>\n                </div>\n                {Number(totalLoanAmountData?.data) > 0 ? (\n                  <>\n                    <h3 className=\"font-bold text-2xl text-gray-600\">\n                      ₦\n                      {Number(totalLoanAmountData?.data).toLocaleString(\n                        undefined,\n                        {\n                          maximumFractionDigits: 2,\n                        }\n                      )}\n                    </h3>\n                  </>\n                ) : (\n                  <h3 className=\"font-bold text-2xl text-gray-300\">₦0.00</h3>\n                )}\n              </div>\n            )}\n          </div>\n          <div className=\"w-1/3\">\n            {isTotalOutstandingBalanceLoading ? (\n              <div className=\"w-10/12 bg-white flex-none  rounded pt-6 p-8 shadow-sm mr-5\">\n                <div className=\"flex animate-pulse items-center justify-between mb-4\">\n                  <div className=\"bg-blue-200  w-12 h-12 rounded-full\"></div>\n                  <div className=\"bg-blue-200 w-2/3 h-4 rounded-md\"></div>\n                </div>\n                <div className=\"animate-pulse bg-blue-200 w-full h-4 rounded-md\"></div>\n              </div>\n            ) : (\n              <div className=\"w-10/12 bg-white border border-green-500 flex-none  rounded pt-6 p-8 shadow-sm mr-5\">\n                <div className=\"flex items-center justify-start mb-2\">\n                  <img src=\"img/repayment-icon.svg\" className=\"w-10\" alt=\"\" />\n                  <h3 className=\"font-normal text-green-600 ml-6 text-base font-medium\">\n                    Total Outstanding\n                  </h3>\n                </div>\n                {Number(totalOutstandingBalanceData?.data) > 0 ? (\n                  <>\n                    <h3 className=\"font-bold text-2xl text-gray-600\">\n                      ₦\n                      {Number(totalOutstandingBalanceData?.data).toLocaleString(\n                        undefined,\n                        {\n                          maximumFractionDigits: 2,\n                        }\n                      )}\n                    </h3>\n                  </>\n                ) : (\n                  <h3 className=\"font-bold text-2xl text-gray-300\">₦0.00</h3>\n                )}\n              </div>\n            )}\n          </div>\n          <div className=\"w-1/3\">\n            {isNextLoanDueDateLoading ? (\n              <div className=\"w-10/12 bg-white flex-none  rounded pt-6 p-8 shadow-sm mr-5\">\n                <div className=\"flex animate-pulse items-center justify-between mb-4\">\n                  <div className=\"bg-blue-200  w-12 h-12 rounded-full\"></div>\n                  <div className=\"bg-blue-200 w-2/3 h-4 rounded-md\"></div>\n                </div>\n                <div className=\"animate-pulse bg-blue-200 w-full h-4 rounded-md\"></div>\n              </div>\n            ) : (\n              <div className=\"w-10/12 bg-white flex-none  rounded pt-6 p-8 shadow-sm mr-5\">\n                <div className=\"flex items-center justify-start mb-2\">\n                  <img\n                    src=\"img/next-repayment-icon.svg\"\n                    className=\"w-10\"\n                    alt=\"\"\n                  />\n                  <h3 className=\"font-normal text-purple-500 ml-6 text-base font-medium\">\n                    Next Repayment Date\n                  </h3>\n                </div>\n                {nextLoanDueDateBalanceData?.data ? (\n                  <h3 className=\"font-bold text-2xl text-gray-600\">\n                    {\" \"}\n                    {new Date(\n                      nextLoanDueDateBalanceData?.data\n                    ).toLocaleDateString()}{\" \"}\n                  </h3>\n                ) : (\n                  <h3 className=\"font-bold text-2xl text-gray-300\">--</h3>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n        <br />\n        <br />\n        <br />\n        <div className=\"flex \">\n          <div className=\"w-8/12 \">\n            <div className=\"flex items-center\">\n              <div className=\"w-8 h-1 bg-blue-700 rounded mr-3\"></div>\n              <h4 className=\"text-gray-700 font-semibold text-xl tracking-wide\">\n                Repayment Trend\n              </h4>\n            </div>\n            <br />\n            {isRecentRepaymentsTableLoading ||\n            recentRepaymentsTableData === null ? (\n              <div className=\"w-11/12 bg-white flex-none  rounded pt-6 p-8 shadow-sm mr-5\">\n                <div className=\"animate-pulse flex space-x-4\">\n                  <div className=\"flex-1 space-y-6 py-1\">\n                    <div className=\"h-4 bg-blue-200 rounded w-3/4\"></div>\n                    <div className=\"space-y-6\">\n                      <div className=\"h-4 bg-blue-200 rounded\"></div>\n                      <div className=\"h-4 bg-blue-200 rounded\"></div>\n                      <div className=\"h-4 bg-blue-200 rounded\"></div>\n                      <div className=\"h-4 bg-blue-200 rounded\"></div>\n                      <div className=\"h-4 bg-blue-200 rounded\"></div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <div className=\"w-11/12 bg-white flex-none  rounded pt-6 p-8 shadow-lg \">\n                <RepaymentsGraph data={repaymentGraphData} />\n              </div>\n            )}\n          </div>\n          <div className=\"w-1/3\">\n            <div className=\"w-10/12 \">\n              <div className=\"flex items-center\">\n                <div className=\"w-8 h-1 bg-blue-700 rounded mr-3\"></div>\n                <h4 className=\"text-gray-700 font-semibold text-xl tracking-wide\">\n                  Recent Loans\n                </h4>\n              </div>\n              <br />\n              <div className=\"w-full bg-white flex-none  rounded pt-6 p-8 shadow-lg mb-3\">\n                {isRecentLoanAmountTableLoading ||\n                recentLoanAmountTableData === null ? (\n                  <div className=\"animate-pulse flex space-x-4\">\n                    <div className=\"flex-1 space-y-6 py-1\">\n                      <div className=\"h-4 bg-blue-200 rounded w-3/4\"></div>\n                      <div className=\"space-y-6\">\n                        <div className=\"h-4 bg-blue-200 rounded\"></div>\n                        <div className=\"h-4 bg-blue-200 rounded\"></div>\n                        <div className=\"h-4 bg-blue-200 rounded\"></div>\n                        <div className=\"h-4 bg-blue-200 rounded\"></div>\n                      </div>\n                    </div>\n                  </div>\n                ) : (\n                  <DoughnutChart data={doughnutChartData} />\n                )}\n              </div>\n              <button\n                className=\"flex w-full shadow-xl text-xl font-light text-white justify-center pt-3 pb-3 items-center bg-blue-700 hover:bg-blue-600 rounded-md transition-colors duration-150 ease-in-out\"\n                onClick={() => props.history.push(\"/loans\")}\n              >\n                <span className=\"ml-4 text-sm xl:text-lg lg:text-sm pr-2\">\n                  See loan history\n                </span>\n                <img src=\"img/chevron-right.svg\" className=\"w-5 pt-1\" alt=\"\" />\n              </button>\n            </div>\n          </div>\n        </div>\n        <br />\n      </main>\n\n      {/* End of Desktop View */}\n    </>\n  );\n}\n\nexport default withRouter(Home);\n"]},"metadata":{},"sourceType":"module"}