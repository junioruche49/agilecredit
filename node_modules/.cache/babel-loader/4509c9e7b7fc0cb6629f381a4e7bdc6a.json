{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Documents/react app/agilecreditportal/src/pages/Bvn.tsx\";\nimport React, { useState } from \"react\";\nimport { useQuery } from \"react-query\";\nimport { withRouter } from \"react-router\";\nimport OnboardingSideBar from \"../components/OnboardingSideBar\";\nimport { useForm } from \"react-hook-form\";\nimport { resolveBvn, getBvnDetailsFields, completeResolveBVN } from \"../clients/onboarding\";\nimport useAuthStore from \"../stores/authStore\";\nimport FormInput from \"../components/FormInput\";\n\nconst Bvn = props => {\n  const [loading, setLoading] = useState(false);\n  const [displayMsg, setDisplayMsg] = useState(\"\");\n  const [otpMsg, setOtpMsg] = useState(null);\n  const [userInput, setUserInput] = useState(null);\n  const [otpRequestId, setOtpRequestId] = useState(null);\n  const [otpError, setOtpError] = useState(false);\n  const token = useAuthStore(state => state.accessToken);\n  const {\n    isLoading,\n    error,\n    data\n  } = useQuery(\"data\", () => getBvnDetailsFields(token));\n  const {\n    register,\n    setValue,\n    handleSubmit,\n    errors\n  } = useForm();\n\n  if (isLoading) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 12\n      }\n    }, \"Loading...\");\n  }\n\n  const onOtpSubmit = async () => {\n    // if (otpNumber != userInput) {\n    //   setOtpError(true);\n    //   return;\n    // }\n    // console.log(\"no\");\n    try {\n      let otp = {};\n      otp[\"otp\"] = userInput;\n      let data = await completeResolveBVN(token, otp);\n      setOtpMsg(data.message);\n    } catch (error) {\n      console.log(error);\n    } // let data = await validateOTP();\n    // console.log(data);\n    // setTimeout(function () {\n    //   setOtpMsg(null);\n    //   props.history.push(\"/onboarding/personal\");\n    // }, 2000);\n\n  };\n\n  const setUsersInput = e => {\n    setUserInput(e.target.value);\n  };\n\n  const onSubmit = async datas => {\n    setLoading(true); // let data = null;\n    // console.log(\"yes\");\n    // try {\n    //   setLoading(false);\n    //   setValue(\"bvn\", \"\");\n    //   setValue(\"otp\", \"\");\n    //   let data = await getBvn();\n    //   let mobile = data.data.mobile.split(\"\");\n    //   setOtpNumber(data.data.otprequestid);\n    //   let phone = \"xxx-xxx-xxx-\" + mobile[9] + mobile[10];\n    //   let message = data.message + \" \" + phone;\n    //   setDisplayMsg(message);\n    // } catch (error) {\n    //   console.log(error);\n    // }\n\n    try {\n      let values = datas;\n      values.user_id = \"13445\";\n      let postData = await resolveBvn(token, values);\n      const {\n        message,\n        data\n      } = postData;\n      setOtpRequestId(data.otprequestid);\n      setLoading(false);\n      setDisplayMsg(message);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"hidden md:block w-5/12 mb-6 border-r-2 border-gray-200\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(OnboardingSideBar, {\n    name: \"bvn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-full md:w-7/12 mb-6 px-8 relative\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"block text-gray-700 text-lg font-bold mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, \"BVN DETAILS\"), otpMsg ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"py-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    className: \"fill-current h-6 w-6 text-teal-500 mr-4\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"font-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }\n  }, \"Sent successfully\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  }, otpMsg)))) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"text-gray-600 text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }, displayMsg ? displayMsg : \"We hate to ask, but regulations mandate us to.\\n Your BVN is safe with us!\", \" \"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"rounded pt-10\",\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-wrap -mx-3 mb-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 15\n    }\n  }, data && data.map((data, key) => {\n    return /*#__PURE__*/React.createElement(FormInput, {\n      key: key,\n      label: \"Bank Verification No. (BVN)\",\n      name: \"bvn\",\n      required: data.required,\n      errors: errors,\n      register: register,\n      type: data.type,\n      options: data.options,\n      value: null,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 23\n      }\n    });\n  }), displayMsg ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"input\", {\n    name: \"otp\",\n    onInput: setUsersInput,\n    className: \"shadow appearance-none border rounded w-full py-3 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",\n    type: \"text\",\n    placeholder: \"Enter the OTP sent to your phone...\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 21\n    }\n  }), otpError ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-red-500 text-xs italic\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 23\n    }\n  }, \"Incorrect OTP\") : \"\", /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center justify-between mb-24 mt-6 bottom-40 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: onOtpSubmit,\n    disabled: loading,\n    className: \"bg-blue-700 hover:bg-blue-800 text-white text-sm font-light py-3 px-10 rounded focus:outline-none focus:shadow-outline inline-flex items-center\",\n    type: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 25\n    }\n  }, \" Validate \"), /*#__PURE__*/React.createElement(\"svg\", {\n    className: \"ml-2\",\n    width: \"18\",\n    height: \"18\",\n    viewBox: \"0 0 18 18\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"done_24px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    id: \"icon/action/done_24px\",\n    d: \"M6.5999 11.925L3.4499 8.775L2.3999 9.825L6.5999 14.025L15.5999 5.025L14.5499 3.975L6.5999 11.925Z\",\n    fill: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 29\n    }\n  })))))) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center justify-between mb-24 mt-6 bottom-40 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    disabled: loading,\n    className: \"bg-blue-700 hover:bg-blue-800 text-white text-sm font-light py-3 px-10 rounded focus:outline-none focus:shadow-outline inline-flex items-center\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 25\n    }\n  }, \" Validate \"), /*#__PURE__*/React.createElement(\"svg\", {\n    className: \"ml-2\",\n    width: \"18\",\n    height: \"18\",\n    viewBox: \"0 0 18 18\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"done_24px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    id: \"icon/action/done_24px\",\n    d: \"M6.5999 11.925L3.4499 8.775L2.3999 9.825L6.5999 14.025L15.5999 5.025L14.5499 3.975L6.5999 11.925Z\",\n    fill: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 29\n    }\n  }))))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"absolute bottom-0 right-0 mr-16 -mt-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    disabled: true,\n    onClick: () => props.history.push(\"/onboarding/personal\"),\n    className: \"bg-gray-400 hover:bg-gray-600 text-white text-xl font-light py-3 px-10 rounded focus:outline-none focus:shadow-outline inline-flex items-center\",\n    type: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 13\n    }\n  }, \" Next \"), /*#__PURE__*/React.createElement(\"svg\", {\n    className: \"ml-2 -mt-1\",\n    width: \"18\",\n    height: \"18\",\n    viewBox: \"0 0 18 18\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"chevron_right_24px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    id: \"icon/navigation/chevron_right_24px\",\n    d: \"M9.70492 6L8.29492 7.41L12.8749 12L8.29492 16.59L9.70492 18L15.7049 12L9.70492 6Z\",\n    fill: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 17\n    }\n  })))))));\n};\n\nexport default withRouter(Bvn);","map":{"version":3,"sources":["/Users/mac/Documents/react app/agilecreditportal/src/pages/Bvn.tsx"],"names":["React","useState","useQuery","withRouter","OnboardingSideBar","useForm","resolveBvn","getBvnDetailsFields","completeResolveBVN","useAuthStore","FormInput","Bvn","props","loading","setLoading","displayMsg","setDisplayMsg","otpMsg","setOtpMsg","userInput","setUserInput","otpRequestId","setOtpRequestId","otpError","setOtpError","token","state","accessToken","isLoading","error","data","register","setValue","handleSubmit","errors","onOtpSubmit","otp","message","console","log","setUsersInput","e","target","value","onSubmit","datas","values","user_id","postData","otprequestid","map","key","required","type","options","history","push"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { useQuery } from \"react-query\";\nimport { withRouter } from \"react-router\";\nimport OnboardingSideBar from \"../components/OnboardingSideBar\";\nimport { useForm } from \"react-hook-form\";\n\nimport { getBvn, validateOTP } from \"../clients/bvn\";\nimport {\n  resolveBvn,\n  getBvnDetailsFields,\n  completeResolveBVN,\n} from \"../clients/onboarding\";\nimport useAuthStore from \"../stores/authStore\";\nimport FormInput from \"../components/FormInput\";\n\nconst Bvn = (props: any) => {\n  const [loading, setLoading] = useState(false);\n  const [displayMsg, setDisplayMsg] = useState(\"\");\n  const [otpMsg, setOtpMsg] = useState(null);\n  const [userInput, setUserInput] = useState(null);\n  const [otpRequestId, setOtpRequestId] = useState(null);\n  const [otpError, setOtpError] = useState(false);\n  const token = useAuthStore((state) => state.accessToken);\n\n  const { isLoading, error, data } = useQuery(\"data\", () =>\n    getBvnDetailsFields(token)\n  );\n\n  const { register, setValue, handleSubmit, errors } = useForm();\n\n  if (isLoading) {\n    return <div>Loading...</div>;\n  }\n\n  const onOtpSubmit = async () => {\n    // if (otpNumber != userInput) {\n    //   setOtpError(true);\n    //   return;\n    // }\n\n    // console.log(\"no\");\n    try {\n      let otp = {};\n      otp[\"otp\"] = userInput;\n      let data = await completeResolveBVN(token, otp);\n      setOtpMsg(data.message);\n    } catch (error) {\n      console.log(error);\n    }\n    // let data = await validateOTP();\n    // console.log(data);\n    // setTimeout(function () {\n    //   setOtpMsg(null);\n    //   props.history.push(\"/onboarding/personal\");\n    // }, 2000);\n  };\n\n  const setUsersInput = (e: any) => {\n    setUserInput(e.target.value);\n  };\n\n  const onSubmit = async (datas: any) => {\n    setLoading(true);\n    // let data = null;\n    // console.log(\"yes\");\n    // try {\n    //   setLoading(false);\n    //   setValue(\"bvn\", \"\");\n    //   setValue(\"otp\", \"\");\n\n    //   let data = await getBvn();\n    //   let mobile = data.data.mobile.split(\"\");\n    //   setOtpNumber(data.data.otprequestid);\n    //   let phone = \"xxx-xxx-xxx-\" + mobile[9] + mobile[10];\n    //   let message = data.message + \" \" + phone;\n\n    //   setDisplayMsg(message);\n    // } catch (error) {\n    //   console.log(error);\n    // }\n    try {\n      let values = datas;\n      values.user_id = \"13445\";\n      let postData = await resolveBvn(token, values);\n      const { message, data } = postData;\n      setOtpRequestId(data.otprequestid);\n      setLoading(false);\n      setDisplayMsg(message);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return (\n    <>\n      <div className=\"hidden md:block w-5/12 mb-6 border-r-2 border-gray-200\">\n        <OnboardingSideBar name=\"bvn\" />\n      </div>\n\n      <div className=\"w-full md:w-7/12 mb-6 px-8 relative\">\n        <h1 className=\"block text-gray-700 text-lg font-bold mb-2\">\n          BVN DETAILS\n        </h1>\n        {otpMsg ? (\n          <div\n            className=\"bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md\"\n            role=\"alert\"\n          >\n            <div className=\"flex\">\n              <div className=\"py-1\">\n                <svg\n                  className=\"fill-current h-6 w-6 text-teal-500 mr-4\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 20 20\"\n                >\n                  <path d=\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\" />\n                </svg>\n              </div>\n              <div>\n                <p className=\"font-bold\">Sent successfully</p>\n                <p className=\"text-sm\">{otpMsg}</p>\n              </div>\n            </div>\n          </div>\n        ) : (\n          <>\n            <h3 className=\"text-gray-600 text-sm\">\n              {displayMsg\n                ? displayMsg\n                : \"We hate to ask, but regulations mandate us to.\\n Your BVN is safe with us!\"}{\" \"}\n            </h3>\n            <form className=\"rounded pt-10\" onSubmit={handleSubmit(onSubmit)}>\n              <div className=\"flex flex-wrap -mx-3 mb-6\">\n                {data &&\n                  data.map((data, key) => {\n                    return (\n                      <FormInput\n                        key={key}\n                        label=\"Bank Verification No. (BVN)\"\n                        name=\"bvn\"\n                        required={data.required}\n                        errors={errors}\n                        register={register}\n                        type={data.type}\n                        options={data.options}\n                        value={null}\n                      />\n                    );\n                  })}\n\n                {displayMsg ? (\n                  <>\n                    <input\n                      name=\"otp\"\n                      onInput={setUsersInput}\n                      className=\"shadow appearance-none border rounded w-full py-3 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                      type=\"text\"\n                      placeholder=\"Enter the OTP sent to your phone...\"\n                    />\n                    {otpError ? (\n                      <p className=\"text-red-500 text-xs italic\">\n                        Incorrect OTP\n                      </p>\n                    ) : (\n                      \"\"\n                    )}\n                    <div className=\"flex items-center justify-between mb-24 mt-6 bottom-40 \">\n                      <button\n                        onClick={onOtpSubmit}\n                        disabled={loading}\n                        className=\"bg-blue-700 hover:bg-blue-800 text-white text-sm font-light py-3 px-10 rounded focus:outline-none focus:shadow-outline inline-flex items-center\"\n                        type=\"button\"\n                      >\n                        <span> Validate </span>\n                        <svg\n                          className=\"ml-2\"\n                          width=\"18\"\n                          height=\"18\"\n                          viewBox=\"0 0 18 18\"\n                          fill=\"none\"\n                          xmlns=\"http://www.w3.org/2000/svg\"\n                        >\n                          <g id=\"done_24px\">\n                            <path\n                              id=\"icon/action/done_24px\"\n                              d=\"M6.5999 11.925L3.4499 8.775L2.3999 9.825L6.5999 14.025L15.5999 5.025L14.5499 3.975L6.5999 11.925Z\"\n                              fill=\"white\"\n                            />\n                          </g>\n                        </svg>\n                      </button>\n                    </div>\n                  </>\n                ) : (\n                  <>\n                    <div className=\"flex items-center justify-between mb-24 mt-6 bottom-40 \">\n                      <button\n                        disabled={loading}\n                        className=\"bg-blue-700 hover:bg-blue-800 text-white text-sm font-light py-3 px-10 rounded focus:outline-none focus:shadow-outline inline-flex items-center\"\n                        type=\"submit\"\n                      >\n                        <span> Validate </span>\n                        <svg\n                          className=\"ml-2\"\n                          width=\"18\"\n                          height=\"18\"\n                          viewBox=\"0 0 18 18\"\n                          fill=\"none\"\n                          xmlns=\"http://www.w3.org/2000/svg\"\n                        >\n                          <g id=\"done_24px\">\n                            <path\n                              id=\"icon/action/done_24px\"\n                              d=\"M6.5999 11.925L3.4499 8.775L2.3999 9.825L6.5999 14.025L15.5999 5.025L14.5499 3.975L6.5999 11.925Z\"\n                              fill=\"white\"\n                            />\n                          </g>\n                        </svg>\n                      </button>\n                    </div>\n                  </>\n                )}\n\n                {/* {displayMsg ? (\n                  <>\n                    <input\n                      name=\"otp\"\n                      onInput={setUsersInput}\n                      className=\"shadow appearance-none border rounded w-full py-3 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                      type=\"text\"\n                      placeholder=\"Enter the OTP sent to your phone...\"\n                    />\n                    {otpError ? (\n                      <p className=\"text-red-500 text-xs italic\">\n                        Incorrect OTP\n                      </p>\n                    ) : (\n                      \"\"\n                    )}\n                    <div className=\"flex items-center justify-between mb-24 mt-6 bottom-40 \">\n                      <button\n                        onClick={onOtpSubmit}\n                        disabled={loading}\n                        className=\"bg-blue-700 hover:bg-blue-800 text-white text-sm font-light py-3 px-10 rounded focus:outline-none focus:shadow-outline inline-flex items-center\"\n                        type=\"button\"\n                      >\n                        <span> Validate </span>\n                        <svg\n                          className=\"ml-2\"\n                          width=\"18\"\n                          height=\"18\"\n                          viewBox=\"0 0 18 18\"\n                          fill=\"none\"\n                          xmlns=\"http://www.w3.org/2000/svg\"\n                        >\n                          <g id=\"done_24px\">\n                            <path\n                              id=\"icon/action/done_24px\"\n                              d=\"M6.5999 11.925L3.4499 8.775L2.3999 9.825L6.5999 14.025L15.5999 5.025L14.5499 3.975L6.5999 11.925Z\"\n                              fill=\"white\"\n                            />\n                          </g>\n                        </svg>\n                      </button>\n                    </div>\n                  </>\n                ) : (\n                  <>\n                    <input\n                      name=\"bvn\"\n                      ref={register({ required: true, minLength: 11 })}\n                      className=\"shadow appearance-none border rounded w-full py-3 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                      type=\"number\"\n                      placeholder=\"Enter your 11-digit BVN...\"\n                    />\n                    {errors.bvn && errors.bvn.type === \"required\" && (\n                      <p className=\"text-red-500 text-xs italic\">\n                        Please fill out this field.\n                      </p>\n                    )}\n                    {errors.bvn && errors.bvn.type === \"minLength\" && (\n                      <p className=\"text-red-500 text-xs italic\">\n                        Minimum BVN length is 11.\n                      </p>\n                    )}\n\n                    <div className=\"flex items-center justify-between mb-24 mt-6 bottom-40 \">\n                      <button\n                        disabled={loading}\n                        className=\"bg-blue-700 hover:bg-blue-800 text-white text-sm font-light py-3 px-10 rounded focus:outline-none focus:shadow-outline inline-flex items-center\"\n                        type=\"submit\"\n                      >\n                        <span> Validate </span>\n                        <svg\n                          className=\"ml-2\"\n                          width=\"18\"\n                          height=\"18\"\n                          viewBox=\"0 0 18 18\"\n                          fill=\"none\"\n                          xmlns=\"http://www.w3.org/2000/svg\"\n                        >\n                          <g id=\"done_24px\">\n                            <path\n                              id=\"icon/action/done_24px\"\n                              d=\"M6.5999 11.925L3.4499 8.775L2.3999 9.825L6.5999 14.025L15.5999 5.025L14.5499 3.975L6.5999 11.925Z\"\n                              fill=\"white\"\n                            />\n                          </g>\n                        </svg>\n                      </button>\n                    </div>\n                  </>\n                )} */}\n              </div>\n            </form>\n          </>\n        )}\n        <div className=\"absolute bottom-0 right-0 mr-16 -mt-8\">\n          <button\n            disabled\n            onClick={() => props.history.push(\"/onboarding/personal\")}\n            className=\"bg-gray-400 hover:bg-gray-600 text-white text-xl font-light py-3 px-10 rounded focus:outline-none focus:shadow-outline inline-flex items-center\"\n            type=\"button\"\n          >\n            <span> Next </span>\n            <svg\n              className=\"ml-2 -mt-1\"\n              width=\"18\"\n              height=\"18\"\n              viewBox=\"0 0 18 18\"\n              fill=\"none\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <g id=\"chevron_right_24px\">\n                <path\n                  id=\"icon/navigation/chevron_right_24px\"\n                  d=\"M9.70492 6L8.29492 7.41L12.8749 12L8.29492 16.59L9.70492 18L15.7049 12L9.70492 6Z\"\n                  fill=\"white\"\n                />\n              </g>\n            </svg>\n          </button>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default withRouter(Bvn);\n"]},"metadata":{},"sourceType":"module"}