{"ast":null,"code":"import _slicedToArray from\"/Users/mac/Documents/react app/agilecreditportal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{withRouter}from\"react-router-dom\";import{useQuery}from\"react-query\";import{getLoan}from\"../clients/loan\";import useAuthStore from\"../stores/authStore\";var PaymentSuccess=function PaymentSuccess(props){var referrerData=props.location.referrerData;if(referrerData===null||referrerData===\"\"||referrerData===undefined){props.history.push(\"/pay\");}var token=useAuthStore(function(state){return state.accessToken;});var _useState=useState([]),_useState2=_slicedToArray(_useState,2),errorMsg=_useState2[0],setErrorMsg=_useState2[1];var _useQuery=useQuery(\"loanDetail\",function(){return getLoan(token,referrerData.loan_id);}),isloanDetailsLoading=_useQuery.isLoading,loanDetailsError=_useQuery.error,loanDetails=_useQuery.data;if(loanDetailsError){var msg=[];msg.push(\"Could not load the details of the loan attached to this payment. Please check with your loan officer to ensure payment accuracy.\");setErrorMsg(msg);}if(isloanDetailsLoading){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"w-11/12 bg-white rounded py-12 shadow-lg m-auto px-8 relative mt-10\"},/*#__PURE__*/React.createElement(\"img\",{src:\"/img/loading-gif.gif\",alt:\"\",className:\"w-1/8 m-auto py-10\"}),/*#__PURE__*/React.createElement(\"h6\",{className:\"m-auto text-lg text-gray-700 text-center\"},\"Please wait...\")));}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"main\",{className:\"md:pl-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex \"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-full \"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex items-center mt-10 lg:mt-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-8 h-1 bg-blue-700 rounded mr-0 hidden md:block\"}),/*#__PURE__*/React.createElement(\"h4\",{className:\"bg-blue-700 md:bg-transparent text-white md:text-gray-700 font-normal md:font-semibold text-md md:text-xl tracking-wide uppercase md:normal-case py-2 px-6 rounded-r-lg\"},\"Make Payment\")),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"relative w-11/12 bg-white rounded py-12 shadow-lg border-b-4 border-blue-700 md:border-none mb-20 m-auto md:m-0 mt-12 md:mt-0\"},errorMsg.length?/*#__PURE__*/React.createElement(\"div\",{className:\"w-9/12 m-auto bg-red-100 border-t-4 border-red-500 rounded-b text-red-900 px-4 py-3 shadow-md my-5\",role:\"alert\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"py-1\"},/*#__PURE__*/React.createElement(\"svg\",{className:\"fill-current h-6 w-6 text-red-500 mr-4\",xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 20 20\"},/*#__PURE__*/React.createElement(\"path\",{d:\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\"}))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"ul\",{style:{listStyleType:\"none\"}},errorMsg.map(function(error,i){return/*#__PURE__*/React.createElement(\"li\",{key:i},error);}))))):\"\",/*#__PURE__*/React.createElement(\"div\",{className:\"w-full m-auto mb-6 animate-pulse\"},/*#__PURE__*/React.createElement(\"img\",{src:\"/img/payment-success.png\",alt:\"\",className:\"w-3/4 md:w-2/4 m-auto\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"w-3/4 m-auto\"},/*#__PURE__*/React.createElement(\"p\",{className:\"text-gray-700 font-medium text-center\"},/*#__PURE__*/React.createElement(\"span\",{className:\"text-green-700 text-xl md:text-2xl\"},\"Awesome!\"),\" \",/*#__PURE__*/React.createElement(\"br\",null),\"We have been able to successfully process your repayment of\",\" \",/*#__PURE__*/React.createElement(\"span\",{className:\"text-green-700\"},referrerData&&referrerData.amount?\"₦\"+Number(referrerData.amount)/100:null),\" \",\"for loan:\",\" \",loanDetails&&loanDetails.loan_id?loanDetails.loan_id:null,\".\")),/*#__PURE__*/React.createElement(\"div\",{className:\"w-full m-auto mt-10\"},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return props.history.replace(\"/\");},className:\"flex w-2/4 md:w-1/4 shadow-xl text-xl font-light text-white justify-center py-4 md:py-3 items-center bg-green-600 hover:bg-green-700 rounded-md m-auto transition-colors duration-150 ease-in-out\"},/*#__PURE__*/React.createElement(\"span\",{className:\"text-sm xl:text-lg lg:text-sm pr-2\"},\"Go to dashboard\"),/*#__PURE__*/React.createElement(\"img\",{src:\"/img/chevron-right.svg\",className:\"w-5 pt-1\",alt:\"\"})))))),/*#__PURE__*/React.createElement(\"br\",null)));};export default withRouter(PaymentSuccess);","map":{"version":3,"sources":["/Users/mac/Documents/react app/agilecreditportal/src/pages/PaymentSuccess.tsx"],"names":["React","useState","withRouter","useQuery","getLoan","useAuthStore","PaymentSuccess","props","referrerData","location","undefined","history","push","token","state","accessToken","errorMsg","setErrorMsg","loan_id","isloanDetailsLoading","isLoading","loanDetailsError","error","loanDetails","data","msg","length","listStyleType","map","i","amount","Number","replace"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { useQuery } from \"react-query\";\nimport { getLoan } from \"../clients/loan\";\nimport useAuthStore from \"../stores/authStore\";\n\nconst PaymentSuccess = (props: any) => {\n  let referrerData = props.location.referrerData;\n  if (\n    referrerData === null ||\n    referrerData === \"\" ||\n    referrerData === undefined\n  ) {\n    props.history.push(\"/pay\");\n  }\n\n  const token = useAuthStore((state) => state.accessToken);\n  const [errorMsg, setErrorMsg] = useState([]);\n\n  const {\n    isLoading: isloanDetailsLoading,\n    error: loanDetailsError,\n    data: loanDetails,\n  } = useQuery(\"loanDetail\", () => getLoan(token, referrerData.loan_id));\n\n  if (loanDetailsError) {\n    let msg = [] as any;\n    msg.push(\n      \"Could not load the details of the loan attached to this payment. Please check with your loan officer to ensure payment accuracy.\"\n    );\n    setErrorMsg(msg);\n  }\n\n  if (isloanDetailsLoading) {\n    return (\n      <>\n        <div className=\"w-11/12 bg-white rounded py-12 shadow-lg m-auto px-8 relative mt-10\">\n          <img\n            src=\"/img/loading-gif.gif\"\n            alt=\"\"\n            className=\"w-1/8 m-auto py-10\"\n          />\n          <h6 className=\"m-auto text-lg text-gray-700 text-center\">\n            Please wait...\n          </h6>\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <>\n      <main className=\"md:pl-12\">\n        <div className=\"flex \">\n          <div className=\"w-full \">\n            <div className=\"flex items-center mt-10 lg:mt-0\">\n              <div className=\"w-8 h-1 bg-blue-700 rounded mr-0 hidden md:block\"></div>\n              <h4 className=\"bg-blue-700 md:bg-transparent text-white md:text-gray-700 font-normal md:font-semibold text-md md:text-xl tracking-wide uppercase md:normal-case py-2 px-6 rounded-r-lg\">\n                Make Payment\n              </h4>\n            </div>\n            <br />\n\n            <div className=\"relative w-11/12 bg-white rounded py-12 shadow-lg border-b-4 border-blue-700 md:border-none mb-20 m-auto md:m-0 mt-12 md:mt-0\">\n              {errorMsg.length ? (\n                <div\n                  className=\"w-9/12 m-auto bg-red-100 border-t-4 border-red-500 rounded-b text-red-900 px-4 py-3 shadow-md my-5\"\n                  role=\"alert\"\n                >\n                  <div className=\"flex\">\n                    <div className=\"py-1\">\n                      <svg\n                        className=\"fill-current h-6 w-6 text-red-500 mr-4\"\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        viewBox=\"0 0 20 20\"\n                      >\n                        <path d=\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\" />\n                      </svg>\n                    </div>\n                    <div>\n                      <ul style={{ listStyleType: \"none\" }}>\n                        {errorMsg.map((error, i) => (\n                          <li key={i}>{error}</li>\n                        ))}\n                      </ul>\n                    </div>\n                  </div>\n                </div>\n              ) : (\n                \"\"\n              )}\n              <div className=\"w-full m-auto mb-6 animate-pulse\">\n                <img\n                  src=\"/img/payment-success.png\"\n                  alt=\"\"\n                  className=\"w-3/4 md:w-2/4 m-auto\"\n                />\n              </div>\n              <div className=\"w-3/4 m-auto\">\n                <p className=\"text-gray-700 font-medium text-center\">\n                  <span className=\"text-green-700 text-xl md:text-2xl\">\n                    Awesome!\n                  </span>{\" \"}\n                  <br />\n                  We have been able to successfully process your repayment of{\" \"}\n                  <span className=\"text-green-700\">\n                    {referrerData && referrerData.amount\n                      ? \"₦\" + Number(referrerData.amount) / 100\n                      : null}\n                  </span>{\" \"}\n                  for loan:{\" \"}\n                  {loanDetails && loanDetails.loan_id\n                    ? loanDetails.loan_id\n                    : null}\n                  .\n                </p>\n              </div>\n              <div className=\"w-full m-auto mt-10\">\n                <button\n                  onClick={() => props.history.replace(\"/\")}\n                  className=\"flex w-2/4 md:w-1/4 shadow-xl text-xl font-light text-white justify-center py-4 md:py-3 items-center bg-green-600 hover:bg-green-700 rounded-md m-auto transition-colors duration-150 ease-in-out\"\n                >\n                  <span className=\"text-sm xl:text-lg lg:text-sm pr-2\">\n                    Go to dashboard\n                  </span>\n                  <img\n                    src=\"/img/chevron-right.svg\"\n                    className=\"w-5 pt-1\"\n                    alt=\"\"\n                  />\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n        <br />\n      </main>\n    </>\n  );\n};\n\nexport default withRouter(PaymentSuccess);\n"]},"metadata":{},"sourceType":"module"}