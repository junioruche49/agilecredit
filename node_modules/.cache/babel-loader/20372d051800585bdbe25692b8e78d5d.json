{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Documents/react app/agilecreditportal/src/pages/NextofKin.tsx\";\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport OnboardingSideBar from \"../components/OnboardingSideBar\";\nimport { useForm } from \"react-hook-form\";\nimport { useQuery } from \"react-query\";\nimport useProfileStore from \"../stores/profileStore\";\nimport useAuthStore from \"../stores/authStore\";\nimport { getNextofKinFields, patchRequest, getProfileSection } from \"../clients/onboarding\";\nimport FormInput from \"../components/FormInput\";\nimport { getPersonalDetails } from \"../clients/profile\";\n\nconst NextofKin = props => {\n  let pageType = \"profile\";\n\n  if (props.location.pathname.includes(\"/onboarding\")) {\n    pageType = \"onboarding\";\n  }\n\n  const [loading, setLoading] = useState(false);\n  const profile = useProfileStore(state => state.data);\n  const [errorMsg, setErrorMsg] = useState([]);\n  const token = useAuthStore(state => state.accessToken);\n  const [readonlyValue, setReadonlyValue] = useState(false);\n  const {\n    isLoading,\n    error,\n    data\n  } = useQuery(\"nextofkin\", () => getNextofKinFields(token));\n  const {\n    isLoading: isLoading2,\n    error: error2,\n    data: data2,\n    refetch: refetch2\n  } = useQuery(\"sections\", () => getProfileSection(token));\n  const {\n    register,\n    handleSubmit,\n    errors,\n    reset,\n    control\n  } = useForm();\n  const [submitted, setSubmitted] = useState(false);\n  const [childFieldOptions, setChildFieldOptions] = useState([]);\n\n  const getUpdatedProfile = async () => {\n    let getProfile = await getPersonalDetails(token);\n    initializeProfileStore(getProfile.data);\n  };\n\n  useEffect(() => {\n    getUpdatedProfile();\n  }, []);\n  const initializeProfileStore = useProfileStore(useCallback(state => state.initialize, []));\n  const initializeProfileSection = useProfileStore(useCallback(state => state.initializeProfileSection, []));\n  useEffect(() => {\n    data2 && initializeProfileSection([].concat(data2).reverse(), data2.every(loan => loan.completed === true));\n  }, [data2, initializeProfileSection]);\n  useEffect(() => {\n    const result = profile; // result: { firstName: 'test', lastName: 'test2' }\n\n    reset(result); // asynchronously reset your form values\n  }, [reset]);\n\n  function getChildFieldOptions(field, value) {\n    control.setValue(field, value);\n    let childFields = data.filter(f => f.filtered_by && f.filtered_by == field);\n    if (!childFields) return;\n    childFields.forEach(c => {\n      control.setValue(c.name, null);\n    });\n    let fieldSet = childFields.map(c => {\n      return { ...c,\n        ...{\n          options: c.options.filter(opt => {\n            return opt[c.filter_field] == value;\n          })\n        }\n      };\n    });\n    setChildFieldOptions(fieldSet);\n  }\n\n  if (isLoading || isLoading2) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-full m-auto px-8 relative\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"/img/loading-gif.gif\",\n      alt: \"\",\n      className: \"w-1/8 m-auto py-20\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }\n    })));\n  }\n\n  const updateErrors = errors => {\n    setErrorMsg(Object.values(errors).flat());\n  };\n\n  const toggleInput = () => {\n    setReadonlyValue(prev => !prev);\n  };\n\n  const onSubmit = async values => {\n    let value = {};\n    data.map(val => {\n      value[val.name] = values[val.name];\n    });\n    setLoading(true);\n\n    try {\n      let postData = await patchRequest(token, value);\n      setSubmitted(true);\n      const {\n        data\n      } = postData;\n      initializeProfileStore(data);\n      setErrorMsg([]);\n      setTimeout(function () {\n        setSubmitted(false);\n        setLoading(false);\n        refetch2();\n        pageType === \"onboarding\" ? props.history.push(\"/onboarding/contact\") : props.history.replace(\"/profile/next_of_kin\");\n      }, 2000);\n    } catch (error) {\n      setLoading(false);\n\n      if (error && error.response.status == 500) {\n        let msg = [];\n        msg.push(error.response.data.message);\n        setErrorMsg(msg);\n        return;\n      }\n\n      if (!error.response) {\n        let msg = [];\n        msg.push(\"Network Error, Check Your Internet Connection\");\n        setErrorMsg(msg);\n        return;\n      }\n\n      const {\n        response: {\n          data\n        }\n      } = error;\n      data.errors && updateErrors(data.errors);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"hidden md:block w-5/12 mb-6 border-r-2 border-gray-200\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(OnboardingSideBar, {\n    name: \"next_of_kin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    src: \"/img/checklists.svg\",\n    alt: \"\",\n    className: \"w-1/4 m-auto pt-16\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"md:w-7/12 w-full mb-6 px-8 relative\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"block text-gray-700 text-lg font-bold mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 9\n    }\n  }, \"Next of Kin\"), errorMsg.length ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-red-100 border-t-4 border-red-500 rounded-b text-red-900 px-4 py-3 shadow-md my-5\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"py-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    className: \"fill-current h-6 w-6 text-red-500 mr-4\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    style: {\n      listStyleType: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 17\n    }\n  }, errorMsg.map((error, i) => /*#__PURE__*/React.createElement(\"li\", {\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 21\n    }\n  }, error)))))) : \"\", submitted ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fade-in\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"py-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    className: \"fill-current h-6 w-6 text-teal-500 mr-4\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"font-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 19\n    }\n  }, \"Sent successfully\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 19\n    }\n  }, \"Next of Kin created successfully\"))))) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"w-full max-w-lg\",\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-wrap -mx-3 mb-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 15\n    }\n  }, data && data.map((data, key) => {\n    var _data$filtered_by;\n\n    return /*#__PURE__*/React.createElement(FormInput, {\n      key: key,\n      label: data.label,\n      name: data.name,\n      required: data.required,\n      errors: errors,\n      register: register,\n      type: data.type,\n      options: data.options,\n      value: profile[data.name],\n      Controller: true,\n      control: true,\n      readonly: data.readonly,\n      readonlyValue: readonlyValue,\n      toggleInput: toggleInput,\n      filteredBy: (_data$filtered_by = data.filtered_by) !== null && _data$filtered_by !== void 0 ? _data$filtered_by : null,\n      getChildFieldOptions: getChildFieldOptions,\n      filteredOptions: childFieldOptions.find(c => c.name === data.name),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 23\n      }\n    });\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center justify-between mb-16\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"bg-blue-700 hover:bg-blue-800 text-white text-lg md:text-xl font-light py-3 px-10 rounded-lg focus:outline-none focus:shadow-outline inline-flex items-center shadow-lg\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 19\n    }\n  }, \" Save \"), !loading ? /*#__PURE__*/React.createElement(\"svg\", {\n    className: \"ml-2\",\n    width: \"13\",\n    height: \"13\",\n    viewBox: \"0 0 18 18\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"done_24px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    id: \"icon/action/done_24px\",\n    d: \"M6.5999 11.925L3.4499 8.775L2.3999 9.825L6.5999 14.025L15.5999 5.025L14.5499 3.975L6.5999 11.925Z\",\n    fill: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 25\n    }\n  }))) : /*#__PURE__*/React.createElement(\"img\", {\n    src: \"/img/25.gif\",\n    className: \"ml-2\",\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 21\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex justify-end w-full pr-0 md:pr-4 mt-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"md:inline-flex justify-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => pageType === \"onboarding\" ? props.history.push(\"/onboarding/personal\") : props.history.push(\"/profile/personal\"),\n    className: \"bg-gray-500 hover:bg-gray-600 text-white text-md md:text-xl font-light py-2 px-6 md:py-3 md:px-8 rounded-l focus:outline-none focus:shadow-outline inline-flex items-center\",\n    type: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    className: \"mr-2 -mt-1\",\n    width: \"18\",\n    height: \"18\",\n    viewBox: \"0 0 18 18\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"chevron_right_24px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    id: \"icon/navigation/chevron_left_24px\",\n    d: \"M15.705 16.59L11.125 12L15.705 7.41L14.295 6L8.29498 12L14.295 18L15.705 16.59Z\",\n    fill: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 15\n    }\n  }, \" Previous \")), /*#__PURE__*/React.createElement(\"button\", {\n    // disabled={!submitted}\n    onClick: () => pageType === \"onboarding\" ? props.history.push(\"/onboarding/contact\") : props.history.push(\"/profile/contact\"),\n    className: \"bg-green-600 hover:bg-green-700 text-white text-md md:text-xl font-light py-2 px-6 md:py-3 md:px-8 rounded-r focus:outline-none focus:shadow-outline inline-flex items-center\",\n    type: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 15\n    }\n  }, \" Next \"), /*#__PURE__*/React.createElement(\"svg\", {\n    className: \"ml-2 -mt-1\",\n    width: \"18\",\n    height: \"18\",\n    viewBox: \"0 0 18 18\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"chevron_right_24px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    id: \"icon/navigation/chevron_right_24px\",\n    d: \"M9.70492 6L8.29492 7.41L12.8749 12L8.29492 16.59L9.70492 18L15.7049 12L9.70492 6Z\",\n    fill: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 19\n    }\n  }))))))));\n};\n\nexport default NextofKin;","map":{"version":3,"sources":["/Users/mac/Documents/react app/agilecreditportal/src/pages/NextofKin.tsx"],"names":["React","useState","useEffect","useCallback","OnboardingSideBar","useForm","useQuery","useProfileStore","useAuthStore","getNextofKinFields","patchRequest","getProfileSection","FormInput","getPersonalDetails","NextofKin","props","pageType","location","pathname","includes","loading","setLoading","profile","state","data","errorMsg","setErrorMsg","token","accessToken","readonlyValue","setReadonlyValue","isLoading","error","isLoading2","error2","data2","refetch","refetch2","register","handleSubmit","errors","reset","control","submitted","setSubmitted","childFieldOptions","setChildFieldOptions","getUpdatedProfile","getProfile","initializeProfileStore","initialize","initializeProfileSection","concat","reverse","every","loan","completed","result","getChildFieldOptions","field","value","setValue","childFields","filter","f","filtered_by","forEach","c","name","fieldSet","map","options","opt","filter_field","updateErrors","Object","values","flat","toggleInput","prev","onSubmit","val","postData","setTimeout","history","push","replace","response","status","msg","message","length","listStyleType","i","key","label","required","type","readonly","find"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\nimport OnboardingSideBar from \"../components/OnboardingSideBar\";\nimport { useForm, Controller } from \"react-hook-form\";\n\nimport { useQuery } from \"react-query\";\n\nimport useProfileStore from \"../stores/profileStore\";\nimport useAuthStore from \"../stores/authStore\";\nimport {\n  getNextofKinFields,\n  patchRequest,\n  getProfileSection,\n} from \"../clients/onboarding\";\nimport FormInput from \"../components/FormInput\";\nimport { type } from \"os\";\nimport { getPersonalDetails } from \"../clients/profile\";\n\nconst NextofKin = (props: any) => {\n  let pageType = \"profile\";\n\n  if (props.location.pathname.includes(\"/onboarding\")) {\n    pageType = \"onboarding\";\n  }\n\n  const [loading, setLoading] = useState(false);\n  const profile = useProfileStore((state) => state.data);\n  const [errorMsg, setErrorMsg] = useState([]);\n  const token = useAuthStore((state) => state.accessToken);\n  const [readonlyValue, setReadonlyValue] = useState(false);\n  const { isLoading, error, data } = useQuery(\"nextofkin\", () =>\n    getNextofKinFields(token)\n  );\n  const {\n    isLoading: isLoading2,\n    error: error2,\n    data: data2,\n    refetch: refetch2,\n  } = useQuery(\"sections\", () => getProfileSection(token));\n\n  const { register, handleSubmit, errors, reset, control } = useForm();\n  const [submitted, setSubmitted] = useState(false);\n\n  const [childFieldOptions, setChildFieldOptions] = useState<any[]>([]);\n\n  const getUpdatedProfile = async () => {\n    let getProfile = await getPersonalDetails(token);\n    initializeProfileStore(getProfile.data);\n  };\n\n  useEffect(() => {\n    getUpdatedProfile();\n  }, []);\n\n  const initializeProfileStore = useProfileStore(\n    useCallback((state) => state.initialize, [])\n  );\n\n  const initializeProfileSection = useProfileStore(\n    useCallback((state) => state.initializeProfileSection, [])\n  );\n\n  useEffect(() => {\n    data2 &&\n      initializeProfileSection(\n        [].concat(data2).reverse(),\n        data2.every((loan) => loan.completed === true)\n      );\n  }, [data2, initializeProfileSection]);\n\n  useEffect(() => {\n    const result = profile; // result: { firstName: 'test', lastName: 'test2' }\n    reset(result); // asynchronously reset your form values\n  }, [reset]);\n\n  function getChildFieldOptions(field, value) {\n    control.setValue(field, value);\n\n    let childFields = data.filter(\n      (f) => f.filtered_by && f.filtered_by == field\n    );\n\n    if (!childFields) return;\n\n    childFields.forEach((c) => {\n      control.setValue(c.name, null);\n    });\n\n    let fieldSet = childFields.map((c) => {\n      return {\n        ...c,\n        ...{\n          options: c.options.filter((opt) => {\n            return opt[c.filter_field] == value;\n          }),\n        },\n      };\n    });\n\n    setChildFieldOptions(fieldSet);\n  }\n\n  if (isLoading || isLoading2) {\n    return (\n      <>\n        <div className=\"w-full m-auto px-8 relative\">\n          <img\n            src=\"/img/loading-gif.gif\"\n            alt=\"\"\n            className=\"w-1/8 m-auto py-20\"\n          />\n        </div>\n      </>\n    );\n  }\n\n  const updateErrors = (errors: []) => {\n    setErrorMsg(Object.values(errors).flat());\n  };\n  const toggleInput = () => {\n    setReadonlyValue((prev) => !prev);\n  };\n\n  const onSubmit = async (values: any) => {\n    let value = {};\n    data.map((val) => {\n      value[val.name] = values[val.name];\n    });\n    setLoading(true);\n    try {\n      let postData = await patchRequest(token, value);\n      setSubmitted(true);\n      const { data } = postData;\n      initializeProfileStore(data);\n      setErrorMsg([]);\n      setTimeout(function () {\n        setSubmitted(false);\n        setLoading(false);\n        refetch2();\n        pageType === \"onboarding\"\n          ? props.history.push(\"/onboarding/contact\")\n          : props.history.replace(\"/profile/next_of_kin\");\n      }, 2000);\n    } catch (error) {\n      setLoading(false);\n      if (error && error.response.status == 500) {\n        let msg = [] as any;\n        msg.push(error.response.data.message);\n        setErrorMsg(msg);\n        return;\n      }\n      if (!error.response) {\n        let msg = [] as any;\n        msg.push(\"Network Error, Check Your Internet Connection\");\n        setErrorMsg(msg);\n        return;\n      }\n      const {\n        response: { data },\n      } = error;\n      data.errors && updateErrors(data.errors);\n    }\n  };\n  return (\n    <>\n      <div className=\"hidden md:block w-5/12 mb-6 border-r-2 border-gray-200\">\n        <OnboardingSideBar name=\"next_of_kin\" />\n        <img src=\"/img/checklists.svg\" alt=\"\" className=\"w-1/4 m-auto pt-16\" />\n      </div>\n\n      <div className=\"md:w-7/12 w-full mb-6 px-8 relative\">\n        <h1 className=\"block text-gray-700 text-lg font-bold mb-2\">\n          Next of Kin\n        </h1>\n        {/* <h3 className=\"text-gray-600 text-sm\"> We hate to ask, but regulations mandate us to. <br/> Your BVN is safe with us!</h3> */}\n        {errorMsg.length ? (\n          <div\n            className=\"bg-red-100 border-t-4 border-red-500 rounded-b text-red-900 px-4 py-3 shadow-md my-5\"\n            role=\"alert\"\n          >\n            <div className=\"flex\">\n              <div className=\"py-1\">\n                <svg\n                  className=\"fill-current h-6 w-6 text-red-500 mr-4\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 20 20\"\n                >\n                  <path d=\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\" />\n                </svg>\n              </div>\n              <div>\n                {/* <p className=\"font-bold\">Sent successfully</p> */}\n                {/* <p className=\"text-sm\">{errorMsg}</p> */}\n                <ul style={{ listStyleType: \"none\" }}>\n                  {errorMsg.map((error, i) => (\n                    <li key={i}>{error}</li>\n                  ))}\n                </ul>\n              </div>\n            </div>\n          </div>\n        ) : (\n          \"\"\n        )}\n        {submitted ? (\n          <>\n            <div\n              className=\"bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fade-in\"\n              role=\"alert\"\n            >\n              <div className=\"flex\">\n                <div className=\"py-1\">\n                  <svg\n                    className=\"fill-current h-6 w-6 text-teal-500 mr-4\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    viewBox=\"0 0 20 20\"\n                  >\n                    <path d=\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\" />\n                  </svg>\n                </div>\n                <div>\n                  <p className=\"font-bold\">Sent successfully</p>\n                  <p className=\"text-sm\">Next of Kin created successfully</p>\n                </div>\n              </div>\n            </div>\n          </>\n        ) : (\n          <>\n            <form className=\"w-full max-w-lg\" onSubmit={handleSubmit(onSubmit)}>\n              <div className=\"flex flex-wrap -mx-3 mb-6\">\n                {data &&\n                  data.map((data, key) => {\n                    return (\n                      <FormInput\n                        key={key}\n                        label={data.label}\n                        name={data.name}\n                        required={data.required}\n                        errors={errors}\n                        register={register}\n                        type={data.type}\n                        options={data.options}\n                        value={profile[data.name]}\n                        Controller\n                        control\n                        readonly={data.readonly}\n                        readonlyValue={readonlyValue}\n                        toggleInput={toggleInput}\n                        filteredBy={data.filtered_by ?? null}\n                        getChildFieldOptions={getChildFieldOptions}\n                        filteredOptions={childFieldOptions.find(\n                          (c) => c.name === data.name\n                        )}\n                      />\n                    );\n                  })}\n              </div>\n\n              <div className=\"flex items-center justify-between mb-16\">\n                <button\n                  className=\"bg-blue-700 hover:bg-blue-800 text-white text-lg md:text-xl font-light py-3 px-10 rounded-lg focus:outline-none focus:shadow-outline inline-flex items-center shadow-lg\"\n                  type=\"submit\"\n                >\n                  <span> Save </span>\n                  {!loading ? (\n                    <svg\n                      className=\"ml-2\"\n                      width=\"13\"\n                      height=\"13\"\n                      viewBox=\"0 0 18 18\"\n                      fill=\"none\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                    >\n                      <g id=\"done_24px\">\n                        <path\n                          id=\"icon/action/done_24px\"\n                          d=\"M6.5999 11.925L3.4499 8.775L2.3999 9.825L6.5999 14.025L15.5999 5.025L14.5499 3.975L6.5999 11.925Z\"\n                          fill=\"white\"\n                        />\n                      </g>\n                    </svg>\n                  ) : (\n                    <img src=\"/img/25.gif\" className=\"ml-2\" alt=\"\" />\n                  )}\n                </button>\n              </div>\n            </form>\n          </>\n        )}\n\n        <div className=\"flex justify-end w-full pr-0 md:pr-4 mt-10\">\n          <div className=\"md:inline-flex justify-end\">\n            <button\n              onClick={() =>\n                pageType === \"onboarding\"\n                  ? props.history.push(\"/onboarding/personal\")\n                  : props.history.push(\"/profile/personal\")\n              }\n              className=\"bg-gray-500 hover:bg-gray-600 text-white text-md md:text-xl font-light py-2 px-6 md:py-3 md:px-8 rounded-l focus:outline-none focus:shadow-outline inline-flex items-center\"\n              type=\"button\"\n            >\n              <svg\n                className=\"mr-2 -mt-1\"\n                width=\"18\"\n                height=\"18\"\n                viewBox=\"0 0 18 18\"\n                fill=\"none\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <g id=\"chevron_right_24px\">\n                  <path\n                    id=\"icon/navigation/chevron_left_24px\"\n                    d=\"M15.705 16.59L11.125 12L15.705 7.41L14.295 6L8.29498 12L14.295 18L15.705 16.59Z\"\n                    fill=\"white\"\n                  />\n                </g>\n              </svg>\n              <span> Previous </span>\n            </button>\n\n            <button\n              // disabled={!submitted}\n              onClick={() =>\n                pageType === \"onboarding\"\n                  ? props.history.push(\"/onboarding/contact\")\n                  : props.history.push(\"/profile/contact\")\n              }\n              className=\"bg-green-600 hover:bg-green-700 text-white text-md md:text-xl font-light py-2 px-6 md:py-3 md:px-8 rounded-r focus:outline-none focus:shadow-outline inline-flex items-center\"\n              type=\"button\"\n            >\n              <span> Next </span>\n              <svg\n                className=\"ml-2 -mt-1\"\n                width=\"18\"\n                height=\"18\"\n                viewBox=\"0 0 18 18\"\n                fill=\"none\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <g id=\"chevron_right_24px\">\n                  <path\n                    id=\"icon/navigation/chevron_right_24px\"\n                    d=\"M9.70492 6L8.29492 7.41L12.8749 12L8.29492 16.59L9.70492 18L15.7049 12L9.70492 6Z\"\n                    fill=\"white\"\n                  />\n                </g>\n              </svg>\n            </button>\n          </div>\n        </div>\n        {/* <div className=\"absolute bottom-0 right-0 mr-10 -mt-8\">\n          <button\n            disabled={!submitted}\n            onClick={() => props.history.push(\"/onboarding/contact\")}\n            className=\"bg-gray-400 hover:bg-gray-600 text-white text-xl font-light py-3 px-10 rounded-lg focus:outline-none focus:shadow-outline inline-flex items-center\"\n            type=\"button\"\n          >\n            <span> Next </span>\n            <svg\n              className=\"ml-2 -mt-1\"\n              width=\"18\"\n              height=\"18\"\n              viewBox=\"0 0 18 18\"\n              fill=\"none\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <g id=\"chevron_right_24px\">\n                <path\n                  id=\"icon/navigation/chevron_right_24px\"\n                  d=\"M9.70492 6L8.29492 7.41L12.8749 12L8.29492 16.59L9.70492 18L15.7049 12L9.70492 6Z\"\n                  fill=\"white\"\n                />\n              </g>\n            </svg>\n          </button>\n        </div> */}\n      </div>\n    </>\n  );\n};\n\nexport default NextofKin;\n"]},"metadata":{},"sourceType":"module"}