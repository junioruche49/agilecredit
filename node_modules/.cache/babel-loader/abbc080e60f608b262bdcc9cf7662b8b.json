{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Documents/react app/agilecreditportal/src/pages/Bvn.tsx\";\nimport React, { useState } from \"react\";\nimport { withRouter } from \"react-router\";\nimport OnboardingSideBar from \"../components/OnboardingSideBar\";\nimport { useForm } from \"react-hook-form\";\nimport { getBvn, validateOTP } from \"../clients/bvn\";\n\nconst Bvn = props => {\n  const [loading, setLoading] = useState(false);\n  const [displayMsg, setDisplayMsg] = useState(\"\");\n  const [otpMsg, setOtpMsg] = useState(null);\n  const [userInput, setUserInput] = useState(null);\n  const [otpNumber, setOtpNumber] = useState(null);\n  const [otpError, setOtpError] = useState(false);\n  const {\n    register,\n    setValue,\n    handleSubmit,\n    errors\n  } = useForm();\n\n  const onOtpSubmit = async () => {\n    if (otpNumber != userInput) {\n      setOtpError(true);\n      return;\n    }\n\n    console.log('no');\n    let data = await validateOTP();\n    console.log(data);\n    setOtpMsg(data.message);\n    setTimeout(function () {\n      setOtpMsg(null);\n      props.history.push('/onboarding/personal-details');\n    }, 2000);\n  };\n\n  const setUsersInput = e => {\n    setUserInput(e.target.value);\n  };\n\n  const onSubmit = async datas => {\n    setLoading(true);\n    let data = null;\n    console.log('yes');\n\n    try {\n      setLoading(false);\n      setValue(\"bvn\", \"\");\n      setValue(\"otp\", \"\"); //   if (displayMsg) {\n      // console.log('no')\n      //      data = await validateOTP();\n      //      console.log(data)\n      //      setOtpMsg(data.message);\n      //      setTimeout(\n      //       function() {\n      //           setOtpMsg(null );\n      //           props.history.push('/onboarding/personal-details')\n      //       },\n      //       2000\n      //      );\n      //   }\n\n      data = await getBvn();\n      let mobile = data.data.mobile.split(\"\");\n      setOtpNumber(data.data.otprequestid);\n      let phone = \"xxx-xxx-xxx-\" + mobile[9] + mobile[10];\n      let message = data.message + \" \" + phone;\n      setDisplayMsg(message);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"hidden md:block w-5/12 mb-6 border-r-2 border-gray-200\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(OnboardingSideBar, {\n    name: \"BVN\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-full md:w-7/12 mb-6 px-8 relative\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"block text-gray-700 text-lg font-bold mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, \"BVN DETAILS\"), otpMsg ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"py-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    className: \"fill-current h-6 w-6 text-teal-500 mr-4\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 39\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 151\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"font-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 19\n    }\n  }, \"Sent successfully\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 19\n    }\n  }, otpMsg)))) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"text-gray-600 text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  }, displayMsg ? displayMsg : \"We hate to ask, but regulations mandate us to. <br/> Your BVN is safe with us!\", \" \"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"rounded pt-10\",\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-4 w-11/12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }, displayMsg ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"input\", {\n    name: \"otp\",\n    onInput: setUsersInput,\n    className: \"shadow appearance-none border rounded w-full py-3 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",\n    type: \"text\",\n    placeholder: \"Enter the OTP sent to your phone...\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-red-500 text-xs italic\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }, \"Incorrect OTP\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center justify-between mb-24 mt-6 bottom-40 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: onOtpSubmit,\n    disabled: loading,\n    className: \"bg-blue-700 hover:bg-blue-800 text-white text-xl font-light py-3 px-10 rounded focus:outline-none focus:shadow-outline inline-flex items-center\",\n    type: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 19\n    }\n  }, \" Validate \"), /*#__PURE__*/React.createElement(\"svg\", {\n    className: \"ml-2\",\n    width: \"18\",\n    height: \"18\",\n    viewBox: \"0 0 18 18\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"done_24px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    id: \"icon/action/done_24px\",\n    d: \"M6.5999 11.925L3.4499 8.775L2.3999 9.825L6.5999 14.025L15.5999 5.025L14.5499 3.975L6.5999 11.925Z\",\n    fill: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 21\n    }\n  })))))) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"input\", {\n    name: \"bvn\",\n    ref: register({\n      required: true,\n      minLength: 11\n    }),\n    className: \"shadow appearance-none border rounded w-full py-3 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",\n    type: \"number\",\n    placeholder: \"Enter your 11-digit BVN...\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 15\n    }\n  }), errors.bvn && errors.bvn.type === \"required\" && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-red-500 text-xs italic\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 66\n    }\n  }, \"Please fill out this field.\"), errors.bvn && errors.bvn.type === \"minLength\" && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-red-500 text-xs italic\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 67\n    }\n  }, \"Minimum BVN length is 11.\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center justify-between mb-24 mt-6 bottom-40 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    disabled: loading,\n    className: \"bg-blue-700 hover:bg-blue-800 text-white text-xl font-light py-3 px-10 rounded focus:outline-none focus:shadow-outline inline-flex items-center\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 19\n    }\n  }, \" Validate \"), /*#__PURE__*/React.createElement(\"svg\", {\n    className: \"ml-2\",\n    width: \"18\",\n    height: \"18\",\n    viewBox: \"0 0 18 18\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"done_24px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    id: \"icon/action/done_24px\",\n    d: \"M6.5999 11.925L3.4499 8.775L2.3999 9.825L6.5999 14.025L15.5999 5.025L14.5499 3.975L6.5999 11.925Z\",\n    fill: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 21\n    }\n  }))))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"absolute bottom-0 right-0 mr-16 -mt-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    disabled: true,\n    onClick: () => props.history.push('/onboarding/personal-details'),\n    className: \"bg-gray-400 hover:bg-gray-600 text-white text-xl font-light py-3 px-10 rounded focus:outline-none focus:shadow-outline inline-flex items-center\",\n    type: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 17\n    }\n  }, \" Next \"), /*#__PURE__*/React.createElement(\"svg\", {\n    className: \"ml-2\",\n    width: \"18\",\n    height: \"18\",\n    viewBox: \"0 0 18 18\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"done_24px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    id: \"icon/action/done_24px\",\n    d: \"M6.5999 11.925L3.4499 8.775L2.3999 9.825L6.5999 14.025L15.5999 5.025L14.5499 3.975L6.5999 11.925Z\",\n    fill: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 19\n    }\n  })))))));\n};\n\nexport default withRouter(Bvn);","map":{"version":3,"sources":["/Users/mac/Documents/react app/agilecreditportal/src/pages/Bvn.tsx"],"names":["React","useState","withRouter","OnboardingSideBar","useForm","getBvn","validateOTP","Bvn","props","loading","setLoading","displayMsg","setDisplayMsg","otpMsg","setOtpMsg","userInput","setUserInput","otpNumber","setOtpNumber","otpError","setOtpError","register","setValue","handleSubmit","errors","onOtpSubmit","console","log","data","message","setTimeout","history","push","setUsersInput","e","target","value","onSubmit","datas","mobile","split","otprequestid","phone","error","required","minLength","bvn","type"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { useQuery } from \"react-query\";\nimport { withRouter } from \"react-router\";\nimport OnboardingSideBar from \"../components/OnboardingSideBar\";\nimport {useForm} from \"react-hook-form\";\n\nimport { getBvn, validateOTP } from \"../clients/bvn\";\n\n\nconst Bvn =(props:any)=> {\n\n  const [loading, setLoading] = useState(false)\n  const [displayMsg, setDisplayMsg] = useState(\"\")\n  const [otpMsg, setOtpMsg] = useState(null)\n  const [userInput, setUserInput] = useState(null)\n  const [otpNumber, setOtpNumber] = useState(null)\n  const [otpError, setOtpError] = useState(false)\n\n  const { register, setValue, handleSubmit, errors } = useForm();\n\n  const onOtpSubmit = async ()=>{\n    if (otpNumber != userInput) {\n      setOtpError(true)\n      return;\n    }\n\n    console.log('no')\n         let data = await validateOTP();\n         console.log(data)\n         setOtpMsg(data.message);\n         setTimeout(\n          function() {\n              setOtpMsg(null );\n              props.history.push('/onboarding/personal-details')\n          },\n          2000\n         );\n  }\n\n  const setUsersInput = (e:any)=>{\n    setUserInput(e.target.value)\n  }\n  \n  const onSubmit = async (datas : any)=>{\n    setLoading(true)\n    let data = null;\n    console.log('yes')\n    try {\n      setLoading(false)\n      setValue(\"bvn\", \"\")\n      setValue(\"otp\", \"\")\n    //   if (displayMsg) {\n    // console.log('no')\n    //      data = await validateOTP();\n    //      console.log(data)\n    //      setOtpMsg(data.message);\n    //      setTimeout(\n    //       function() {\n    //           setOtpMsg(null );\n    //           props.history.push('/onboarding/personal-details')\n    //       },\n    //       2000\n    //      );\n    //   }\n       data = await getBvn();\n       let mobile = data.data.mobile.split(\"\")\n       setOtpNumber(data.data.otprequestid)\n       let phone = \"xxx-xxx-xxx-\"+mobile[9]+mobile[10]\n       let message = data.message + \" \" + phone\n       \n      setDisplayMsg(message)\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n \n\n  return (\n    <>\n      {/* Desktop view */}\n      <div className=\"hidden md:block w-5/12 mb-6 border-r-2 border-gray-200\">\n        <OnboardingSideBar name=\"BVN\" />\n      </div>\n\n      <div className=\"w-full md:w-7/12 mb-6 px-8 relative\">\n        <h1 className=\"block text-gray-700 text-lg font-bold mb-2\">\n          BVN DETAILS\n        </h1>\n          {\n            otpMsg ?\n            <div className=\"bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md\" role=\"alert\">\n              <div className=\"flex\">\n                <div className=\"py-1\"><svg className=\"fill-current h-6 w-6 text-teal-500 mr-4\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><path d=\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\"/></svg></div>\n                <div>\n                  <p className=\"font-bold\">Sent successfully</p>\n                  <p className=\"text-sm\">{otpMsg}</p>\n                </div>\n              </div>\n            </div>\n            :\n            <>\n        <h3 className=\"text-gray-600 text-sm\">{displayMsg?displayMsg:\"We hate to ask, but regulations mandate us to. <br/> Your BVN is safe with us!\"} </h3>\n        <form className=\"rounded pt-10\" onSubmit={handleSubmit(onSubmit)}>\n          <div className=\"mb-4 w-11/12\">\n            \n            {displayMsg?\n            <>\n            <input name=\"otp\" onInput={setUsersInput}  className=\"shadow appearance-none border rounded w-full py-3 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\" type=\"text\" placeholder=\"Enter the OTP sent to your phone...\" />\n            <p className=\"text-red-500 text-xs italic\">Incorrect OTP</p>\n            <div className=\"flex items-center justify-between mb-24 mt-6 bottom-40 \">\n                <button onClick={onOtpSubmit} disabled={loading} className=\"bg-blue-700 hover:bg-blue-800 text-white text-xl font-light py-3 px-10 rounded focus:outline-none focus:shadow-outline inline-flex items-center\" type=\"button\">\n                  <span> Validate </span>\n                  <svg className=\"ml-2\"  width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <g id=\"done_24px\">\n                    <path id=\"icon/action/done_24px\" d=\"M6.5999 11.925L3.4499 8.775L2.3999 9.825L6.5999 14.025L15.5999 5.025L14.5499 3.975L6.5999 11.925Z\" fill=\"white\"/>\n                    </g>\n                  </svg>\n                </button>\n              \n              </div>\n            </>\n             :\n             <>\n              <input name=\"bvn\" ref={register({ required: true, minLength: 11 })} className=\"shadow appearance-none border rounded w-full py-3 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\" type=\"number\"  placeholder=\"Enter your 11-digit BVN...\" />\n              {errors.bvn &&  errors.bvn.type === \"required\" && (<p className=\"text-red-500 text-xs italic\">Please fill out this field.</p>)}\n              {errors.bvn &&  errors.bvn.type === \"minLength\" && (<p className=\"text-red-500 text-xs italic\">Minimum BVN length is 11.</p>)}\n              \n              <div className=\"flex items-center justify-between mb-24 mt-6 bottom-40 \">\n                <button disabled={loading} className=\"bg-blue-700 hover:bg-blue-800 text-white text-xl font-light py-3 px-10 rounded focus:outline-none focus:shadow-outline inline-flex items-center\" type=\"submit\">\n                  <span> Validate </span>\n                  <svg className=\"ml-2\"  width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <g id=\"done_24px\">\n                    <path id=\"icon/action/done_24px\" d=\"M6.5999 11.925L3.4499 8.775L2.3999 9.825L6.5999 14.025L15.5999 5.025L14.5499 3.975L6.5999 11.925Z\" fill=\"white\"/>\n                    </g>\n                  </svg>\n                </button>\n              \n              </div>\n            </>\n            }\n          </div>\n          \n           \n        </form>\n            </>\n          }\n           <div className=\"absolute bottom-0 right-0 mr-16 -mt-8\">\n            <button disabled onClick={()=>props.history.push('/onboarding/personal-details')} className=\"bg-gray-400 hover:bg-gray-600 text-white text-xl font-light py-3 px-10 rounded focus:outline-none focus:shadow-outline inline-flex items-center\" type=\"button\">\n                <span> Next </span>\n                <svg className=\"ml-2\"  width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <g id=\"done_24px\">\n                  <path id=\"icon/action/done_24px\" d=\"M6.5999 11.925L3.4499 8.775L2.3999 9.825L6.5999 14.025L15.5999 5.025L14.5499 3.975L6.5999 11.925Z\" fill=\"white\"/>\n                  </g>\n                </svg>\n              </button>\n            </div>\n      </div>\n\n      {/* End of Desktop View */}\n    </>\n  );\n};\n\nexport default withRouter(Bvn);\n"]},"metadata":{},"sourceType":"module"}