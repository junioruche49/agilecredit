{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mac/Documents/react app/agilecreditportal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mac/Documents/react app/agilecreditportal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mac/Documents/react app/agilecreditportal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useCallback}from\"react\";import OnboardingSideBar from\"../components/OnboardingSideBar\";import{useForm,Controller}from\"react-hook-form\";import{useQuery}from\"react-query\";import useAuthStore from\"../stores/authStore\";import useProfileStore from\"../stores/profileStore\";import{getEducationalFields,patchRequest,getProfileSection}from\"../clients/onboarding\";import FormInput from\"../components/FormInput\";import{getPersonalDetails}from\"../clients/profile\";var EducationalDetails=function EducationalDetails(props){var pageType=\"profile\";if(props.location.pathname.includes(\"/onboarding\")){pageType=\"onboarding\";}var _useState=useState([]),_useState2=_slicedToArray(_useState,2),errorMsg=_useState2[0],setErrorMsg=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),load=_useState6[0],setLoad=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),submitted=_useState8[0],setSubmitted=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),readonlyValue=_useState10[0],setReadonlyValue=_useState10[1];var token=useAuthStore(function(state){return state.accessToken;});var profile=useProfileStore(function(state){return state.data;});var _useQuery=useQuery(\"education\",function(){return getEducationalFields(token);}),isLoading=_useQuery.isLoading,error=_useQuery.error,data=_useQuery.data;var _useQuery2=useQuery(\"educationalSections\",function(){return getProfileSection(token);}),isLoading2=_useQuery2.isLoading,error2=_useQuery2.error,educationalDetails=_useQuery2.data,refetch=_useQuery2.refetch;// const initializeProfile = useProfileStore(\n//   useCallback((state) => state.initialize, [])\n// );\nvar _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.errors,reset=_useForm.reset,control=_useForm.control;useEffect(function(){var result=profile;// result: { firstName: 'test', lastName: 'test2' }\nreset(result);// asynchronously reset your form values\n},[reset]);var getUpdatedProfile=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var getProfile;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getPersonalDetails(token);case 2:getProfile=_context.sent;initializeProfileStore(getProfile.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getUpdatedProfile(){return _ref.apply(this,arguments);};}();useEffect(function(){getUpdatedProfile();},[]);var initializeProfileStore=useProfileStore(useCallback(function(state){return state.initialize;},[]));var initializeProfileSection=useProfileStore(useCallback(function(state){return state.initializeProfileSection;},[]));useEffect(function(){educationalDetails&&initializeProfileSection([].concat(educationalDetails),educationalDetails.every(function(loan){return loan.completed===true;}));},[educationalDetails,initializeProfileSection]);if(isLoading||isLoading2){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"w-full m-auto px-8 relative\"},/*#__PURE__*/React.createElement(\"img\",{src:\"/img/loading-gif.gif\",alt:\"\",className:\"w-1/8 m-auto py-20\"})));}var toggleInput=function toggleInput(){setReadonlyValue(function(prev){return!prev;});};var updateErrors=function updateErrors(errors){setErrorMsg(Object.values(errors).flat());};var onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(values){var date,year,value,postData,_data,msg,_msg,_data2;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:date=new Date(values.year_of_graduation);year=date.getFullYear();values.year_of_graduation=year;value={};data.map(function(val){value[val.name]=values[val.name];});setLoad(true);setLoading(true);_context2.prev=7;_context2.next=10;return patchRequest(token,value);case 10:postData=_context2.sent;setSubmitted(true);_data=postData.data;initializeProfileStore(_data);setTimeout(function(){setSubmitted(false);setLoading(false);refetch();pageType===\"onboarding\"?props.history.push(\"/onboarding/employment\"):props.history.replace(\"/profile/education\");},2000);setLoad(false);setLoading(false);setErrorMsg([]);_context2.next=35;break;case 20:_context2.prev=20;_context2.t0=_context2[\"catch\"](7);setLoading(false);if(!(_context2.t0&&_context2.t0.response.status==500)){_context2.next=28;break;}msg=[];msg.push(_context2.t0.response.data.message);setErrorMsg(msg);return _context2.abrupt(\"return\");case 28:if(_context2.t0.response){_context2.next=33;break;}_msg=[];_msg.push(\"Network Error, Check Your Internet Connection\");setErrorMsg(_msg);return _context2.abrupt(\"return\");case 33:_data2=_context2.t0.response.data;_data2.errors&&updateErrors(_data2.errors);case 35:case\"end\":return _context2.stop();}}},_callee2,null,[[7,20]]);}));return function onSubmit(_x){return _ref2.apply(this,arguments);};}();// if (load) {\n//   return <div>Loading...</div>;\n// }\nreturn/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"hidden md:block w-5/12 mb-6 border-r-2 border-gray-200\"},/*#__PURE__*/React.createElement(OnboardingSideBar,{name:\"education\"}),/*#__PURE__*/React.createElement(\"img\",{src:\"/img/checklists.svg\",alt:\"\",className:\"w-1/4 m-auto pt-16\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"md:w-7/12 w-full mb-6 px-8 relative\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"block text-gray-700 text-lg font-bold mb-4\"},\"EDUCATION\"),errorMsg.length?/*#__PURE__*/React.createElement(\"div\",{className:\"bg-red-100 border-t-4 border-red-500 rounded-b text-red-900 px-4 py-3 shadow-md my-5\",role:\"alert\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"py-1\"},/*#__PURE__*/React.createElement(\"svg\",{className:\"fill-current h-6 w-6 text-red-500 mr-4\",xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 20 20\"},/*#__PURE__*/React.createElement(\"path\",{d:\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\"}))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"ul\",{style:{listStyleType:\"none\"}},errorMsg.map(function(error,i){return/*#__PURE__*/React.createElement(\"li\",{key:i},error);}))))):\"\",submitted?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fade-in\",role:\"alert\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"py-1\"},/*#__PURE__*/React.createElement(\"svg\",{className:\"fill-current h-6 w-6 text-teal-500 mr-4\",xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 20 20\"},/*#__PURE__*/React.createElement(\"path\",{d:\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\"}))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"font-bold\"},\"Sent successfully\"),/*#__PURE__*/React.createElement(\"p\",{className:\"text-sm\"},\"Educational details created successfully\"))))):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"form\",{className:\"w-full max-w-lg\",onSubmit:handleSubmit(onSubmit)},/*#__PURE__*/React.createElement(\"div\",{className:\"flex flex-wrap -mx-3 mb-6\"},data&&data.map(function(data,key){return/*#__PURE__*/React.createElement(FormInput,{key:key,label:data.label,name:data.name,required:data.required,errors:errors,register:register,type:data.type,options:data.options,value:profile[data.name],format:data.format,Controller:Controller,control:control,readonly:data.readonly,readonlyValue:readonlyValue,toggleInput:toggleInput});})),/*#__PURE__*/React.createElement(\"div\",{className:\"flex items-center justify-between mt-5 mb-16\"},/*#__PURE__*/React.createElement(\"button\",{className:\"bg-blue-700 hover:bg-blue-800 text-white text-sm md:text-xl font-light py-3 px-10 rounded-lg focus:outline-none focus:shadow-outline inline-flex items-center shadow-lg\",type:\"submit\"},/*#__PURE__*/React.createElement(\"span\",null,\" Save \"),!loading?/*#__PURE__*/React.createElement(\"svg\",{className:\"ml-2\",width:\"13\",height:\"13\",viewBox:\"0 0 18 18\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"g\",{id:\"done_24px\"},/*#__PURE__*/React.createElement(\"path\",{id:\"icon/action/done_24px\",d:\"M2 0H14L18 4V16C18 17.1 17.1 18 16 18H2C0.89 18 0 17.1 0 16V2C0 0.9 0.89 0 2 0ZM16 16V4.83L13.17 2H2V16H16ZM9 9C7.34 9 6 10.34 6 12C6 13.66 7.34 15 9 15C10.66 15 12 13.66 12 12C12 10.34 10.66 9 9 9ZM12 3H3V7H12V3Z\",fill:\"white\"}))):/*#__PURE__*/React.createElement(\"img\",{src:\"/img/25.gif\",className:\"ml-2\",alt:\"\"}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"flex justify-end w-full pr-0 md:pr-4 mt-10\"},/*#__PURE__*/React.createElement(\"div\",{className:\"inline-flex justify-end\"},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return pageType===\"onboarding\"?props.history.push(\"/onboarding/contact\"):props.history.push(\"/profile/contact\");},className:\"bg-gray-500 hover:bg-gray-600 text-white text-md md:text-xl font-light py-2 px-6 md:py-3 md:px-8 rounded-l focus:outline-none focus:shadow-outline inline-flex items-center\",type:\"button\"},/*#__PURE__*/React.createElement(\"svg\",{className:\"mr-2 -mt-1\",width:\"18\",height:\"18\",viewBox:\"0 0 18 18\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"g\",{id:\"chevron_right_24px\"},/*#__PURE__*/React.createElement(\"path\",{id:\"icon/navigation/chevron_left_24px\",d:\"M15.705 16.59L11.125 12L15.705 7.41L14.295 6L8.29498 12L14.295 18L15.705 16.59Z\",fill:\"white\"}))),/*#__PURE__*/React.createElement(\"span\",null,\" Previous \")),/*#__PURE__*/React.createElement(\"button\",{// disabled={!submitted}\nonClick:function onClick(){return pageType===\"onboarding\"?props.history.push(\"/onboarding/employment\"):props.history.push(\"/profile/employment\");},className:\"bg-green-600 hover:bg-green-700 text-white text-md md:text-xl font-light py-2 px-6 md:py-3 md:px-8 rounded-r focus:outline-none focus:shadow-outline inline-flex items-center\",type:\"button\"},/*#__PURE__*/React.createElement(\"span\",null,\" Next \"),/*#__PURE__*/React.createElement(\"svg\",{className:\"ml-2 -mt-1\",width:\"18\",height:\"18\",viewBox:\"0 0 18 18\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"g\",{id:\"chevron_right_24px\"},/*#__PURE__*/React.createElement(\"path\",{id:\"icon/navigation/chevron_right_24px\",d:\"M9.70492 6L8.29492 7.41L12.8749 12L8.29492 16.59L9.70492 18L15.7049 12L9.70492 6Z\",fill:\"white\"}))))))));};export default EducationalDetails;","map":{"version":3,"sources":["/Users/mac/Documents/react app/agilecreditportal/src/pages/EducationalDetails.tsx"],"names":["React","useState","useEffect","useCallback","OnboardingSideBar","useForm","Controller","useQuery","useAuthStore","useProfileStore","getEducationalFields","patchRequest","getProfileSection","FormInput","getPersonalDetails","EducationalDetails","props","pageType","location","pathname","includes","errorMsg","setErrorMsg","loading","setLoading","load","setLoad","submitted","setSubmitted","readonlyValue","setReadonlyValue","token","state","accessToken","profile","data","isLoading","error","isLoading2","error2","educationalDetails","refetch","register","handleSubmit","errors","reset","control","result","getUpdatedProfile","getProfile","initializeProfileStore","initialize","initializeProfileSection","concat","every","loan","completed","toggleInput","prev","updateErrors","Object","values","flat","onSubmit","date","Date","year_of_graduation","year","getFullYear","value","map","val","name","postData","setTimeout","history","push","replace","response","status","msg","message","length","listStyleType","i","key","label","required","type","options","format","readonly"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\nimport OnboardingSideBar from \"../components/OnboardingSideBar\";\nimport { useForm, Controller } from \"react-hook-form\";\n\nimport { useQuery } from \"react-query\";\n\nimport useAuthStore from \"../stores/authStore\";\nimport useProfileStore from \"../stores/profileStore\";\nimport {\n  getEducationalFields,\n  patchRequest,\n  getProfileSection,\n} from \"../clients/onboarding\";\nimport FormInput from \"../components/FormInput\";\nimport { getPersonalDetails } from \"../clients/profile\";\n\nconst EducationalDetails = (props: any) => {\n  let pageType = \"profile\";\n\n  if (props.location.pathname.includes(\"/onboarding\")) {\n    pageType = \"onboarding\";\n  }\n\n  const [errorMsg, setErrorMsg] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [load, setLoad] = useState(false);\n  const [submitted, setSubmitted] = useState(false);\n  const [readonlyValue, setReadonlyValue] = useState(false);\n  const token = useAuthStore((state) => state.accessToken);\n  const profile = useProfileStore((state) => state.data);\n  const { isLoading, error, data } = useQuery(\"education\", () =>\n    getEducationalFields(token)\n  );\n\n  const {\n    isLoading: isLoading2,\n    error: error2,\n    data: educationalDetails,\n    refetch,\n  } = useQuery(\"educationalSections\", () => getProfileSection(token));\n\n  // const initializeProfile = useProfileStore(\n  //   useCallback((state) => state.initialize, [])\n  // );\n\n  const { register, handleSubmit, errors, reset, control } = useForm();\n\n  useEffect(() => {\n    const result = profile; // result: { firstName: 'test', lastName: 'test2' }\n    reset(result); // asynchronously reset your form values\n  }, [reset]);\n\n  const getUpdatedProfile = async () => {\n    let getProfile = await getPersonalDetails(token);\n    initializeProfileStore(getProfile.data);\n  };\n\n  useEffect(() => {\n    getUpdatedProfile();\n  }, []);\n\n  const initializeProfileStore = useProfileStore(\n    useCallback((state) => state.initialize, [])\n  );\n\n  const initializeProfileSection = useProfileStore(\n    useCallback((state) => state.initializeProfileSection, [])\n  );\n\n  useEffect(() => {\n    educationalDetails &&\n      initializeProfileSection(\n        [].concat(educationalDetails),\n        educationalDetails.every((loan) => loan.completed === true)\n      );\n  }, [educationalDetails, initializeProfileSection]);\n\n  if (isLoading || isLoading2) {\n    return (\n      <>\n        <div className=\"w-full m-auto px-8 relative\">\n          <img\n            src=\"/img/loading-gif.gif\"\n            alt=\"\"\n            className=\"w-1/8 m-auto py-20\"\n          />\n        </div>\n      </>\n    );\n  }\n\n  const toggleInput = () => {\n    setReadonlyValue((prev) => !prev);\n  };\n\n  const updateErrors = (errors: []) => {\n    setErrorMsg(Object.values(errors).flat());\n  };\n\n  const onSubmit = async (values: any) => {\n    let date = new Date(values.year_of_graduation);\n    let year = date.getFullYear();\n    values.year_of_graduation = year;\n\n    let value = {};\n    data.map((val) => {\n      value[val.name] = values[val.name];\n    });\n\n    setLoad(true);\n    setLoading(true);\n    try {\n      let postData = await patchRequest(token, value);\n      setSubmitted(true);\n      const { data } = postData;\n      initializeProfileStore(data);\n      setTimeout(function () {\n        setSubmitted(false);\n        setLoading(false);\n        refetch();\n        pageType === \"onboarding\"\n          ? props.history.push(\"/onboarding/employment\")\n          : props.history.replace(\"/profile/education\");\n      }, 2000);\n      setLoad(false);\n      setLoading(false);\n      setErrorMsg([]);\n    } catch (error) {\n      setLoading(false);\n      if (error && error.response.status == 500) {\n        let msg = [] as any;\n        msg.push(error.response.data.message);\n        setErrorMsg(msg);\n        return;\n      }\n      if (!error.response) {\n        let msg = [] as any;\n        msg.push(\"Network Error, Check Your Internet Connection\");\n        setErrorMsg(msg);\n        return;\n      }\n      const {\n        response: { data },\n      } = error;\n      data.errors && updateErrors(data.errors);\n    }\n  };\n\n  // if (load) {\n  //   return <div>Loading...</div>;\n  // }\n\n  return (\n    <>\n      <div className=\"hidden md:block w-5/12 mb-6 border-r-2 border-gray-200\">\n        <OnboardingSideBar name=\"education\" />\n        <img src=\"/img/checklists.svg\" alt=\"\" className=\"w-1/4 m-auto pt-16\" />\n      </div>\n\n      <div className=\"md:w-7/12 w-full mb-6 px-8 relative\">\n        <h1 className=\"block text-gray-700 text-lg font-bold mb-4\">\n          EDUCATION\n        </h1>\n        {errorMsg.length ? (\n          <div\n            className=\"bg-red-100 border-t-4 border-red-500 rounded-b text-red-900 px-4 py-3 shadow-md my-5\"\n            role=\"alert\"\n          >\n            <div className=\"flex\">\n              <div className=\"py-1\">\n                <svg\n                  className=\"fill-current h-6 w-6 text-red-500 mr-4\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 20 20\"\n                >\n                  <path d=\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\" />\n                </svg>\n              </div>\n              <div>\n                {/* <p className=\"font-bold\">Sent successfully</p> */}\n                {/* <p className=\"text-sm\">{errorMsg}</p> */}\n                <ul style={{ listStyleType: \"none\" }}>\n                  {errorMsg.map((error, i) => (\n                    <li key={i}>{error}</li>\n                  ))}\n                </ul>\n              </div>\n            </div>\n          </div>\n        ) : (\n          \"\"\n        )}\n        {submitted ? (\n          <>\n            <div\n              className=\"bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fade-in\"\n              role=\"alert\"\n            >\n              <div className=\"flex\">\n                <div className=\"py-1\">\n                  <svg\n                    className=\"fill-current h-6 w-6 text-teal-500 mr-4\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    viewBox=\"0 0 20 20\"\n                  >\n                    <path d=\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\" />\n                  </svg>\n                </div>\n                <div>\n                  <p className=\"font-bold\">Sent successfully</p>\n                  <p className=\"text-sm\">\n                    Educational details created successfully\n                  </p>\n                </div>\n              </div>\n            </div>\n          </>\n        ) : (\n          <>\n            {/* <h3 className=\"text-gray-600 text-sm\"> We hate to ask, but regulations mandate us to. <br/> Your BVN is safe with us!</h3> */}\n            <form className=\"w-full max-w-lg\" onSubmit={handleSubmit(onSubmit)}>\n              <div className=\"flex flex-wrap -mx-3 mb-6\">\n                {data &&\n                  data.map((data, key) => {\n                    return (\n                      <FormInput\n                        key={key}\n                        label={data.label}\n                        name={data.name}\n                        required={data.required}\n                        errors={errors}\n                        register={register}\n                        type={data.type}\n                        options={data.options}\n                        value={profile[data.name]}\n                        format={data.format}\n                        Controller={Controller}\n                        control={control}\n                        readonly={data.readonly}\n                        readonlyValue={readonlyValue}\n                        toggleInput={toggleInput}\n                      />\n                    );\n                  })}\n              </div>\n              <div className=\"flex items-center justify-between mt-5 mb-16\">\n                <button\n                  className=\"bg-blue-700 hover:bg-blue-800 text-white text-sm md:text-xl font-light py-3 px-10 rounded-lg focus:outline-none focus:shadow-outline inline-flex items-center shadow-lg\"\n                  type=\"submit\"\n                >\n                  <span> Save </span>\n                  {!loading ? (\n                    <svg\n                      className=\"ml-2\"\n                      width=\"13\"\n                      height=\"13\"\n                      viewBox=\"0 0 18 18\"\n                      fill=\"none\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                    >\n                      <g id=\"done_24px\">\n                        <path\n                          id=\"icon/action/done_24px\"\n                          d=\"M2 0H14L18 4V16C18 17.1 17.1 18 16 18H2C0.89 18 0 17.1 0 16V2C0 0.9 0.89 0 2 0ZM16 16V4.83L13.17 2H2V16H16ZM9 9C7.34 9 6 10.34 6 12C6 13.66 7.34 15 9 15C10.66 15 12 13.66 12 12C12 10.34 10.66 9 9 9ZM12 3H3V7H12V3Z\"\n                          fill=\"white\"\n                        />\n                      </g>\n                    </svg>\n                  ) : (\n                    <img src=\"/img/25.gif\" className=\"ml-2\" alt=\"\" />\n                  )}\n                </button>\n              </div>\n            </form>\n          </>\n        )}\n\n        <div className=\"flex justify-end w-full pr-0 md:pr-4 mt-10\">\n          <div className=\"inline-flex justify-end\">\n            <button\n              onClick={() =>\n                pageType === \"onboarding\"\n                  ? props.history.push(\"/onboarding/contact\")\n                  : props.history.push(\"/profile/contact\")\n              }\n              className=\"bg-gray-500 hover:bg-gray-600 text-white text-md md:text-xl font-light py-2 px-6 md:py-3 md:px-8 rounded-l focus:outline-none focus:shadow-outline inline-flex items-center\"\n              type=\"button\"\n            >\n              <svg\n                className=\"mr-2 -mt-1\"\n                width=\"18\"\n                height=\"18\"\n                viewBox=\"0 0 18 18\"\n                fill=\"none\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <g id=\"chevron_right_24px\">\n                  <path\n                    id=\"icon/navigation/chevron_left_24px\"\n                    d=\"M15.705 16.59L11.125 12L15.705 7.41L14.295 6L8.29498 12L14.295 18L15.705 16.59Z\"\n                    fill=\"white\"\n                  />\n                </g>\n              </svg>\n              <span> Previous </span>\n            </button>\n\n            <button\n              // disabled={!submitted}\n              onClick={() =>\n                pageType === \"onboarding\"\n                  ? props.history.push(\"/onboarding/employment\")\n                  : props.history.push(\"/profile/employment\")\n              }\n              className=\"bg-green-600 hover:bg-green-700 text-white text-md md:text-xl font-light py-2 px-6 md:py-3 md:px-8 rounded-r focus:outline-none focus:shadow-outline inline-flex items-center\"\n              type=\"button\"\n            >\n              <span> Next </span>\n              <svg\n                className=\"ml-2 -mt-1\"\n                width=\"18\"\n                height=\"18\"\n                viewBox=\"0 0 18 18\"\n                fill=\"none\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <g id=\"chevron_right_24px\">\n                  <path\n                    id=\"icon/navigation/chevron_right_24px\"\n                    d=\"M9.70492 6L8.29492 7.41L12.8749 12L8.29492 16.59L9.70492 18L15.7049 12L9.70492 6Z\"\n                    fill=\"white\"\n                  />\n                </g>\n              </svg>\n            </button>\n          </div>\n        </div>\n\n        {/* <div className=\"absolute bottom-0 right-0 mr-10 -mt-8\">\n          <button\n            onClick={() => props.history.push(\"/onboarding/employment\")}\n            className=\"bg-gray-400 hover:bg-gray-600 text-white text-xl font-light py-3 px-10 rounded-lg focus:outline-none focus:shadow-outline inline-flex items-center\"\n            type=\"button\"\n            // disabled={!submitted}\n          >\n            <span> Next </span>\n            <svg\n              className=\"ml-2 -mt-1\"\n              width=\"18\"\n              height=\"18\"\n              viewBox=\"0 0 18 18\"\n              fill=\"none\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <g id=\"chevron_right_24px\">\n                <path\n                  id=\"icon/navigation/chevron_right_24px\"\n                  d=\"M9.70492 6L8.29492 7.41L12.8749 12L8.29492 16.59L9.70492 18L15.7049 12L9.70492 6Z\"\n                  fill=\"white\"\n                />\n              </g>\n            </svg>\n          </button>\n        </div> */}\n      </div>\n    </>\n  );\n};\n\nexport default EducationalDetails;\n"]},"metadata":{},"sourceType":"module"}