{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Documents/react app/agilecreditportal/src/pages/MyLoans.tsx\";\nimport React, { useState } from \"react\";\nimport { useTable } from \"react-table\";\n// import 'bootstrap/dist/css/bootstrap.css';\nimport { useQuery } from \"react-query\";\nimport useAuthStore from \"../stores/authStore\";\nimport { getLoans } from \"../clients/loan\";\nimport { withRouter } from \"react-router\";\n\nfunction MyLoans(props) {\n  const token = useAuthStore(state => state.accessToken);\n  const [allMyLoans, setAllMyLoans] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [errorMsg, setErrorMsg] = useState([]);\n  const {\n    isLoading,\n    error: errorMsgs,\n    data: loans\n  } = useQuery(\"myloans\", () => getLoans(token));\n  console.log(loans);\n  let tableDatas = [];\n\n  const updateErrors = errors => {\n    setErrorMsg(Object.values(errors).flat());\n  };\n\n  const getAllLoans = async () => {\n    try {\n      let postData = getLoans(token);\n      const {\n        data\n      } = postData;\n      setAllMyLoans(data);\n    } catch (error) {\n      setLoading(false);\n\n      if (error && error.response.status === 500) {\n        let msg = [];\n        msg.push(error.response.data.message);\n        setErrorMsg(msg);\n        return;\n      }\n\n      if (!error.response) {\n        let msg = [];\n        msg.push(\"Network Error, Check Your Internet Connection\");\n        setErrorMsg(msg);\n        return;\n      }\n\n      const {\n        response: {\n          data\n        }\n      } = error;\n      data.errors && updateErrors(data.errors);\n    }\n  };\n\n  let TableData = loans && loans.data; // if (loans) {\n  //   TableData = loans.data;\n  // }\n\n  loans && TableData.map(item => {\n    tableDatas.push({\n      col1: item.loan_id,\n      col2: item.description,\n      col3: /*#__PURE__*/React.createElement(\"span\", {\n        className: \"text-green-600 font-bold\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }\n      }, \"\\u20A6\", Number(item.loan_amount).toLocaleString(undefined, {\n        maximumFractionDigits: 2\n      })),\n      col4: new Date(item.repayment_starting_date).toDateString(),\n      col6: /*#__PURE__*/React.createElement(\"button\", {\n        onClick: () => props.history.push(\"/loan-details/\" + item.uuid),\n        className: \"bg-blue-800 py-1 px-2 rounded\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"svg\", {\n        width: \"15\",\n        height: \"15\",\n        viewBox: \"0 0 15 15\",\n        fill: \"none\",\n        xmlns: \"http://www.w3.org/2000/svg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"g\", {\n        id: \"visibility_24px\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"path\", {\n        id: \"icon/action/visibility_24px\",\n        fillRule: \"evenodd\",\n        clipRule: \"evenodd\",\n        d: \"M0.625 7.5C1.70625 4.75625 4.375 2.8125 7.5 2.8125C10.625 2.8125 13.2937 4.75625 14.375 7.5C13.2937 10.2438 10.625 12.1875 7.5 12.1875C4.375 12.1875 1.70625 10.2438 0.625 7.5ZM13.0125 7.5C11.9813 5.39375 9.86878 4.0625 7.50003 4.0625C5.13128 4.0625 3.01878 5.39375 1.98753 7.5C3.01878 9.60625 5.13128 10.9375 7.50003 10.9375C9.86878 10.9375 11.9813 9.60625 13.0125 7.5ZM7.5 5.9375C8.3625 5.9375 9.0625 6.6375 9.0625 7.5C9.0625 8.3625 8.3625 9.0625 7.5 9.0625C6.6375 9.0625 5.9375 8.3625 5.9375 7.5C5.9375 6.6375 6.6375 5.9375 7.5 5.9375ZM4.6875 7.5C4.6875 5.95 5.95 4.6875 7.5 4.6875C9.05 4.6875 10.3125 5.95 10.3125 7.5C10.3125 9.05 9.05 10.3125 7.5 10.3125C5.95 10.3125 4.6875 9.05 4.6875 7.5Z\",\n        fill: \"white\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 17\n        }\n      }))))\n    });\n  });\n  console.log(tableDatas);\n  const columns = React.useMemo(() => [{\n    Header: \"Loan ID\",\n    accessor: \"col1\" // accessor is the \"key\" in the data\n\n  }, {\n    Header: \"Type\",\n    accessor: \"col2\"\n  }, {\n    Header: \"Amount\",\n    accessor: \"col3\"\n  }, {\n    Header: \"Date\",\n    accessor: \"col4\"\n  }, {\n    Header: \"Action\",\n    accessor: \"col6\"\n  }], []);\n  const {\n    getTableProps,\n    getTableBodyProps,\n    headerGroups,\n    rows,\n    prepareRow\n  } = useTable({\n    columns: columns,\n    data: tableDatas\n  });\n\n  if (isLoading) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-full m-auto px-8 relative\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"/img/loading-gif.gif\",\n      alt: \"\",\n      className: \"w-1/8 m-auto py-20\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 11\n      }\n    })));\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"main\", {\n    className: \"md:pl-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-full \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center mt-10 lg:mt-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-8 h-1 bg-blue-700 rounded mr-0 hidden md:block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"bg-blue-700 md:bg-transparent text-white md:text-gray-700 font-light md:font-semibold text-sm md:text-xl tracking-wide uppercase md:normal-case py-2 px-6 rounded-r-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 15\n    }\n  }, \"My Loans\")), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }\n  }), errorMsgs ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-red-100 border-t-4 border-red-500 rounded-b text-red-900 px-4 py-3 shadow-md my-5\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"py-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    className: \"fill-current h-6 w-6 text-red-500 mr-4\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 23\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    style: {\n      listStyleType: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 21\n    }\n  }, console.log(errorMsgs), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 23\n    }\n  }, errorMsgs.response.data.message))))) : \"\", /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-11/12 bg-white flex rounded py-12 shadow-lg border-b-4 border-blue-700 md:border-none  mb-20 m-auto md:m-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-full mb-6 px-8 py-6 relative\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"-mx-4 sm:-mx-8 px-4 sm:px-8 py-0 md:py-4 overflow-auto  fade-in mt-5 mb-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inline-block min-w-full shadow rounded-lg overflow-hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", Object.assign({}, getTableProps(), {\n    className: \"min-w-full w-full leading-normal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"thead\", {\n    className: \"flex w-full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 23\n    }\n  }, headerGroups.map(headerGroup => /*#__PURE__*/React.createElement(\"tr\", Object.assign({}, headerGroup.getHeaderGroupProps(), {\n    className: \"flex w-full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 27\n    }\n  }), headerGroup.headers.map(column => /*#__PURE__*/React.createElement(\"th\", Object.assign({}, column.getHeaderProps(), {\n    // style={{ fontSize: 16 }}\n    className: \"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-center text-sm font-semibold text-gray-600 uppercase tracking-wider\" //   style={{\n    //     borderBottom: \"solid 3px red\",\n    //     background: \"aliceblue\",\n    //     color: \"black\",\n    //     fontWeight: \"bold\",\n    //   }}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 31\n    }\n  }), column.render(\"Header\")))))), /*#__PURE__*/React.createElement(\"tbody\", Object.assign({}, getTableBodyProps(), {\n    className: \"flex flex-col items-center overflow-y-scroll w-full schedule-table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 23\n    }\n  }), rows.map(row => {\n    prepareRow(row);\n    return /*#__PURE__*/React.createElement(\"tr\", Object.assign({}, row.getRowProps(), {\n      className: \"flex w-full\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 29\n      }\n    }), row.cells.map(cell => {\n      return /*#__PURE__*/React.createElement(\"td\", Object.assign({}, cell.getCellProps(), {\n        // style={{\n        //   padding: \"10px\",\n        //   fontSize: 16,\n        //   textAlign: \"center\",\n        //   paddingBottom: 40,\n        // }}\n        className: \"p-4 w-1/4 px-5 py-5 text-center border-b border-gray-200 bg-white text-xs md:text-sm text-gray-700\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 35\n        }\n      }), cell.render(\"Cell\"));\n    }));\n  }))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-11/12 mt-8 hidden md:block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"hr\", {\n    className: \"w-9/12 border-t-2 border-blue-600 bg-blue-400 rounded m-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default withRouter(MyLoans);","map":{"version":3,"sources":["/Users/mac/Documents/react app/agilecreditportal/src/pages/MyLoans.tsx"],"names":["React","useState","useTable","useQuery","useAuthStore","getLoans","withRouter","MyLoans","props","token","state","accessToken","allMyLoans","setAllMyLoans","loading","setLoading","errorMsg","setErrorMsg","isLoading","error","errorMsgs","data","loans","console","log","tableDatas","updateErrors","errors","Object","values","flat","getAllLoans","postData","response","status","msg","push","message","TableData","map","item","col1","loan_id","col2","description","col3","Number","loan_amount","toLocaleString","undefined","maximumFractionDigits","col4","Date","repayment_starting_date","toDateString","col6","history","uuid","columns","useMemo","Header","accessor","getTableProps","getTableBodyProps","headerGroups","rows","prepareRow","listStyleType","headerGroup","getHeaderGroupProps","headers","column","getHeaderProps","render","row","getRowProps","cells","cell","getCellProps"],"mappings":"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","sourcesContent":["import React, { Fragment, useState } from \"react\";\nimport { useTable } from \"react-table\";\nimport ReactDatatable from \"@ashvin27/react-datatable\";\n// import 'bootstrap/dist/css/bootstrap.css';\nimport { useQuery } from \"react-query\";\nimport useAuthStore from \"../stores/authStore\";\nimport { getLoans } from \"../clients/loan\";\nimport { withRouter } from \"react-router\";\n\nfunction MyLoans(props) {\n  const token = useAuthStore((state) => state.accessToken);\n  const [allMyLoans, setAllMyLoans] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [errorMsg, setErrorMsg] = useState([]);\n\n  const { isLoading, error: errorMsgs, data: loans } = useQuery(\"myloans\", () =>\n    getLoans(token)\n  );\n\n  console.log(loans);\n  let tableDatas = [] as any;\n\n  const updateErrors = (errors: []) => {\n    setErrorMsg(Object.values(errors).flat());\n  };\n\n  const getAllLoans = async () => {\n    try {\n      let postData = getLoans(token);\n      const { data } = postData;\n      setAllMyLoans(data);\n    } catch (error) {\n      setLoading(false);\n      if (error && error.response.status === 500) {\n        let msg = [] as any;\n        msg.push(error.response.data.message);\n        setErrorMsg(msg);\n        return;\n      }\n      if (!error.response) {\n        let msg = [] as any;\n        msg.push(\"Network Error, Check Your Internet Connection\");\n        setErrorMsg(msg);\n        return;\n      }\n      const {\n        response: { data },\n      } = error;\n      data.errors && updateErrors(data.errors);\n    }\n  };\n\n  let TableData = loans && loans.data;\n  // if (loans) {\n  //   TableData = loans.data;\n  // }\n  loans &&\n    TableData.map((item) => {\n      tableDatas.push({\n        col1: item.loan_id,\n        col2: item.description,\n        col3: (\n          <span className=\"text-green-600 font-bold\">\n            â‚¦\n            {Number(item.loan_amount).toLocaleString(undefined, {\n              maximumFractionDigits: 2,\n            })}\n          </span>\n        ),\n        col4: new Date(item.repayment_starting_date).toDateString(),\n        col6: (\n          <button\n            onClick={() => props.history.push(\"/loan-details/\" + item.uuid)}\n            className=\"bg-blue-800 py-1 px-2 rounded\"\n          >\n            <svg\n              width=\"15\"\n              height=\"15\"\n              viewBox=\"0 0 15 15\"\n              fill=\"none\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <g id=\"visibility_24px\">\n                <path\n                  id=\"icon/action/visibility_24px\"\n                  fillRule=\"evenodd\"\n                  clipRule=\"evenodd\"\n                  d=\"M0.625 7.5C1.70625 4.75625 4.375 2.8125 7.5 2.8125C10.625 2.8125 13.2937 4.75625 14.375 7.5C13.2937 10.2438 10.625 12.1875 7.5 12.1875C4.375 12.1875 1.70625 10.2438 0.625 7.5ZM13.0125 7.5C11.9813 5.39375 9.86878 4.0625 7.50003 4.0625C5.13128 4.0625 3.01878 5.39375 1.98753 7.5C3.01878 9.60625 5.13128 10.9375 7.50003 10.9375C9.86878 10.9375 11.9813 9.60625 13.0125 7.5ZM7.5 5.9375C8.3625 5.9375 9.0625 6.6375 9.0625 7.5C9.0625 8.3625 8.3625 9.0625 7.5 9.0625C6.6375 9.0625 5.9375 8.3625 5.9375 7.5C5.9375 6.6375 6.6375 5.9375 7.5 5.9375ZM4.6875 7.5C4.6875 5.95 5.95 4.6875 7.5 4.6875C9.05 4.6875 10.3125 5.95 10.3125 7.5C10.3125 9.05 9.05 10.3125 7.5 10.3125C5.95 10.3125 4.6875 9.05 4.6875 7.5Z\"\n                  fill=\"white\"\n                />\n              </g>\n            </svg>\n          </button>\n        ),\n      });\n    });\n  console.log(tableDatas);\n\n  const columns = React.useMemo(\n    () => [\n      {\n        Header: \"Loan ID\",\n        accessor: \"col1\", // accessor is the \"key\" in the data\n      },\n      {\n        Header: \"Type\",\n        accessor: \"col2\",\n      },\n      {\n        Header: \"Amount\",\n        accessor: \"col3\",\n      },\n      {\n        Header: \"Date\",\n        accessor: \"col4\",\n      },\n      {\n        Header: \"Action\",\n        accessor: \"col6\",\n      },\n    ],\n    []\n  );\n\n  const {\n    getTableProps,\n    getTableBodyProps,\n    headerGroups,\n    rows,\n    prepareRow,\n  } = useTable({ columns: columns, data: tableDatas });\n\n  if (isLoading) {\n    return (\n      <>\n        <div className=\"w-full m-auto px-8 relative\">\n          <img\n            src=\"/img/loading-gif.gif\"\n            alt=\"\"\n            className=\"w-1/8 m-auto py-20\"\n          />\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <>\n      <main className=\"md:pl-12\">\n        <div className=\"flex \">\n          <div className=\"w-full \">\n            <div className=\"flex items-center mt-10 lg:mt-0\">\n              <div className=\"w-8 h-1 bg-blue-700 rounded mr-0 hidden md:block\"></div>\n              <h4 className=\"bg-blue-700 md:bg-transparent text-white md:text-gray-700 font-light md:font-semibold text-sm md:text-xl tracking-wide uppercase md:normal-case py-2 px-6 rounded-r-lg\">\n                My Loans\n              </h4>\n            </div>\n            <br />\n            {errorMsgs ? (\n              <div\n                className=\"bg-red-100 border-t-4 border-red-500 rounded-b text-red-900 px-4 py-3 shadow-md my-5\"\n                role=\"alert\"\n              >\n                <div className=\"flex\">\n                  <div className=\"py-1\">\n                    <svg\n                      className=\"fill-current h-6 w-6 text-red-500 mr-4\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      viewBox=\"0 0 20 20\"\n                    >\n                      <path d=\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\" />\n                    </svg>\n                  </div>\n                  <div>\n                    {/* <p className=\"font-bold\">Sent successfully</p> */}\n                    {/* <p className=\"text-sm\">{errorMsg}</p> */}\n                    <ul style={{ listStyleType: \"none\" }}>\n                      {console.log(errorMsgs)}\n                      {}\n                      {/* {error.map((error, i) => ( */}\n                      <li>{errorMsgs.response.data.message}</li>\n                      {/* ))} */}\n                    </ul>\n                  </div>\n                </div>\n              </div>\n            ) : (\n              \"\"\n            )}\n            <div className=\"w-11/12 bg-white flex rounded py-12 shadow-lg border-b-4 border-blue-700 md:border-none  mb-20 m-auto md:m-0\">\n              <div className=\"w-full mb-6 px-8 py-6 relative\">\n                <div className=\"-mx-4 sm:-mx-8 px-4 sm:px-8 py-0 md:py-4 overflow-auto  fade-in mt-5 mb-10\">\n                  <div className=\"inline-block min-w-full shadow rounded-lg overflow-hidden\">\n                    <table\n                      {...getTableProps()}\n                      className=\"min-w-full w-full leading-normal\"\n                    >\n                      <thead className=\"flex w-full\">\n                        {headerGroups.map((headerGroup) => (\n                          <tr\n                            {...headerGroup.getHeaderGroupProps()}\n                            className=\"flex w-full\"\n                          >\n                            {headerGroup.headers.map((column) => (\n                              <th\n                                {...column.getHeaderProps()}\n                                // style={{ fontSize: 16 }}\n                                className=\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-center text-sm font-semibold text-gray-600 uppercase tracking-wider\"\n                                //   style={{\n                                //     borderBottom: \"solid 3px red\",\n                                //     background: \"aliceblue\",\n                                //     color: \"black\",\n                                //     fontWeight: \"bold\",\n                                //   }}\n                              >\n                                {column.render(\"Header\")}\n                              </th>\n                            ))}\n                          </tr>\n                        ))}\n                      </thead>\n                      <tbody\n                        {...getTableBodyProps()}\n                        className=\"flex flex-col items-center overflow-y-scroll w-full schedule-table\"\n                      >\n                        {rows.map((row) => {\n                          prepareRow(row);\n                          return (\n                            <tr {...row.getRowProps()} className=\"flex w-full\">\n                              {row.cells.map((cell) => {\n                                return (\n                                  <td\n                                    {...cell.getCellProps()}\n                                    // style={{\n                                    //   padding: \"10px\",\n                                    //   fontSize: 16,\n                                    //   textAlign: \"center\",\n                                    //   paddingBottom: 40,\n                                    // }}\n                                    className=\"p-4 w-1/4 px-5 py-5 text-center border-b border-gray-200 bg-white text-xs md:text-sm text-gray-700\"\n                                  >\n                                    {cell.render(\"Cell\")}\n                                  </td>\n                                );\n                              })}\n                            </tr>\n                          );\n                        })}\n                      </tbody>\n                    </table>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"w-11/12 mt-8 hidden md:block\">\n              <hr className=\"w-9/12 border-t-2 border-blue-600 bg-blue-400 rounded m-auto\"></hr>\n            </div>\n          </div>\n        </div>\n        <br />\n      </main>\n    </>\n  );\n}\n\nexport default withRouter(MyLoans);\n"]},"metadata":{},"sourceType":"module"}