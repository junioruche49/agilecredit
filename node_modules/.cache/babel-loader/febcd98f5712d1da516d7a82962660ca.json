{"ast":null,"code":"import _slicedToArray from\"/Users/mac/Documents/react app/agilecreditportal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useCallback}from'react';export default function DecliningBalanceEqualInstallments(props){var principal=parseFloat(props.amount);var rate=parseFloat(props.rate);var tenor=parseFloat(props.tenor);var tenorInYears=tenor/12;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),schedule=_useState2[0],setSchedule=_useState2[1];var interestRate=rate/100;var monthly=interestRate/12;var repayment=principal*monthly/(1-Math.pow(1+monthly,-tenor));var total=repayment*tenor;var interest=total-principal;var calculateSchedule=useCallback(function(){function fixVal(value,numberOfCharacters,numberOfDecimals,padCharacter){var i,stringObject,stringLength,numberToPad;value=value*Math.pow(10,numberOfDecimals);value=Math.round(value);stringObject=new String(value);stringLength=stringObject.length;// get length of string\nwhile(stringLength<numberOfDecimals){stringObject=\"0\"+stringObject;// add a leading zero\nstringLength=stringLength+1;}if(numberOfDecimals>0){stringObject=stringObject.substring(0,stringLength-numberOfDecimals)+\".\"+stringObject.substring(stringLength-numberOfDecimals,stringLength);}if(stringObject.length<numberOfCharacters&&numberOfCharacters>0){numberToPad=numberOfCharacters-stringObject.length;for(i=0;i<numberToPad;i=i+1){stringObject=padCharacter+stringObject;}}return stringObject;}// let amount=parseFloat(props.amount);\n// let tenor=parseInt(props.tenor);\n// let rate=parseFloat(props.rate);\nvar newPrincipal=principal;var i=1;var data=[];while(i<=tenor){var newInterest=monthly*newPrincipal;var reduction=repayment-newInterest;newPrincipal=newPrincipal-reduction;var innerData={};innerData={\"i\":i,\"repayment\":fixVal(repayment,0,2,' '),\"interest\":fixVal(newInterest,0,2,' '),\"principal\":fixVal(reduction,0,2,' '),\"balance\":fixVal(newPrincipal,0,2,' ')};data.push(innerData);i++;}setSchedule(data);},[monthly,repayment,principal,tenor]);useEffect(function(){calculateSchedule();},[calculateSchedule]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",{className:\"text-gray-700 text-md md:text-xl\"},\" Total Interest: \",/*#__PURE__*/React.createElement(\"span\",{className:\"font-bold\"},\"\\u20A6\",Number(interest).toLocaleString(undefined,{maximumFractionDigits:2}),\" \")),/*#__PURE__*/React.createElement(\"h3\",{className:\"text-gray-700 text-md md:text-xl\"},\" Total Repayment: \",/*#__PURE__*/React.createElement(\"span\",{className:\"font-bold text-green-700\"},\"\\u20A6\",Number(total).toLocaleString(undefined,{maximumFractionDigits:2}),\" \"))),/*#__PURE__*/React.createElement(\"div\",{className:\"-mx-4 sm:-mx-8 px-4 sm:px-8 py-4 overflow-auto  fade-in mt-5 mb-10\"},/*#__PURE__*/React.createElement(\"div\",{className:\"inline-block min-w-full shadow rounded-lg overflow-hidden\"},/*#__PURE__*/React.createElement(\"table\",{className:\"min-w-full w-full leading-normal\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"flex w-full\"},/*#__PURE__*/React.createElement(\"tr\",{className:\"flex w-full\"},/*#__PURE__*/React.createElement(\"th\",{className:\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\"},\"S/N\"),/*#__PURE__*/React.createElement(\"th\",{className:\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider text-center\"},\"Principal (\\u20A6)\"),/*#__PURE__*/React.createElement(\"th\",{className:\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider text-center\"},\"Interest (\\u20A6)\"),/*#__PURE__*/React.createElement(\"th\",{className:\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider text-center\"},\"Repayment (\\u20A6)\"),/*#__PURE__*/React.createElement(\"th\",{className:\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider text-center\"},\"Balance (\\u20A6)\"))),/*#__PURE__*/React.createElement(\"tbody\",{className:\"flex flex-col items-center overflow-y-scroll w-full schedule-table\"},schedule.map(function(s){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"tr\",{className:\"flex w-full\"},/*#__PURE__*/React.createElement(\"td\",{className:\"p-4 w-1/4 px-5 py-5 border-b border-gray-200 bg-white text-sm text-gray-700\"},s.i,\".\"),/*#__PURE__*/React.createElement(\"td\",{className:\"p-4 w-1/4 px-5 py-5 border-b border-gray-200 bg-white text-sm text-gray-700 text-center\"},Number(s.principal).toLocaleString(undefined,{maximumFractionDigits:2})),/*#__PURE__*/React.createElement(\"td\",{className:\"p-4 w-1/4 px-5 py-5 border-b border-gray-200 bg-white text-sm text-gray-700 text-center\"},Number(s.interest).toLocaleString(undefined,{maximumFractionDigits:2})),/*#__PURE__*/React.createElement(\"td\",{className:\"p-4 w-1/4 px-5 py-5 border-b border-gray-200 bg-white text-sm text-green-600 font-bold text-center\"},Number(s.repayment).toLocaleString(undefined,{maximumFractionDigits:2})),/*#__PURE__*/React.createElement(\"td\",{className:\"p-4 w-1/4 px-5 py-5 border-b border-gray-200 bg-white text-sm text-gray-700 text-center\"},Number(s.balance).toLocaleString(undefined,{maximumFractionDigits:2}))));}))))));}","map":{"version":3,"sources":["/Users/mac/Documents/react app/agilecreditportal/src/components/LoanSchedule/DecliningBalanceEqualInstallments.tsx"],"names":["React","useState","useEffect","useCallback","DecliningBalanceEqualInstallments","props","principal","parseFloat","amount","rate","tenor","tenorInYears","schedule","setSchedule","interestRate","monthly","repayment","Math","pow","total","interest","calculateSchedule","fixVal","value","numberOfCharacters","numberOfDecimals","padCharacter","i","stringObject","stringLength","numberToPad","round","String","length","substring","newPrincipal","data","newInterest","reduction","innerData","push","Number","toLocaleString","undefined","maximumFractionDigits","map","s","balance"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useCallback} from 'react';\n\n\nexport default function DecliningBalanceEqualInstallments(props: any) {\n\n    let principal = parseFloat(props.amount);\n    let rate = parseFloat(props.rate);\n    let tenor = parseFloat(props.tenor);\n    let tenorInYears = tenor/12; \n\n    const [schedule, setSchedule] = useState<any[]>([]);\n\n    let interestRate=rate/100;\n    let monthly=interestRate/12;\n    let repayment=((principal*monthly)/(1-Math.pow((1+monthly),-tenor)));\n\n    let total=repayment*tenor;\n    let interest=total-principal;\n\n    const calculateSchedule = useCallback(() => {\n\n        function fixVal(value,numberOfCharacters,numberOfDecimals,padCharacter) { \n            var i, stringObject, stringLength, numberToPad;            \n        \n            value=value*Math.pow(10,numberOfDecimals);                 \n            value=Math.round(value);                                   \n        \n            stringObject=new String(value);                            \n            stringLength=stringObject.length;                          // get length of string\n            while(stringLength<numberOfDecimals) {                     \n                stringObject=\"0\"+stringObject;                     // add a leading zero\n                stringLength=stringLength+1;                       \n            }\n        \n            if(numberOfDecimals>0) {\t\t\t           \n                stringObject=stringObject.substring(0,stringLength-numberOfDecimals)+\".\"+\n                stringObject.substring(stringLength-numberOfDecimals,stringLength);\n            }\n        \n            if (stringObject.length<numberOfCharacters && numberOfCharacters>0) {\n                numberToPad=numberOfCharacters-stringObject.length;      \n                for (i=0; i<numberToPad; i=i+1) {\n                    stringObject=padCharacter+stringObject;\n                }\n            }\n        \n            return stringObject;                                       \n        }\n\n\n        // let amount=parseFloat(props.amount);\n        // let tenor=parseInt(props.tenor);\n        // let rate=parseFloat(props.rate);\n    \n        let newPrincipal=principal;\n\n        \n        let i =1;\n        let data: any[] = [];\n        while (i <= tenor) {\n\n            let newInterest=monthly*newPrincipal;\n\t\t    let reduction=repayment-newInterest;\n            \n            newPrincipal=newPrincipal-reduction;\n            \n            let innerData = {};\n\n            innerData= {\n                \"i\" : i,\n                \"repayment\": fixVal(repayment,0,2,' '),\n                \"interest\": fixVal(newInterest,0,2,' '),\n                \"principal\": fixVal(reduction,0,2,' '),\n                \"balance\": fixVal(newPrincipal,0,2,' ')\n            };\n            data.push(innerData);\n            i++;\n        }\n\n        setSchedule(data);\n        \n\n    }, [monthly, repayment, principal, tenor]);\n\n    useEffect(() => {\n        calculateSchedule();\n    }, [calculateSchedule])\n\n\n    \n\n    return (\n        <>  \n            <div>\n                <h3 className=\"text-gray-700 text-md md:text-xl\"> Total Interest: <span className=\"font-bold\">₦{Number(interest).toLocaleString(undefined, {maximumFractionDigits: 2})} </span></h3>\n                <h3 className=\"text-gray-700 text-md md:text-xl\"> Total Repayment: <span className=\"font-bold text-green-700\">₦{Number(total).toLocaleString(undefined, {maximumFractionDigits: 2})} </span></h3>\n            </div>\n            <div className=\"-mx-4 sm:-mx-8 px-4 sm:px-8 py-4 overflow-auto  fade-in mt-5 mb-10\">\n                <div className=\"inline-block min-w-full shadow rounded-lg overflow-hidden\">\n                    <table className=\"min-w-full w-full leading-normal\">\n                        <thead className=\"flex w-full\">\n                            <tr className=\"flex w-full\">\n                                <th className=\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">S/N</th>\n                                <th className=\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider text-center\">Principal (₦)</th>\n                                <th className=\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider text-center\">Interest (₦)</th>\n                                <th className=\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider text-center\">Repayment (₦)</th>\n                                <th className=\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider text-center\">Balance (₦)</th>\n                            </tr>\n                        </thead>\n                        <tbody className=\"flex flex-col items-center overflow-y-scroll w-full schedule-table\">\n                            {schedule.map((s) => (\n                                <>\n                                    <tr className=\"flex w-full\">\n                                        <td className=\"p-4 w-1/4 px-5 py-5 border-b border-gray-200 bg-white text-sm text-gray-700\">{s.i}.</td>\n                                        <td className=\"p-4 w-1/4 px-5 py-5 border-b border-gray-200 bg-white text-sm text-gray-700 text-center\">{Number(s.principal).toLocaleString(undefined, {maximumFractionDigits: 2})}</td>\n                                        <td className=\"p-4 w-1/4 px-5 py-5 border-b border-gray-200 bg-white text-sm text-gray-700 text-center\">{Number(s.interest).toLocaleString(undefined, {maximumFractionDigits: 2})}</td>\n                                        <td className=\"p-4 w-1/4 px-5 py-5 border-b border-gray-200 bg-white text-sm text-green-600 font-bold text-center\">{Number(s.repayment).toLocaleString(undefined, {maximumFractionDigits: 2})}</td>\n                                        <td className=\"p-4 w-1/4 px-5 py-5 border-b border-gray-200 bg-white text-sm text-gray-700 text-center\">{Number(s.balance).toLocaleString(undefined, {maximumFractionDigits: 2})}</td>\n                                    </tr>\n                                </>\n                            ))}\n                        </tbody>\n                    </table>  \n                </div>\n            </div>\n        </>\n    ) \n\n}"]},"metadata":{},"sourceType":"module"}