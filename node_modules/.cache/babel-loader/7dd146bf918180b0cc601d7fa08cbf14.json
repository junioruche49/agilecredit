{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Documents/react app/agilecreditportal/src/pages/PayWithNewCard.tsx\";\nimport React, { useState, useCallback } from \"react\";\nimport useProfileStore from \"../stores/profileStore\";\nimport { withRouter } from \"react-router-dom\";\nimport { PaystackConsumer } from \"react-paystack\";\n\nconst PayWithNewCard = props => {\n  var _process$env$REACT_AP;\n\n  const [isLoading, setLoading] = useState(false);\n  const profile = useProfileStore(useCallback(state => state.data, []));\n  const amountToPay = props.amount ? Number(props.amount) * 100 : null;\n  const loanId = props.loanId ? props.loanId : null;\n\n  const _handlePrematurePaymentModalClose = () => {\n    props.history.goBack();\n  };\n\n  const psConfig = {\n    reference: new Date().getTime().toString(),\n    email: profile.e_mail,\n    amount: Number(amountToPay),\n    publicKey: (_process$env$REACT_AP = process.env.REACT_APP_PAYSTACK_PUBLIC_KEY) !== null && _process$env$REACT_AP !== void 0 ? _process$env$REACT_AP : \"\"\n  };\n  const componentProps = { ...psConfig,\n    text: \"Proceed to pay\",\n    onSuccess: transaction => {\n      props.history.replace({\n        pathname: \"/pay/process\",\n        referrerData: {\n          amount: Number(amountToPay),\n          payment_type: 2,\n          item_id: loanId,\n          reference: transaction.reference\n        }\n      });\n    },\n    onClose: _handlePrematurePaymentModalClose\n  };\n\n  if (isLoading || !profile.e_mail) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"/img/loading-gif.gif\",\n      alt: \"\",\n      className: \"w-1/8 m-auto py-10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"h6\", {\n      className: \"m-auto text-lg text-gray-700 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }\n    }, \"Please wait while we process your request...\"));\n  }\n\n  if (amountToPay === null || loanId === null) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-11/12 bg-white rounded py-12 m-auto px-4 relative mt-20\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"/img/error-icon.svg\",\n      alt: \"\",\n      className: \"w-2/4 md:w-1/4 m-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"h6\", {\n      className: \"m-auto text-lg text-red-600 text-center font-semibold mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }\n    }, \"Ooops! The system was unable to capture one or more of your payment data. Please try again!\")));\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(PaystackConsumer, Object.assign({}, componentProps, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }), ({\n    initializePayment\n  }) => /*#__PURE__*/React.createElement(React.Fragment, null, initializePayment())), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-11/12 bg-white rounded py-6 md:py-12 border-b-4 border-blue-700 md:border-none mb-20 m-auto md:m-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"block text-green-600 text-sm md:text-lg font-semibold mb-6 fade-in text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, \"Communicating with the payment gateway...\")));\n};\n\nexport default withRouter(PayWithNewCard);","map":{"version":3,"sources":["/Users/mac/Documents/react app/agilecreditportal/src/pages/PayWithNewCard.tsx"],"names":["React","useState","useCallback","useProfileStore","withRouter","PaystackConsumer","PayWithNewCard","props","isLoading","setLoading","profile","state","data","amountToPay","amount","Number","loanId","_handlePrematurePaymentModalClose","history","goBack","psConfig","reference","Date","getTime","toString","email","e_mail","publicKey","process","env","REACT_APP_PAYSTACK_PUBLIC_KEY","componentProps","text","onSuccess","transaction","replace","pathname","referrerData","payment_type","item_id","onClose","initializePayment"],"mappings":"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","sourcesContent":["import React, { useState, useCallback, useEffect } from \"react\";\nimport useAuthStore from \"../stores/authStore\";\nimport useProfileStore from \"../stores/profileStore\";\nimport { withRouter } from \"react-router-dom\";\nimport { PaystackConsumer } from \"react-paystack\";\n\nconst PayWithNewCard = (props: any) => {\n  const [isLoading, setLoading] = useState(false);\n  const profile: any = useProfileStore(useCallback((state) => state.data, []));\n\n  const amountToPay = props.amount ? Number(props.amount) * 100 : null;\n  const loanId = props.loanId ? props.loanId : null;\n\n\n  const _handlePrematurePaymentModalClose = () => {\n    props.history.goBack();\n  };\n\n  const psConfig = {\n    reference: new Date().getTime().toString(),\n    email: profile.e_mail,\n    amount: Number(amountToPay),\n    publicKey: process.env.REACT_APP_PAYSTACK_PUBLIC_KEY ?? \"\",\n  };\n\n  const componentProps = {\n    ...psConfig,\n    text: \"Proceed to pay\",\n    onSuccess: (transaction) => {\n      props.history.replace({\n        pathname: \"/pay/process\",\n        referrerData: {\n          amount: Number(amountToPay),\n          payment_type: 2,\n          item_id: loanId,\n          reference: transaction.reference,\n        },\n      });\n    },\n    onClose: _handlePrematurePaymentModalClose,\n  };\n\n  if (isLoading || !profile.e_mail) {\n    return (\n      <>\n        <img src=\"/img/loading-gif.gif\" alt=\"\" className=\"w-1/8 m-auto py-10\" />\n        <h6 className=\"m-auto text-lg text-gray-700 text-center\">\n          Please wait while we process your request...\n        </h6>\n      </>\n    );\n  }\n\n  if (amountToPay === null || loanId === null) {\n    return (\n      <>\n        <div className=\"w-11/12 bg-white rounded py-12 m-auto px-4 relative mt-20\">\n          <img\n            src=\"/img/error-icon.svg\"\n            alt=\"\"\n            className=\"w-2/4 md:w-1/4 m-auto\"\n          />\n          <h6 className=\"m-auto text-lg text-red-600 text-center font-semibold mt-4\">\n            Ooops! The system was unable to capture one or more of your payment\n            data. Please try again!\n          </h6>\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <>\n      <PaystackConsumer {...componentProps}>\n        {({ initializePayment }) => (\n          <>\n            {initializePayment()}\n          </>\n        )}\n      </PaystackConsumer>\n      <div className=\"w-11/12 bg-white rounded py-6 md:py-12 border-b-4 border-blue-700 md:border-none mb-20 m-auto md:m-0\">\n        <h3 className=\"block text-green-600 text-sm md:text-lg font-semibold mb-6 fade-in text-center\">\n          Communicating with the payment gateway...\n        </h3>\n      </div>\n    </>\n  );\n};\n\nexport default withRouter(PayWithNewCard);\n"]},"metadata":{},"sourceType":"module"}