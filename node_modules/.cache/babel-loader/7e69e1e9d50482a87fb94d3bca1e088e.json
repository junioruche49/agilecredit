{"ast":null,"code":"import _objectSpread from\"/Users/mac/Documents/react app/agilecreditportal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import axios from\"axios\";import keycloak from\"../auth/keycloak\";export default function apiHandler(){var token=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var axiosInstance=axios.create(_objectSpread({baseURL:process.env.REACT_APP_APP_BASE_URL},token?{headers:{Authorization:\"Bearer \".concat(token),\"Access-Control-Allow-Origin\":\"*\"}}:{}));axiosInstance.interceptors.response.use(function(response){return response;},function(error){if(error.response&&error.response.status==401){keycloak.logout();return;}return Promise.reject(error);});return axiosInstance;}","map":{"version":3,"sources":["/Users/mac/Documents/react app/agilecreditportal/src/clients/base.js"],"names":["axios","keycloak","apiHandler","token","axiosInstance","create","baseURL","process","env","REACT_APP_APP_BASE_URL","headers","Authorization","interceptors","response","use","error","status","logout","Promise","reject"],"mappings":"sKAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,kBAArB,CAEA,cAAe,SAASC,CAAAA,UAAT,EAAkC,IAAdC,CAAAA,KAAc,2DAAN,IAAM,CAC/C,GAAMC,CAAAA,aAAa,CAAGJ,KAAK,CAACK,MAAN,gBACpBC,OAAO,CAAEC,OAAO,CAACC,GAAR,CAAYC,sBADD,EAEhBN,KAAK,CACL,CACEO,OAAO,CAAE,CACPC,aAAa,kBAAYR,KAAZ,CADN,CAEP,8BAA+B,GAFxB,CADX,CADK,CAOL,EATgB,EAAtB,CAYAC,aAAa,CAACQ,YAAd,CAA2BC,QAA3B,CAAoCC,GAApC,CACE,SAAUD,QAAV,CAAoB,CAClB,MAAOA,CAAAA,QAAP,CACD,CAHH,CAIE,SAAUE,KAAV,CAAiB,CACf,GAAIA,KAAK,CAACF,QAAN,EAAkBE,KAAK,CAACF,QAAN,CAAeG,MAAf,EAAyB,GAA/C,CAAoD,CAClDf,QAAQ,CAACgB,MAAT,GACA,OACD,CACD,MAAOC,CAAAA,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP,CACD,CAVH,EAaA,MAAOX,CAAAA,aAAP,CACD","sourcesContent":["import axios from \"axios\";\nimport keycloak from \"../auth/keycloak\";\n\nexport default function apiHandler(token = null) {\n  const axiosInstance = axios.create({\n    baseURL: process.env.REACT_APP_APP_BASE_URL,\n    ...(token\n      ? {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            \"Access-Control-Allow-Origin\": \"*\",\n          },\n        }\n      : {}),\n  });\n\n  axiosInstance.interceptors.response.use(\n    function (response) {\n      return response;\n    },\n    function (error) {\n      if (error.response && error.response.status == 401) {\n        keycloak.logout();\n        return;\n      }\n      return Promise.reject(error);\n    }\n  );\n\n  return axiosInstance;\n}\n"]},"metadata":{},"sourceType":"module"}