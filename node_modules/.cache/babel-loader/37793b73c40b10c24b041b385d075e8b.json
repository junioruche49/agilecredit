{"ast":null,"code":"import _slicedToArray from\"/Users/mac/Documents/react app/agilecreditportal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{withRouter}from\"react-router\";import{getLoanApplications}from\"../clients/loan\";import{getProducts}from\"../clients/products\";import{useQuery}from\"react-query\";import useAuthStore from\"../stores/authStore\";var LoanRequests=function LoanRequests(props){var _data$data;var token=useAuthStore(function(state){return state.accessToken;});var _useState=useState(false),_useState2=_slicedToArray(_useState,2),rejectionMessageVisible=_useState2[0],setRejectionMessageVisible=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),rejectionData=_useState4[0],setRejectionData=_useState4[1];var _useQuery=useQuery(\"applications\",function(){return getLoanApplications(token);}),isLoading=_useQuery.isLoading,error=_useQuery.error,data=_useQuery.data;var _useQuery2=useQuery(\"products\",function(){return getProducts(token);}),isProductLoading=_useQuery2.isLoading,productError=_useQuery2.error,productData=_useQuery2.data;var getProductName=function getProductName(productNo){var products=productData===null||productData===void 0?void 0:productData.data;if(!products){return;}var currentProduct=products.find(function(prod){return prod.no===productNo;});return currentProduct.description;};var statusClass=function statusClass(status){switch(status){case\"Pending\":return/*#__PURE__*/React.createElement(\"span\",{className:\"relative inline-block px-3 py-1 font-semibold text-orange-900 leading-tight\"},/*#__PURE__*/React.createElement(\"span\",{\"aria-hidden\":true,className:\"absolute inset-0 bg-orange-200 opacity-50 rounded-full\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"relative\"},status));case\"Rejected\":return/*#__PURE__*/React.createElement(\"span\",{className:\"relative inline-block px-3 py-1 font-semibold text-red-900 leading-tight\"},/*#__PURE__*/React.createElement(\"span\",{\"aria-hidden\":true,className:\"absolute inset-0 bg-red-200 opacity-50 rounded-full\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"relative\"},status));default:return/*#__PURE__*/React.createElement(\"span\",{className:\"relative inline-block px-3 py-1 font-semibold text-green-900 leading-tight\"},/*#__PURE__*/React.createElement(\"span\",{\"aria-hidden\":true,className:\"absolute inset-0 bg-green-200 opacity-50 rounded-full\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"relative\"},status));}};var _handleRejectionMessage=function _handleRejectionMessage(data){setRejectionData(data);setRejectionMessageVisible(true);setTimeout(function(){setRejectionData({});setRejectionMessageVisible(false);},10000);};if(isLoading||isProductLoading){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"w-full m-auto px-8 relative\"},/*#__PURE__*/React.createElement(\"img\",{src:\"/img/loading-gif.gif\",alt:\"\",className:\"w-1/8 m-auto py-20\"})));}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"main\",{className:\"md:pl-12 set-bg\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex \"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-full \"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex items-center mt-10 lg:mt-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-8 h-1 bg-blue-700 rounded mr-0 hidden md:block\"}),/*#__PURE__*/React.createElement(\"h4\",{className:\"bg-blue-700 md:bg-transparent text-white md:text-gray-700 font-normal md:font-semibold text-md md:text-xl tracking-wide uppercase md:normal-case py-2 px-6 rounded-r-lg\"},\"My Applications\")),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"w-11/12 bg-white flex rounded py-0 md:py-4 shadow-lg md:border-t-8 md:border-blue-600 mb-0 md:mb-20 m-auto md:m-0 rounded-t-3xl\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-full mb-6 px-8 py-6 relative\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"block text-blue-800 text-lg font-bold mb-6 fade-in\"},\"Recent loan applications:\"),(data===null||data===void 0?void 0:(_data$data=data.data)===null||_data$data===void 0?void 0:_data$data.length)>0?/*#__PURE__*/React.createElement(\"div\",{className:\"-mx-4 sm:-mx-8 px-4 sm:px-8 py-0 md:py-4 overflow-auto  fade-in mt-5 mb-10\"},rejectionMessageVisible?/*#__PURE__*/React.createElement(\"div\",{className:\"flex w-full bg-red-100 shadow-lg rounded-lg mb-4 fade-in\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-2 bg-red-600\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"flex items-center px-2 py-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mx-3\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"text-xl font-semibold text-red-600\"},\"Applied for \\u20A6\",Number(rejectionData===null||rejectionData===void 0?void 0:rejectionData.loan_amount).toLocaleString(undefined,{maximumFractionDigits:2})),/*#__PURE__*/React.createElement(\"p\",{className:\"text-gray-600\"},/*#__PURE__*/React.createElement(\"p\",{className:\"font-semibold\"},\"Rejection message:\",\" \"),/*#__PURE__*/React.createElement(\"p\",null,rejectionData===null||rejectionData===void 0?void 0:rejectionData.message))))):null,/*#__PURE__*/React.createElement(\"div\",{className:\"inline-block min-w-full shadow rounded-lg overflow-hidden\"},/*#__PURE__*/React.createElement(\"table\",{className:\"min-w-full w-full leading-normal\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"flex w-full\"},/*#__PURE__*/React.createElement(\"tr\",{className:\"flex w-full\"},/*#__PURE__*/React.createElement(\"th\",{className:\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\"},\"Date\"),/*#__PURE__*/React.createElement(\"th\",{className:\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\"},\"Loan Type\"),/*#__PURE__*/React.createElement(\"th\",{className:\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider text-center\"},\"Amount\"),/*#__PURE__*/React.createElement(\"th\",{className:\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider text-center\"},\"Duration\"),/*#__PURE__*/React.createElement(\"th\",{className:\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider text-center\"},\"Status\"))),/*#__PURE__*/React.createElement(\"tbody\",{className:\"flex flex-col items-center overflow-y-scroll w-full schedule-table\"},data&&data.data.map(function(d){return/*#__PURE__*/React.createElement(\"tr\",{className:\"flex w-full\"},/*#__PURE__*/React.createElement(\"td\",{className:\"p-4 w-1/4 px-5 py-5 border-b border-gray-200 bg-white text-xs md:text-sm text-gray-700\"},new Date(d.created_at).toDateString()),/*#__PURE__*/React.createElement(\"td\",{className:\"p-4 w-1/4 px-5 py-5 border-b border-gray-200 bg-white text-xs md:text-sm text-gray-700\"},getProductName(d.product_code)),/*#__PURE__*/React.createElement(\"td\",{className:\"p-4 w-1/4 px-5 py-5 border-b border-gray-200 bg-white text-xs md:text-sm text-green-600 font-bold text-center\"},\"\\u20A6\",Number(d.loan_amount).toLocaleString(undefined,{maximumFractionDigits:2})),/*#__PURE__*/React.createElement(\"td\",{className:\"p-4 w-1/4 px-5 py-5 border-b border-gray-200 bg-white text-xs md:text-sm text-gray-700 text-center\"},d.number_of_payments,\" months\"),/*#__PURE__*/React.createElement(\"td\",{className:\"p-4 w-1/4 px-5 py-5 border-b border-gray-200 bg-white text-xs md:text-sm text-green-600 font-bold text-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex justify-center\"},statusClass(d.status),d.status.trim()===\"Rejected\"?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"flex bg-blue-100 hover:bg-blue-200 items-center py-1 px-1 rounded transition-colors duration-150 ease-in-out cursor-pointer\",onClick:function onClick(){return _handleRejectionMessage(d);}},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"svg\",{width:\"12\",height:\"12\",viewBox:\"0 0 24 25\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"g\",{id:\"alert/notification_important_24px\"},/*#__PURE__*/React.createElement(\"path\",{id:\"icon/outlined/alert/notification_important_24px\",\"fill-rule\":\"evenodd\",\"clip-rule\":\"evenodd\",d:\"M10.5 2.75C10.5 1.92 11.17 1.25 12 1.25C12.83 1.25 13.5 1.92 13.5 2.75V3.92C16.64 4.6 19 7.4 19 10.75V16.75L21 18.75V19.75H3V18.75L5 16.75V10.75C5 7.4 7.36 4.6 10.5 3.92V2.75ZM12 5.75C14.76 5.75 17 7.99 17 10.75V17.75H7V10.75C7 7.99 9.24 5.75 12 5.75ZM10.01 20.76C10.01 21.86 10.9 22.75 12 22.75C13.1 22.75 13.99 21.86 13.99 20.76H10.01ZM13 7.75V11.75H11V7.75H13ZM13 15.75V13.75H11V15.75H13Z\",fill:\"#0A54A2\"})))))):null)));}))))):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"w-full m-auto mb-6\"},/*#__PURE__*/React.createElement(\"img\",{src:\"/img/check-files.svg\",alt:\"\",className:\"w-3/4 md:w-1/3 m-auto opacity-50\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"w-3/4 m-auto\"},/*#__PURE__*/React.createElement(\"p\",{className:\"text-gray-700 font-medium text-center my-6\"},\"You have not requested for any loan so far...\"),/*#__PURE__*/React.createElement(\"div\",{className:\"w-full mb-8 lg:mb-16 m-auto text-center\"},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return props.history.push(\"/new-loan-request\");},className:\"inline-flex m-auto shadow-xl text-xl text-white px-8 lg:px-10 py-2 lg:py-3 items-center bg-blue-700 rounded-md hover:bg-blue-600 transition-colors duration-150 ease-in-out\"},/*#__PURE__*/React.createElement(\"svg\",{width:\"24\",height:\"25\",viewBox:\"0 0 24 25\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"g\",{id:\"add_24px\"},/*#__PURE__*/React.createElement(\"path\",{id:\"icon/content/add_24px\",d:\"M19 13.3832H13V19.229H11V13.3832H5V11.4346H11V5.58878H13V11.4346H19V13.3832Z\",fill:\"white\"}))),/*#__PURE__*/React.createElement(\"span\",{className:\"ml-2 text-lg font-normal\"},\"Take a loan\"))))))))),/*#__PURE__*/React.createElement(\"br\",null)));};export default withRouter(LoanRequests);","map":{"version":3,"sources":["/Users/mac/Documents/react app/agilecreditportal/src/pages/LoanRequests.tsx"],"names":["React","useState","withRouter","getLoanApplications","getProducts","useQuery","useAuthStore","LoanRequests","props","token","state","accessToken","rejectionMessageVisible","setRejectionMessageVisible","rejectionData","setRejectionData","isLoading","error","data","isProductLoading","productError","productData","getProductName","productNo","products","currentProduct","find","prod","no","description","statusClass","status","_handleRejectionMessage","setTimeout","length","Number","loan_amount","toLocaleString","undefined","maximumFractionDigits","message","map","d","Date","created_at","toDateString","product_code","number_of_payments","trim","history","push"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { withRouter } from \"react-router\";\nimport { getLoanApplications } from \"../clients/loan\";\nimport { getProducts } from \"../clients/products\";\nimport { useQuery } from \"react-query\";\nimport useAuthStore from \"../stores/authStore\";\n\nconst LoanRequests = (props: any) => {\n  const token = useAuthStore((state) => state.accessToken);\n  const [rejectionMessageVisible, setRejectionMessageVisible] = useState(false);\n  const [rejectionData, setRejectionData]: any = useState({});\n\n  const { isLoading, error, data } = useQuery(\"applications\", () =>\n    getLoanApplications(token)\n  );\n\n  const {\n    isLoading: isProductLoading,\n    error: productError,\n    data: productData,\n  } = useQuery(\"products\", () => getProducts(token));\n\n  const getProductName = (productNo) => {\n    let products: any[] | null = productData?.data;\n\n    if (!products) {\n      return;\n    }\n    let currentProduct = products.find((prod) => prod.no === productNo);\n\n    return currentProduct.description;\n  };\n\n  const statusClass = (status) => {\n    switch (status) {\n      case \"Pending\":\n        return (\n          <span className=\"relative inline-block px-3 py-1 font-semibold text-orange-900 leading-tight\">\n            <span\n              aria-hidden\n              className=\"absolute inset-0 bg-orange-200 opacity-50 rounded-full\"\n            ></span>\n            <span className=\"relative\">{status}</span>\n          </span>\n        );\n      case \"Rejected\":\n        return (\n          <span className=\"relative inline-block px-3 py-1 font-semibold text-red-900 leading-tight\">\n            <span\n              aria-hidden\n              className=\"absolute inset-0 bg-red-200 opacity-50 rounded-full\"\n            ></span>\n            <span className=\"relative\">{status}</span>\n          </span>\n        );\n      default:\n        return (\n          <span className=\"relative inline-block px-3 py-1 font-semibold text-green-900 leading-tight\">\n            <span\n              aria-hidden\n              className=\"absolute inset-0 bg-green-200 opacity-50 rounded-full\"\n            ></span>\n            <span className=\"relative\">{status}</span>\n          </span>\n        );\n    }\n  };\n\n  const _handleRejectionMessage = (data) => {\n    setRejectionData(data);\n    setRejectionMessageVisible(true);\n\n    setTimeout(() => {\n      setRejectionData({});\n      setRejectionMessageVisible(false);\n    }, 10000);\n  };\n\n  if (isLoading || isProductLoading) {\n    return (\n      <>\n        <div className=\"w-full m-auto px-8 relative\">\n          <img\n            src=\"/img/loading-gif.gif\"\n            alt=\"\"\n            className=\"w-1/8 m-auto py-20\"\n          />\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <>\n      <main className=\"md:pl-12 set-bg\">\n        <div className=\"flex \">\n          <div className=\"w-full \">\n            <div className=\"flex items-center mt-10 lg:mt-0\">\n              <div className=\"w-8 h-1 bg-blue-700 rounded mr-0 hidden md:block\"></div>\n              <h4 className=\"bg-blue-700 md:bg-transparent text-white md:text-gray-700 font-normal md:font-semibold text-md md:text-xl tracking-wide uppercase md:normal-case py-2 px-6 rounded-r-lg\">\n                My Applications\n              </h4>\n            </div>\n            <br />\n\n            <div className=\"w-11/12 bg-white flex rounded py-0 md:py-4 shadow-lg md:border-t-8 md:border-blue-600 mb-0 md:mb-20 m-auto md:m-0 rounded-t-3xl\">\n              <div className=\"w-full mb-6 px-8 py-6 relative\">\n                <h1 className=\"block text-blue-800 text-lg font-bold mb-6 fade-in\">\n                  Recent loan applications:\n                </h1>\n\n                {data?.data?.length > 0 ? (\n                  <div className=\"-mx-4 sm:-mx-8 px-4 sm:px-8 py-0 md:py-4 overflow-auto  fade-in mt-5 mb-10\">\n                    {rejectionMessageVisible ? (\n                      <div className=\"flex w-full bg-red-100 shadow-lg rounded-lg mb-4 fade-in\">\n                        <div className=\"w-2 bg-red-600\"></div>\n                        <div className=\"flex items-center px-2 py-3\">\n                          <div className=\"mx-3\">\n                            <h2 className=\"text-xl font-semibold text-red-600\">\n                              Applied for ₦\n                              {Number(\n                                rejectionData?.loan_amount\n                              ).toLocaleString(undefined, {\n                                maximumFractionDigits: 2,\n                              })}\n                            </h2>\n                            <p className=\"text-gray-600\">\n                              <p className=\"font-semibold\">\n                                Rejection message:{\" \"}\n                              </p>\n                              <p>{rejectionData?.message}</p>\n                            </p>\n                          </div>\n                        </div>\n                      </div>\n                    ) : null}\n                    <div className=\"inline-block min-w-full shadow rounded-lg overflow-hidden\">\n                      <table className=\"min-w-full w-full leading-normal\">\n                        <thead className=\"flex w-full\">\n                          <tr className=\"flex w-full\">\n                            <th className=\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                              Date\n                            </th>\n                            <th className=\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                              Loan Type\n                            </th>\n                            <th className=\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider text-center\">\n                              Amount\n                            </th>\n                            <th className=\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider text-center\">\n                              Duration\n                            </th>\n                            <th className=\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider text-center\">\n                              Status\n                            </th>\n                          </tr>\n                        </thead>\n                        <tbody className=\"flex flex-col items-center overflow-y-scroll w-full schedule-table\">\n                          {data &&\n                            data.data.map((d) => (\n                              <tr className=\"flex w-full\">\n                                <td className=\"p-4 w-1/4 px-5 py-5 border-b border-gray-200 bg-white text-xs md:text-sm text-gray-700\">\n                                  {new Date(d.created_at).toDateString()}\n                                </td>\n                                <td className=\"p-4 w-1/4 px-5 py-5 border-b border-gray-200 bg-white text-xs md:text-sm text-gray-700\">\n                                  {getProductName(d.product_code)}\n                                </td>\n                                <td className=\"p-4 w-1/4 px-5 py-5 border-b border-gray-200 bg-white text-xs md:text-sm text-green-600 font-bold text-center\">\n                                  ₦\n                                  {Number(d.loan_amount).toLocaleString(\n                                    undefined,\n                                    {\n                                      maximumFractionDigits: 2,\n                                    }\n                                  )}\n                                </td>\n                                <td className=\"p-4 w-1/4 px-5 py-5 border-b border-gray-200 bg-white text-xs md:text-sm text-gray-700 text-center\">\n                                  {d.number_of_payments} months\n                                </td>\n                                <td className=\"p-4 w-1/4 px-5 py-5 border-b border-gray-200 bg-white text-xs md:text-sm text-green-600 font-bold text-center\">\n                                  <div className=\"flex justify-center\">\n                                    {statusClass(d.status)}\n                                    {d.status.trim() === \"Rejected\" ? (\n                                      <div>\n                                        <button\n                                          className=\"flex bg-blue-100 hover:bg-blue-200 items-center py-1 px-1 rounded transition-colors duration-150 ease-in-out cursor-pointer\"\n                                          onClick={() =>\n                                            _handleRejectionMessage(d)\n                                          }\n                                        >\n                                          <div>\n                                            <svg\n                                              width=\"12\"\n                                              height=\"12\"\n                                              viewBox=\"0 0 24 25\"\n                                              fill=\"none\"\n                                              xmlns=\"http://www.w3.org/2000/svg\"\n                                            >\n                                              <g id=\"alert/notification_important_24px\">\n                                                <path\n                                                  id=\"icon/outlined/alert/notification_important_24px\"\n                                                  fill-rule=\"evenodd\"\n                                                  clip-rule=\"evenodd\"\n                                                  d=\"M10.5 2.75C10.5 1.92 11.17 1.25 12 1.25C12.83 1.25 13.5 1.92 13.5 2.75V3.92C16.64 4.6 19 7.4 19 10.75V16.75L21 18.75V19.75H3V18.75L5 16.75V10.75C5 7.4 7.36 4.6 10.5 3.92V2.75ZM12 5.75C14.76 5.75 17 7.99 17 10.75V17.75H7V10.75C7 7.99 9.24 5.75 12 5.75ZM10.01 20.76C10.01 21.86 10.9 22.75 12 22.75C13.1 22.75 13.99 21.86 13.99 20.76H10.01ZM13 7.75V11.75H11V7.75H13ZM13 15.75V13.75H11V15.75H13Z\"\n                                                  fill=\"#0A54A2\"\n                                                />\n                                              </g>\n                                            </svg>\n                                          </div>\n                                        </button>\n                                      </div>\n                                    ) : null}\n                                  </div>\n                                </td>\n                              </tr>\n                            ))}\n                        </tbody>\n                      </table>\n                    </div>\n                  </div>\n                ) : (\n                  <>\n                    <div className=\"w-full m-auto mb-6\">\n                      <img\n                        src=\"/img/check-files.svg\"\n                        alt=\"\"\n                        className=\"w-3/4 md:w-1/3 m-auto opacity-50\"\n                      />\n                    </div>\n                    <div className=\"w-3/4 m-auto\">\n                      <p className=\"text-gray-700 font-medium text-center my-6\">\n                        You have not requested for any loan so far...\n                      </p>\n                      <div className=\"w-full mb-8 lg:mb-16 m-auto text-center\">\n                        <button\n                          onClick={() =>\n                            props.history.push(\"/new-loan-request\")\n                          }\n                          className=\"inline-flex m-auto shadow-xl text-xl text-white px-8 lg:px-10 py-2 lg:py-3 items-center bg-blue-700 rounded-md hover:bg-blue-600 transition-colors duration-150 ease-in-out\"\n                        >\n                          <svg\n                            width=\"24\"\n                            height=\"25\"\n                            viewBox=\"0 0 24 25\"\n                            fill=\"none\"\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                          >\n                            <g id=\"add_24px\">\n                              <path\n                                id=\"icon/content/add_24px\"\n                                d=\"M19 13.3832H13V19.229H11V13.3832H5V11.4346H11V5.58878H13V11.4346H19V13.3832Z\"\n                                fill=\"white\"\n                              />\n                            </g>\n                          </svg>\n                          <span className=\"ml-2 text-lg font-normal\">\n                            Take a loan\n                          </span>\n                        </button>\n                      </div>\n                    </div>\n                  </>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n        <br />\n      </main>\n    </>\n  );\n};\n\nexport default withRouter(LoanRequests);\n"]},"metadata":{},"sourceType":"module"}