{"ast":null,"code":"import React from\"react\";import{useTable}from\"react-table\";import{useParams}from\"react-router-dom\";import{getLoan}from\"../clients/loan\";import{useQuery}from\"react-query\";import useAuthStore from\"../stores/authStore\";import{withRouter}from\"react-router\";// import 'bootstrap/dist/css/bootstrap.css';\nfunction LoanDetails(props){var token=useAuthStore(function(state){return state.accessToken;});var _useParams=useParams(),loanId=_useParams.loanId;var _useQuery=useQuery(\"loanDetail\",function(){return getLoan(token,loanId);}),isLoading=_useQuery.isLoading,error=_useQuery.error,loan=_useQuery.data;var statusClass=function statusClass(status){switch(status){case\"Pending\":return/*#__PURE__*/React.createElement(\"span\",{className:\"relative inline-block px-3 py-1 font-semibold text-orange-900 leading-tight\"},/*#__PURE__*/React.createElement(\"span\",{\"aria-hidden\":true,className:\"absolute inset-0 bg-orange-200 opacity-50 rounded-full\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"relative\"},status));case\"Rejected\":return/*#__PURE__*/React.createElement(\"span\",{className:\"relative inline-block px-3 py-1 font-semibold text-red-900 leading-tight\"},/*#__PURE__*/React.createElement(\"span\",{\"aria-hidden\":true,className:\"absolute inset-0 bg-red-200 opacity-50 rounded-full\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"relative\"},status));default:return/*#__PURE__*/React.createElement(\"span\",{className:\"relative inline-block px-3 py-1 font-semibold text-green-900 leading-tight\"},/*#__PURE__*/React.createElement(\"span\",{\"aria-hidden\":true,className:\"absolute inset-0 bg-green-200 opacity-50 rounded-full\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"relative\"},status));}};var loanData=loan&&loan.data;var loanDatas=[];loan&&loanData[\"schedules\"].map(function(item){loanDatas.push({col1:item.id,col2:/*#__PURE__*/React.createElement(\"span\",{className:\"text-green-600 font-bold\"},\"\\u20A6\",Number(item.repayment).toLocaleString(undefined,{maximumFractionDigits:2})),col3:new Date(item.schedule_date).toDateString(),col4:statusClass(item.payment_status)});});var data=React.useMemo(function(){return[// {\n];},[]);var columns=React.useMemo(function(){return[{Header:\"S/N\",accessor:\"col1\"// accessor is the \"key\" in the data\n},{Header:\"Opening Balance\",accessor:\"col2\"},{Header:\"Due Date\",accessor:\"col3\"},{Header:\"Status\",accessor:\"col4\"}];},[]);var _useTable=useTable({columns:columns,data:loanDatas}),getTableProps=_useTable.getTableProps,getTableBodyProps=_useTable.getTableBodyProps,headerGroups=_useTable.headerGroups,rows=_useTable.rows,prepareRow=_useTable.prepareRow;if(isLoading){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"w-full m-auto px-8 relative\"},/*#__PURE__*/React.createElement(\"img\",{src:\"/img/loading-gif.gif\",alt:\"\",className:\"w-1/8 m-auto py-20\"})));}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"main\",{className:\"md:pl-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex \"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-full \"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex items-center mt-10 lg:mt-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-8 h-1 bg-blue-700 rounded mr-0 hidden md:block\"}),/*#__PURE__*/React.createElement(\"h4\",{className:\"bg-blue-700 md:bg-transparent text-white md:text-gray-700 font-light md:font-semibold text-sm md:text-xl tracking-wide uppercase md:normal-case py-2 px-6 rounded-r-lg\"},\"Loan Details\")),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"w-11/12 bg-white flex flex-col sm:flex-row rounded py-6 shadow-lg border-b-4 border-blue-700 md:border-none pl-4 sm:mb-20 m-auto md:m-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-full sm:w-1/4 text-center  sm:border-r-8 sm:border-blue-100 align-middle justify-center\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"text-blue-700 xl:text-4xl font-semibold py-5 pl-3 lg:text-2xl\"},loanData.loan_id)),/*#__PURE__*/React.createElement(\"div\",{className:\"w-full sm:w-1/4 flex-row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex flex-row text-blue-700 xl:text-lg lg:text-sm mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-1/2 text-right mr-5 \"},\"Amount: \"),/*#__PURE__*/React.createElement(\"div\",{className:\"w-1/2 text-left font-bold\"},\"\\u20A6\",Number(loanData.loan_amount).toLocaleString(undefined,{maximumFractionDigits:2}))),/*#__PURE__*/React.createElement(\"div\",{className:\"flex flex-row text-blue-700 xl:text-lg lg:text-sm\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-1/2 text-right mr-5 \"},\"Duration:\"),/*#__PURE__*/React.createElement(\"div\",{className:\"w-1/2 text-left font-bold\"},loanData.number_of_payments,\" months\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"w-full sm:w-1/4 flex flex-col  \"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-full mb-4 text-center \"},/*#__PURE__*/React.createElement(\"p\",{style:{fontSize:8},className:\"text-center w-1/3 lg:float-right text-teal-600 bg-teal-100 py-2  rounded-full m-auto lg:m-px\"},loanData.status)),/*#__PURE__*/React.createElement(\"div\",{className:\"flex flex-row text-blue-700 xl:text-lg lg:text-sm\"},/*#__PURE__*/React.createElement(\"p\",{className:\"w-1/2 text-right mr-5\"},\"Repayment\"),/*#__PURE__*/React.createElement(\"p\",{className:\"w-1/2 text-left lg:text-right font-bold\"},\"\\u20A6\",loanData[\"schedules\"].length?Number(loanData[\"schedules\"][0][\"repayment\"]).toLocaleString(undefined,{maximumFractionDigits:2}):\"\"))),/*#__PURE__*/React.createElement(\"div\",{style:{alignItems:\"center\"},className:\"w-full sm:w-1/4 justify-center flex sm:justify-end align-middle \"},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return props.history.push(\"/pay/\"+loanId);},className:\"bg-green-700 text-white inline-flex sm:-mr-6 px-6 py-3 rounded\"},/*#__PURE__*/React.createElement(\"span\",{className:\"xl:text-lg lg:text-sm\"},\"Make Payment\"),/*#__PURE__*/React.createElement(\"svg\",{className:\"mt-1\",width:\"14\",height:\"14\",viewBox:\"0 0 18 18\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"g\",{id:\"chevron_right_24px\"},/*#__PURE__*/React.createElement(\"path\",{id:\"icon/navigation/chevron_right_24px\",d:\"M9.70492 6L8.29492 7.41L12.8749 12L8.29492 16.59L9.70492 18L15.7049 12L9.70492 6Z\",fill:\"white\"})))))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"flex items-center mt-10 lg:mt-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-8 h-1 bg-blue-700 rounded mr-0 hidden md:block\"}),/*#__PURE__*/React.createElement(\"h4\",{className:\"bg-blue-700 md:bg-transparent text-white md:text-gray-700 font-light md:font-semibold text-sm md:text-xl tracking-wide uppercase md:normal-case py-2 px-6 rounded-r-lg\"},\"Repayment Log\")),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"w-11/12 bg-white flex rounded py-12 shadow-lg border-b-4 border-blue-700 md:border-none  mb-20 m-auto md:m-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-full mb-6 px-8 py-6 relative\"},/*#__PURE__*/React.createElement(\"div\",{className:\"-mx-4 sm:-mx-8 px-4 sm:px-8 py-0 md:py-4 overflow-auto  fade-in mt-5 mb-10\"},/*#__PURE__*/React.createElement(\"div\",{className:\"inline-block min-w-full shadow rounded-lg overflow-hidden\"},/*#__PURE__*/React.createElement(\"table\",Object.assign({},getTableProps(),{className:\"min-w-full w-full leading-normal\"}),/*#__PURE__*/React.createElement(\"thead\",{className:\"flex w-full\"},headerGroups.map(function(headerGroup){return/*#__PURE__*/React.createElement(\"tr\",Object.assign({},headerGroup.getHeaderGroupProps(),{className:\"flex w-full\"}),headerGroup.headers.map(function(column){return/*#__PURE__*/React.createElement(\"th\",Object.assign({},column.getHeaderProps(),{className:\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-center text-sm font-semibold text-gray-600 uppercase tracking-wider\"//   style={{\n//     borderBottom: \"solid 3px red\",\n//     background: \"aliceblue\",\n//     color: \"black\",\n//     fontWeight: \"bold\",\n//   }}\n}),column.render(\"Header\"));}));})),/*#__PURE__*/React.createElement(\"tbody\",Object.assign({},getTableBodyProps(),{className:\"flex flex-col items-center overflow-y-scroll w-full schedule-table\"}),rows.map(function(row){prepareRow(row);return/*#__PURE__*/React.createElement(\"tr\",Object.assign({},row.getRowProps(),{className:\"flex w-full\"}),row.cells.map(function(cell){return/*#__PURE__*/React.createElement(\"td\",Object.assign({},cell.getCellProps(),{// style={{\n//   padding: \"10px\",\n//   fontSize: 16,\n//   textAlign: \"center\",\n//   paddingBottom: 20,\n// }}\nclassName:\"p-4 w-1/4 px-5 py-5 text-center border-b border-gray-200 bg-white text-xs md:text-sm text-gray-700\"}),cell.render(\"Cell\"));}));}))))))),/*#__PURE__*/React.createElement(\"div\",{className:\"w-11/12 mt-8 hidden md:block\"},/*#__PURE__*/React.createElement(\"hr\",{className:\"w-9/12 border-t-2 border-blue-600 bg-blue-400 rounded m-auto\"})))),/*#__PURE__*/React.createElement(\"br\",null)));}export default withRouter(LoanDetails);","map":{"version":3,"sources":["/Users/mac/Documents/react app/agilecreditportal/src/pages/LoanDetails.tsx"],"names":["React","useTable","useParams","getLoan","useQuery","useAuthStore","withRouter","LoanDetails","props","token","state","accessToken","loanId","isLoading","error","loan","data","statusClass","status","loanData","loanDatas","map","item","push","col1","id","col2","Number","repayment","toLocaleString","undefined","maximumFractionDigits","col3","Date","schedule_date","toDateString","col4","payment_status","useMemo","columns","Header","accessor","getTableProps","getTableBodyProps","headerGroups","rows","prepareRow","loan_id","loan_amount","number_of_payments","fontSize","length","alignItems","history","headerGroup","getHeaderGroupProps","headers","column","getHeaderProps","render","row","getRowProps","cells","cell","getCellProps"],"mappings":"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","sourcesContent":["import React, { Fragment } from \"react\";\nimport { useTable } from \"react-table\";\nimport ReactDatatable from \"@ashvin27/react-datatable\";\nimport { useParams } from \"react-router-dom\";\nimport { getLoan } from \"../clients/loan\";\nimport { useQuery } from \"react-query\";\nimport useAuthStore from \"../stores/authStore\";\nimport { withRouter } from \"react-router\";\n\n// import 'bootstrap/dist/css/bootstrap.css';\n\nfunction LoanDetails(props) {\n  const token = useAuthStore((state) => state.accessToken);\n\n  let { loanId } = useParams();\n  const { isLoading, error, data: loan } = useQuery(\"loanDetail\", () =>\n    getLoan(token, loanId)\n  );\n\n  const statusClass = (status) => {\n    switch (status) {\n      case \"Pending\":\n        return (\n          <span className=\"relative inline-block px-3 py-1 font-semibold text-orange-900 leading-tight\">\n            <span\n              aria-hidden\n              className=\"absolute inset-0 bg-orange-200 opacity-50 rounded-full\"\n            ></span>\n            <span className=\"relative\">{status}</span>\n          </span>\n        );\n      case \"Rejected\":\n        return (\n          <span className=\"relative inline-block px-3 py-1 font-semibold text-red-900 leading-tight\">\n            <span\n              aria-hidden\n              className=\"absolute inset-0 bg-red-200 opacity-50 rounded-full\"\n            ></span>\n            <span className=\"relative\">{status}</span>\n          </span>\n        );\n      default:\n        return (\n          <span className=\"relative inline-block px-3 py-1 font-semibold text-green-900 leading-tight\">\n            <span\n              aria-hidden\n              className=\"absolute inset-0 bg-green-200 opacity-50 rounded-full\"\n            ></span>\n            <span className=\"relative\">{status}</span>\n          </span>\n        );\n    }\n  };\n\n  let loanData = loan && loan.data;\n  let loanDatas = [] as any;\n\n  loan &&\n    loanData[\"schedules\"].map((item) => {\n      loanDatas.push({\n        col1: item.id,\n        col2: (\n          <span className=\"text-green-600 font-bold\">\n            ₦\n            {Number(item.repayment).toLocaleString(undefined, {\n              maximumFractionDigits: 2,\n            })}\n          </span>\n        ),\n        col3: new Date(item.schedule_date).toDateString(),\n        col4: statusClass(item.payment_status),\n      });\n    });\n\n  const data = React.useMemo(\n    () => [\n      // {\n    ],\n    []\n  );\n\n  const columns = React.useMemo(\n    () => [\n      {\n        Header: \"S/N\",\n        accessor: \"col1\", // accessor is the \"key\" in the data\n      },\n      {\n        Header: \"Opening Balance\",\n        accessor: \"col2\",\n      },\n      {\n        Header: \"Due Date\",\n        accessor: \"col3\",\n      },\n      {\n        Header: \"Status\",\n        accessor: \"col4\",\n      },\n    ],\n    []\n  );\n\n  const {\n    getTableProps,\n    getTableBodyProps,\n    headerGroups,\n    rows,\n    prepareRow,\n  } = useTable({ columns: columns, data: loanDatas });\n\n  if (isLoading) {\n    return (\n      <>\n        <div className=\"w-full m-auto px-8 relative\">\n          <img\n            src=\"/img/loading-gif.gif\"\n            alt=\"\"\n            className=\"w-1/8 m-auto py-20\"\n          />\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <>\n      <main className=\"md:pl-12\">\n        <div className=\"flex \">\n          <div className=\"w-full \">\n            <div className=\"flex items-center mt-10 lg:mt-0\">\n              <div className=\"w-8 h-1 bg-blue-700 rounded mr-0 hidden md:block\"></div>\n              <h4 className=\"bg-blue-700 md:bg-transparent text-white md:text-gray-700 font-light md:font-semibold text-sm md:text-xl tracking-wide uppercase md:normal-case py-2 px-6 rounded-r-lg\">\n                Loan Details\n              </h4>\n            </div>\n            <br />\n            <div className=\"w-11/12 bg-white flex flex-col sm:flex-row rounded py-6 shadow-lg border-b-4 border-blue-700 md:border-none pl-4 sm:mb-20 m-auto md:m-0\">\n              <div className=\"w-full sm:w-1/4 text-center  sm:border-r-8 sm:border-blue-100 align-middle justify-center\">\n                <h2 className=\"text-blue-700 xl:text-4xl font-semibold py-5 pl-3 lg:text-2xl\">\n                  {loanData.loan_id}\n                </h2>\n              </div>\n              <div className=\"w-full sm:w-1/4 flex-row\">\n                <div className=\"flex flex-row text-blue-700 xl:text-lg lg:text-sm mb-4\">\n                  <div className=\"w-1/2 text-right mr-5 \">Amount: </div>\n                  <div className=\"w-1/2 text-left font-bold\">\n                    ₦\n                    {Number(loanData.loan_amount).toLocaleString(undefined, {\n                      maximumFractionDigits: 2,\n                    })}\n                  </div>\n                </div>\n                <div className=\"flex flex-row text-blue-700 xl:text-lg lg:text-sm\">\n                  <div className=\"w-1/2 text-right mr-5 \">Duration:</div>\n                  <div className=\"w-1/2 text-left font-bold\">\n                    {loanData.number_of_payments} months\n                  </div>\n                </div>\n              </div>\n              <div className=\"w-full sm:w-1/4 flex flex-col  \">\n                <div className=\"w-full mb-4 text-center \">\n                  <p\n                    style={{ fontSize: 8 }}\n                    className=\"text-center w-1/3 lg:float-right text-teal-600 bg-teal-100 py-2  rounded-full m-auto lg:m-px\"\n                  >\n                    {loanData.status}\n                  </p>\n                </div>\n\n                <div className=\"flex flex-row text-blue-700 xl:text-lg lg:text-sm\">\n                  <p className=\"w-1/2 text-right mr-5\">Repayment</p>\n                  <p className=\"w-1/2 text-left lg:text-right font-bold\">\n                    ₦\n                    {loanData[\"schedules\"].length\n                      ? Number(\n                          loanData[\"schedules\"][0][\"repayment\"]\n                        ).toLocaleString(undefined, {\n                          maximumFractionDigits: 2,\n                        })\n                      : \"\"}\n                  </p>\n                </div>\n              </div>\n              <div\n                style={{ alignItems: \"center\" }}\n                className=\"w-full sm:w-1/4 justify-center flex sm:justify-end align-middle \"\n              >\n                <button\n                  onClick={() => props.history.push(\"/pay/\" + loanId)}\n                  className=\"bg-green-700 text-white inline-flex sm:-mr-6 px-6 py-3 rounded\"\n                >\n                  <span className=\"xl:text-lg lg:text-sm\">Make Payment</span>\n                  <svg\n                    className=\"mt-1\"\n                    width=\"14\"\n                    height=\"14\"\n                    viewBox=\"0 0 18 18\"\n                    fill=\"none\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <g id=\"chevron_right_24px\">\n                      <path\n                        id=\"icon/navigation/chevron_right_24px\"\n                        d=\"M9.70492 6L8.29492 7.41L12.8749 12L8.29492 16.59L9.70492 18L15.7049 12L9.70492 6Z\"\n                        fill=\"white\"\n                      />\n                    </g>\n                  </svg>\n                </button>\n              </div>\n            </div>\n            <br />\n            <br />\n            <div className=\"flex items-center mt-10 lg:mt-0\">\n              <div className=\"w-8 h-1 bg-blue-700 rounded mr-0 hidden md:block\"></div>\n              <h4 className=\"bg-blue-700 md:bg-transparent text-white md:text-gray-700 font-light md:font-semibold text-sm md:text-xl tracking-wide uppercase md:normal-case py-2 px-6 rounded-r-lg\">\n                Repayment Log\n              </h4>\n            </div>\n            <br />\n            <div className=\"w-11/12 bg-white flex rounded py-12 shadow-lg border-b-4 border-blue-700 md:border-none  mb-20 m-auto md:m-0\">\n              <div className=\"w-full mb-6 px-8 py-6 relative\">\n                <div className=\"-mx-4 sm:-mx-8 px-4 sm:px-8 py-0 md:py-4 overflow-auto  fade-in mt-5 mb-10\">\n                  <div className=\"inline-block min-w-full shadow rounded-lg overflow-hidden\">\n                    <table\n                      {...getTableProps()}\n                      className=\"min-w-full w-full leading-normal\"\n                    >\n                      <thead className=\"flex w-full\">\n                        {headerGroups.map((headerGroup) => (\n                          <tr\n                            {...headerGroup.getHeaderGroupProps()}\n                            className=\"flex w-full\"\n                          >\n                            {headerGroup.headers.map((column) => (\n                              <th\n                                {...column.getHeaderProps()}\n                                className=\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-center text-sm font-semibold text-gray-600 uppercase tracking-wider\"\n                                //   style={{\n                                //     borderBottom: \"solid 3px red\",\n                                //     background: \"aliceblue\",\n                                //     color: \"black\",\n                                //     fontWeight: \"bold\",\n                                //   }}\n                              >\n                                {column.render(\"Header\")}\n                              </th>\n                            ))}\n                          </tr>\n                        ))}\n                      </thead>\n                      <tbody\n                        {...getTableBodyProps()}\n                        className=\"flex flex-col items-center overflow-y-scroll w-full schedule-table\"\n                      >\n                        {rows.map((row) => {\n                          prepareRow(row);\n                          return (\n                            <tr {...row.getRowProps()} className=\"flex w-full\">\n                              {row.cells.map((cell) => {\n                                return (\n                                  <td\n                                    {...cell.getCellProps()}\n                                    // style={{\n                                    //   padding: \"10px\",\n                                    //   fontSize: 16,\n                                    //   textAlign: \"center\",\n                                    //   paddingBottom: 20,\n                                    // }}\n                                    className=\"p-4 w-1/4 px-5 py-5 text-center border-b border-gray-200 bg-white text-xs md:text-sm text-gray-700\"\n                                  >\n                                    {cell.render(\"Cell\")}\n                                  </td>\n                                );\n                              })}\n                            </tr>\n                          );\n                        })}\n                      </tbody>\n                    </table>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"w-11/12 mt-8 hidden md:block\">\n              <hr className=\"w-9/12 border-t-2 border-blue-600 bg-blue-400 rounded m-auto\"></hr>\n            </div>\n          </div>\n        </div>\n        <br />\n      </main>\n    </>\n  );\n}\n\nexport default withRouter(LoanDetails);\n"]},"metadata":{},"sourceType":"module"}