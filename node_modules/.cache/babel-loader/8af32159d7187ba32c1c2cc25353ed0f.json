{"ast":null,"code":"import _objectSpread from\"/Users/mac/Documents/react app/agilecreditportal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/mac/Documents/react app/agilecreditportal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mac/Documents/react app/agilecreditportal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mac/Documents/react app/agilecreditportal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useCallback}from\"react\";import{withRouter}from\"react-router\";import useAuthStore from\"../stores/authStore\";import useProfileStore from\"../stores/profileStore\";import{useQuery}from\"react-query\";import{getProfileSection}from\"../clients/onboarding\";import{getProducts}from\"../clients/products\";import InputRange from\"react-input-range\";import\"react-input-range/lib/css/index.css\";import{cardCheck}from\"../clients/cards\";var NewLoanRequest=function NewLoanRequest(props){var _cardListResponse$dat,_data$data;var profile=useProfileStore(useCallback(function(state){return state.data;},[]));var _useState=useState(),_useState2=_slicedToArray(_useState,2),selectedProduct=_useState2[0],setSelectedProduct=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),loanAmount=_useState4[0],setLoanAmount=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),noOfRepayments=_useState6[0],setNoOfRepayments=_useState6[1];var token=useAuthStore(function(state){return state.accessToken;});var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isCardLoading=_useState8[0],setIsCardLoading=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),cardListResponse=_useState10[0],setCardListResponse=_useState10[1];var _useQuery=useQuery(\"sections\",function(){return getProfileSection(token);}),isLoading2=_useQuery.isLoading,error2=_useQuery.error,data2=_useQuery.data;var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),errorMsg=_useState12[0],setErrorMsg=_useState12[1];var updateErrors=function updateErrors(errors){setErrorMsg(Object.values(errors).flat());};var checkCustomerCards=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var values,_yield$cardCheck,cardListMessage,cardListData,cardListStatus,msg,_msg,_msg2,_data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:values={email:profile.e_mail};setIsCardLoading(true);_context.prev=2;_context.next=5;return cardCheck(token,values);case 5:_yield$cardCheck=_context.sent;cardListMessage=_yield$cardCheck.message;cardListData=_yield$cardCheck.data;cardListStatus=_yield$cardCheck.status;if(!(cardListStatus===false)){_context.next=15;break;}msg=[];msg.push(cardListMessage);setErrorMsg(msg);setIsCardLoading(false);return _context.abrupt(\"return\");case 15:setCardListResponse(cardListData);setErrorMsg([]);setIsCardLoading(false);_context.next=35;break;case 20:_context.prev=20;_context.t0=_context[\"catch\"](2);setIsCardLoading(false);if(!(_context.t0&&!_context.t0.response)){_context.next=28;break;}_msg=[];_msg.push(\"Network Error, Check Your Internet Connection\");setErrorMsg(_msg);return _context.abrupt(\"return\");case 28:if(!(_context.t0&&_context.t0.response.status===500)){_context.next=33;break;}_msg2=[];_msg2.push(_context.t0.response.data.message);setErrorMsg(_msg2);return _context.abrupt(\"return\");case 33:_data=_context.t0.response.data;_data.errors&&updateErrors(_data.errors);case 35:case\"end\":return _context.stop();}}},_callee,null,[[2,20]]);})),[token,profile.e_mail]);useEffect(function(){if(profile&&profile.e_mail)checkCustomerCards();},[profile]);var checklist=data2?data2:[];var checklistCompletion=checklist.every(function(loan){return loan.completed===true;});var getLastSection=function getLastSection(){var minSection=0;var name=\"\";checklist&&checklist.map(function(data){if(data.completed===false){if(minSection===0){minSection=data.sequence;name=data.name;}else{if(data.sequence<minSection){minSection=data.sequence;name=data.name;}}}});return name;};var _useQuery2=useQuery(\"products\",function(){return getProducts(token);}),isLoading=_useQuery2.isLoading,error=_useQuery2.error,data=_useQuery2.data;// if (error) {\n//   console.log(error);\n//   let msg = [] as any;\n//   msg.push(error.response.data.message);\n//   setErrorMsg(msg);\n//   return;\n// }\nvar _handleLoanAmountUpdate=function _handleLoanAmountUpdate(value){setLoanAmount(Number(value));};var _handleRepaymentsUpdate=function _handleRepaymentsUpdate(value){setNoOfRepayments(Number(value));};var _handleProductSelection=function _handleProductSelection(productNo){var products=data===null||data===void 0?void 0:data.data;if(!products){return;}var product=products.find(function(prod){return prod.no===productNo;});setSelectedProduct(product);setLoanAmount(product.min_loan_amount);setNoOfRepayments(product.min_number_of_repayment);};if(isLoading||!data||isLoading2||!profile.e_mail||isCardLoading||cardListResponse===undefined){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"w-full m-auto px-8 relative\"},/*#__PURE__*/React.createElement(\"img\",{src:\"/img/loading-gif.gif\",alt:\"\",className:\"w-1/8 m-auto py-20\"})));}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"main\",{className:checklistCompletion?\"md:pl-12 loan-request-bg md:pb-32\":\"md:pl-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex \"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-full \"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex items-center mt-10 lg:mt-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-8 h-1 bg-blue-700 rounded mr-3 hidden md:block\"}),/*#__PURE__*/React.createElement(\"h4\",{className:\"bg-blue-700 md:bg-transparent text-white md:text-gray-700 font-light md:font-semibold text-sm md:text-xl tracking-wide uppercase md:normal-case py-2 px-6 rounded-r-lg\"},\"New Loan\")),/*#__PURE__*/React.createElement(\"br\",null),errorMsg.length?/*#__PURE__*/React.createElement(\"div\",{className:\"bg-red-100 border-t-4 border-red-500 rounded-b text-red-900 px-4 py-3 shadow-md my-5\",role:\"alert\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"py-1\"},/*#__PURE__*/React.createElement(\"svg\",{className:\"fill-current h-6 w-6 text-red-500 mr-4\",xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 20 20\"},/*#__PURE__*/React.createElement(\"path\",{d:\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\"}))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"ul\",{style:{listStyleType:\"none\"}},errorMsg.map(function(error,i){return/*#__PURE__*/React.createElement(\"li\",{key:i},error);}))))):\"\",!checklistCompletion?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"relative w-11/12 bg-white rounded py-12 shadow-lg border-b-4 border-blue-700 md:border-none mb-20 m-auto md:m-0 mt-12 md:mt-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-full m-auto mb-6\"},/*#__PURE__*/React.createElement(\"img\",{src:\"img/checklists.svg\",alt:\"\",className:\"w-2/4 md:w-1/4 m-auto\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"w-3/4 md:w-2/4 m-auto\"},/*#__PURE__*/React.createElement(\"p\",{className:\"text-gray-700 font-medium text-center\"},\"Oops! Looks like you need to complete your profile before we can disburse your money.\")),/*#__PURE__*/React.createElement(\"div\",{className:\"w-full m-auto mt-10\"},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){props.history.push(\"/onboarding/\"+getLastSection());},className:\"flex w-2/4 md:w-1/4 shadow-xl text-xl font-light text-white justify-center py-4 md:py-3 items-center bg-green-600 hover:bg-green-700 rounded-md m-auto transition-colors duration-150 ease-in-out\"},/*#__PURE__*/React.createElement(\"span\",{className:\"text-sm xl:text-lg lg:text-sm pr-2\"},\"Okay, let's go!\"),/*#__PURE__*/React.createElement(\"img\",{src:\"img/chevron-right.svg\",className:\"w-5 pt-1\",alt:\"\"}))))):(cardListResponse===null||cardListResponse===void 0?void 0:(_cardListResponse$dat=cardListResponse.data)===null||_cardListResponse$dat===void 0?void 0:_cardListResponse$dat.cards)===false?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"relative w-11/12 bg-white rounded py-12 shadow-lg border-b-4 border-blue-700 md:border-none mb-20 m-auto md:m-0 mt-12 md:mt-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-full m-auto mb-6\"},/*#__PURE__*/React.createElement(\"img\",{src:\"img/checklists.svg\",alt:\"\",className:\"w-2/4 md:w-1/4 m-auto\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"w-3/4 md:w-2/4 m-auto\"},/*#__PURE__*/React.createElement(\"p\",{className:\"text-gray-700 font-medium text-center\"},\"One more thing! You need to have at least one debit card on your profile before you can access a loan.\")),/*#__PURE__*/React.createElement(\"div\",{className:\"w-full m-auto mt-10\"},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){props.history.push(\"/cards/add\");},className:\"flex w-2/4 md:w-1/4 shadow-xl text-xl font-light text-white justify-center py-4 md:py-3 items-center bg-green-600 hover:bg-green-700 rounded-md m-auto transition-colors duration-150 ease-in-out\"},/*#__PURE__*/React.createElement(\"span\",{className:\"text-sm xl:text-lg lg:text-sm pr-2\"},\"Add a card now\"),/*#__PURE__*/React.createElement(\"img\",{src:\"img/chevron-right.svg\",className:\"w-5 pt-1\",alt:\"\"}))))):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"img\",{src:\"/img/new-loan-mobile-card-bg.svg\",alt:\"\",className:\"md:hidden absolute mobile-card-bg\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"relative w-11/12 bg-white flex rounded py-12 shadow-lg border-b-4 border-blue-700 md:border-b-8 mb-20 m-auto md:m-0 mt-12 md:mt-0 loan-calc-alt\"},/*#__PURE__*/React.createElement(\"form\",{className:\"w-full m-auto max-w-lg\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-11/12 md:w-full px-3 m-auto\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"md:hidden text-lg text-gray-700 text-center font-bold m-auto mb-10\"},\"How much money do you want?\"),/*#__PURE__*/React.createElement(\"div\",{className:\"flex flex-wrap -mx-3 mb-6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-full md:w-ful px-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2\"},\"Loan Type\"),/*#__PURE__*/React.createElement(\"div\",{className:\"relative\"},/*#__PURE__*/React.createElement(\"select\",{className:\"block appearance-none w-full bg-gray-200 border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500\",id:\"grid-state\",onChange:function onChange(e){return _handleProductSelection(e.target.value);}},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"- Select -\"),(data===null||data===void 0?void 0:(_data$data=data.data)===null||_data$data===void 0?void 0:_data$data.length)>0?data.data.map(function(option,key){return/*#__PURE__*/React.createElement(\"option\",{key:option.key,value:option.no},option.description);}):null),/*#__PURE__*/React.createElement(\"div\",{className:\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\"},/*#__PURE__*/React.createElement(\"svg\",{className:\"fill-current h-4 w-4\",xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 20 20\"},/*#__PURE__*/React.createElement(\"path\",{d:\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"})))),selectedProduct?/*#__PURE__*/React.createElement(\"p\",{className:\"text-gray-700 text-xs italic\"},/*#__PURE__*/React.createElement(\"a\",{href:selectedProduct.product_url,target:\"_blank\",rel:\"noopener noreferrer\"},/*#__PURE__*/React.createElement(\"span\",{className:\"text-blue-500\"},\" \",\"Learn more\")),\" \",\"about the selected loan type\"):\"\")),/*#__PURE__*/React.createElement(\"div\",{className:\"flex flex-wrap -mx-3 mb-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-full px-3 pt-4\"},/*#__PURE__*/React.createElement(\"label\",{className:\"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-10\"},\"Amount\"),/*#__PURE__*/React.createElement(\"div\",{className:\"relative\"},/*#__PURE__*/React.createElement(InputRange,{formatLabel:function formatLabel(value){return\"\\u20A6\"+Number(value).toLocaleString();},maxValue:selectedProduct?Number(selectedProduct.max_loan_amount):0,minValue:selectedProduct?Number(selectedProduct.min_loan_amount):0,step:1000,value:loanAmount,onChange:_handleLoanAmountUpdate,disabled:!!!selectedProduct,name:\"loan_amount\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"flex flex-wrap -mx-3 mb-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-full px-3 pt-4\"},/*#__PURE__*/React.createElement(\"label\",{className:\"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-10\"},\"Duration\"),/*#__PURE__*/React.createElement(\"div\",{className:\"relative\"},/*#__PURE__*/React.createElement(InputRange,{formatLabel:function formatLabel(value){return value+\" months\";},maxValue:selectedProduct?Number(selectedProduct.max_number_of_repayment):0,minValue:selectedProduct?Number(selectedProduct.min_number_of_repayment):0,step:1,value:noOfRepayments,onChange:_handleRepaymentsUpdate,disabled:!!!selectedProduct,name:\"no_of_repayments\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"flex justify-center\"},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return props.history.replace({pathname:\"/loan-schedule\",loanData:_objectSpread({loan_amount:loanAmount,no_of_repayments:noOfRepayments},selectedProduct)});},className:selectedProduct?\"bg-green-600 hover:bg-green-700 text-white text-xl font-light py-3 px-10 rounded-lg focus:outline-none focus:shadow-outline inline-flex items-center transition-colors duration-150 ease-in-out\":\"bg-gray-300 text-white text-xl font-light py-3 px-10 rounded-lg focus:outline-none focus:shadow-outline inline-flex items-center cursor-not-allowed\",disabled:selectedProduct?false:true,type:\"button\"},/*#__PURE__*/React.createElement(\"span\",null,\" Apply! \"),/*#__PURE__*/React.createElement(\"svg\",{className:\"ml-2 -mt-1\",width:\"18\",height:\"18\",viewBox:\"0 0 18 18\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"g\",{id:\"chevron_right_24px\"},/*#__PURE__*/React.createElement(\"path\",{id:\"icon/navigation/chevron_right_24px\",d:\"M9.70492 6L8.29492 7.41L12.8749 12L8.29492 16.59L9.70492 18L15.7049 12L9.70492 6Z\",fill:\"white\"}))))))))))),/*#__PURE__*/React.createElement(\"br\",null)));};export default withRouter(NewLoanRequest);","map":{"version":3,"sources":["/Users/mac/Documents/react app/agilecreditportal/src/pages/NewLoanRequest.tsx"],"names":["React","useState","useEffect","useCallback","withRouter","useAuthStore","useProfileStore","useQuery","getProfileSection","getProducts","InputRange","cardCheck","NewLoanRequest","props","profile","state","data","selectedProduct","setSelectedProduct","loanAmount","setLoanAmount","noOfRepayments","setNoOfRepayments","token","accessToken","isCardLoading","setIsCardLoading","cardListResponse","setCardListResponse","isLoading2","isLoading","error2","error","data2","errorMsg","setErrorMsg","updateErrors","errors","Object","values","flat","checkCustomerCards","email","e_mail","cardListMessage","message","cardListData","cardListStatus","status","msg","push","response","checklist","checklistCompletion","every","loan","completed","getLastSection","minSection","name","map","sequence","_handleLoanAmountUpdate","value","Number","_handleRepaymentsUpdate","_handleProductSelection","productNo","products","product","find","prod","no","min_loan_amount","min_number_of_repayment","undefined","length","listStyleType","i","history","cards","e","target","option","key","description","product_url","toLocaleString","max_loan_amount","max_number_of_repayment","replace","pathname","loanData","loan_amount","no_of_repayments"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\nimport { withRouter } from \"react-router\";\n\nimport useAuthStore from \"../stores/authStore\";\nimport useProfileStore from \"../stores/profileStore\";\nimport { useQuery } from \"react-query\";\nimport { getProfileSection } from \"../clients/onboarding\";\nimport { getProducts } from \"../clients/products\";\nimport InputRange, { Range } from \"react-input-range\";\nimport \"react-input-range/lib/css/index.css\";\nimport { cardCheck } from \"../clients/cards\";\n\nconst NewLoanRequest = (props: any) => {\n  const profile: any = useProfileStore(useCallback((state) => state.data, []));\n\n  const [selectedProduct, setSelectedProduct] = useState<any>();\n\n  const [loanAmount, setLoanAmount] = useState<number | Range>(0);\n\n  const [noOfRepayments, setNoOfRepayments] = useState<number | Range>(0);\n  const token = useAuthStore((state) => state.accessToken);\n  const [isCardLoading, setIsCardLoading] = useState(false);\n  const [cardListResponse, setCardListResponse]: any = useState();\n\n  const {\n    isLoading: isLoading2,\n    error: error2,\n    data: data2,\n  } = useQuery(\"sections\", () => getProfileSection(token));\n\n  const [errorMsg, setErrorMsg] = useState([]);\n\n  const updateErrors = (errors: []) => {\n    setErrorMsg(Object.values(errors).flat());\n  };\n\n  const checkCustomerCards = useCallback(async () => {\n    let values = {\n      email: profile.e_mail,\n    };\n    setIsCardLoading(true);\n    try {\n      const {\n        message: cardListMessage,\n        data: cardListData,\n        status: cardListStatus,\n      } = await cardCheck(token, values);\n\n      if (cardListStatus === false) {\n        let msg = [] as any;\n        msg.push(cardListMessage);\n        setErrorMsg(msg);\n        setIsCardLoading(false);\n        return;\n      }\n      setCardListResponse(cardListData);\n      setErrorMsg([]);\n      setIsCardLoading(false);\n    } catch (error) {\n      setIsCardLoading(false);\n      if (error && !error.response) {\n        let msg = [] as any;\n        msg.push(\"Network Error, Check Your Internet Connection\");\n        setErrorMsg(msg);\n        return;\n      }\n      if (error && error.response.status === 500) {\n        let msg = [] as any;\n        msg.push(error.response.data.message);\n        setErrorMsg(msg);\n        return;\n      }\n      const {\n        response: { data },\n      } = error;\n      data.errors && updateErrors(data.errors);\n    }\n  }, [token, profile.e_mail]);\n\n  useEffect(() => {\n    if (profile && profile.e_mail) checkCustomerCards();\n  }, [profile]);\n\n  const checklist = data2 ? data2 : [];\n\n  const checklistCompletion = checklist.every(\n    (loan) => loan.completed === true\n  );\n\n  const getLastSection = () => {\n    let minSection = 0;\n    let name = \"\";\n    checklist &&\n      checklist.map((data: any) => {\n        if (data.completed === false) {\n          if (minSection === 0) {\n            minSection = data.sequence;\n            name = data.name;\n          } else {\n            if (data.sequence < minSection) {\n              minSection = data.sequence;\n              name = data.name;\n            }\n          }\n        }\n      });\n    return name;\n  };\n\n  const { isLoading, error, data } = useQuery(\"products\", () =>\n    getProducts(token)\n  );\n\n  // if (error) {\n  //   console.log(error);\n  //   let msg = [] as any;\n  //   msg.push(error.response.data.message);\n  //   setErrorMsg(msg);\n  //   return;\n  // }\n\n  const _handleLoanAmountUpdate = (value: number | Range) => {\n    setLoanAmount(Number(value));\n  };\n\n  const _handleRepaymentsUpdate = (value: number | Range) => {\n    setNoOfRepayments(Number(value));\n  };\n\n  const _handleProductSelection = (productNo) => {\n    let products: any[] | null = data?.data;\n\n    if (!products) {\n      return;\n    }\n\n    let product = products.find((prod) => prod.no === productNo);\n\n    setSelectedProduct(product);\n\n    setLoanAmount(product.min_loan_amount);\n    setNoOfRepayments(product.min_number_of_repayment);\n  };\n\n  if (isLoading || !data || isLoading2 || !profile.e_mail || isCardLoading || cardListResponse === undefined ) {\n    return (\n      <>\n        <div className=\"w-full m-auto px-8 relative\">\n          <img\n            src=\"/img/loading-gif.gif\"\n            alt=\"\"\n            className=\"w-1/8 m-auto py-20\"\n          />\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <>\n      <main\n        className={\n          checklistCompletion ? \"md:pl-12 loan-request-bg md:pb-32\" : \"md:pl-12\"\n        }\n      >\n        <div className=\"flex \">\n          <div className=\"w-full \">\n            <div className=\"flex items-center mt-10 lg:mt-0\">\n              <div className=\"w-8 h-1 bg-blue-700 rounded mr-3 hidden md:block\"></div>\n              <h4 className=\"bg-blue-700 md:bg-transparent text-white md:text-gray-700 font-light md:font-semibold text-sm md:text-xl tracking-wide uppercase md:normal-case py-2 px-6 rounded-r-lg\">\n                New Loan\n              </h4>\n            </div>\n            <br />\n\n            {errorMsg.length ? (\n              <div\n                className=\"bg-red-100 border-t-4 border-red-500 rounded-b text-red-900 px-4 py-3 shadow-md my-5\"\n                role=\"alert\"\n              >\n                <div className=\"flex\">\n                  <div className=\"py-1\">\n                    <svg\n                      className=\"fill-current h-6 w-6 text-red-500 mr-4\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      viewBox=\"0 0 20 20\"\n                    >\n                      <path d=\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\" />\n                    </svg>\n                  </div>\n                  <div>\n                    <ul style={{ listStyleType: \"none\" }}>\n                      {errorMsg.map((error, i) => (\n                        <li key={i}>{error}</li>\n                      ))}\n                    </ul>\n                  </div>\n                </div>\n              </div>\n            ) : (\n              \"\"\n            )}\n\n            {!checklistCompletion ? (\n              <>\n                <div className=\"relative w-11/12 bg-white rounded py-12 shadow-lg border-b-4 border-blue-700 md:border-none mb-20 m-auto md:m-0 mt-12 md:mt-0\">\n                  <div className=\"w-full m-auto mb-6\">\n                    <img\n                      src=\"img/checklists.svg\"\n                      alt=\"\"\n                      className=\"w-2/4 md:w-1/4 m-auto\"\n                    />\n                  </div>\n                  <div className=\"w-3/4 md:w-2/4 m-auto\">\n                    <p className=\"text-gray-700 font-medium text-center\">\n                      Oops! Looks like you need to complete your profile before\n                      we can disburse your money.\n                    </p>\n                  </div>\n                  <div className=\"w-full m-auto mt-10\">\n                    <button\n                      onClick={() => {\n                        props.history.push(\"/onboarding/\" + getLastSection());\n                      }}\n                      className=\"flex w-2/4 md:w-1/4 shadow-xl text-xl font-light text-white justify-center py-4 md:py-3 items-center bg-green-600 hover:bg-green-700 rounded-md m-auto transition-colors duration-150 ease-in-out\"\n                    >\n                      <span className=\"text-sm xl:text-lg lg:text-sm pr-2\">\n                        Okay, let's go!\n                      </span>\n                      <img\n                        src=\"img/chevron-right.svg\"\n                        className=\"w-5 pt-1\"\n                        alt=\"\"\n                      />\n                    </button>\n                  </div>\n                </div>\n              </>\n            ) : cardListResponse?.data?.cards === false ? (\n              <>\n                <div className=\"relative w-11/12 bg-white rounded py-12 shadow-lg border-b-4 border-blue-700 md:border-none mb-20 m-auto md:m-0 mt-12 md:mt-0\">\n                  <div className=\"w-full m-auto mb-6\">\n                    <img\n                      src=\"img/checklists.svg\"\n                      alt=\"\"\n                      className=\"w-2/4 md:w-1/4 m-auto\"\n                    />\n                  </div>\n                  <div className=\"w-3/4 md:w-2/4 m-auto\">\n                    <p className=\"text-gray-700 font-medium text-center\">\n                      One more thing! You need to have at least one debit card on your profile before you can access a loan.\n                    </p>\n                  </div>\n                  <div className=\"w-full m-auto mt-10\">\n                    <button\n                      onClick={() => {\n                        props.history.push(\"/cards/add\");\n                      }}\n                      className=\"flex w-2/4 md:w-1/4 shadow-xl text-xl font-light text-white justify-center py-4 md:py-3 items-center bg-green-600 hover:bg-green-700 rounded-md m-auto transition-colors duration-150 ease-in-out\"\n                    >\n                      <span className=\"text-sm xl:text-lg lg:text-sm pr-2\">\n                       Add a card now\n                      </span>\n                      <img\n                        src=\"img/chevron-right.svg\"\n                        className=\"w-5 pt-1\"\n                        alt=\"\"\n                      />\n                    </button>\n                  </div>\n                </div>\n              </>\n            ) : (\n              <>\n                <img\n                  src=\"/img/new-loan-mobile-card-bg.svg\"\n                  alt=\"\"\n                  className=\"md:hidden absolute mobile-card-bg\"\n                />\n                <div className=\"relative w-11/12 bg-white flex rounded py-12 shadow-lg border-b-4 border-blue-700 md:border-b-8 mb-20 m-auto md:m-0 mt-12 md:mt-0 loan-calc-alt\">\n                  <form className=\"w-full m-auto max-w-lg\">\n                    <div className=\"w-11/12 md:w-full px-3 m-auto\">\n                      <h3 className=\"md:hidden text-lg text-gray-700 text-center font-bold m-auto mb-10\">\n                        How much money do you want?\n                      </h3>\n                      <div className=\"flex flex-wrap -mx-3 mb-6\">\n                        <div className=\"w-full md:w-ful px-3\">\n                          <label className=\"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2\">\n                            Loan Type\n                          </label>\n                          <div className=\"relative\">\n                            <select\n                              className=\"block appearance-none w-full bg-gray-200 border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500\"\n                              id=\"grid-state\"\n                              onChange={(e) =>\n                                _handleProductSelection(e.target.value)\n                              }\n                            >\n                              <option value=\"\">- Select -</option>\n                              {data?.data?.length > 0\n                                ? data.data.map((option, key) => {\n                                    return (\n                                      <option\n                                        key={option.key}\n                                        value={option.no}\n                                      >\n                                        {option.description}\n                                      </option>\n                                    );\n                                  })\n                                : null}\n                            </select>\n                            <div className=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\">\n                              <svg\n                                className=\"fill-current h-4 w-4\"\n                                xmlns=\"http://www.w3.org/2000/svg\"\n                                viewBox=\"0 0 20 20\"\n                              >\n                                <path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\" />\n                              </svg>\n                            </div>\n                          </div>\n                          {selectedProduct ? (\n                            <p className=\"text-gray-700 text-xs italic\">\n                              <a\n                                href={selectedProduct.product_url}\n                                target=\"_blank\"\n                                rel=\"noopener noreferrer\"\n                              >\n                                <span className=\"text-blue-500\">\n                                  {\" \"}\n                                  Learn more\n                                </span>\n                              </a>{\" \"}\n                              about the selected loan type\n                            </p>\n                          ) : (\n                            \"\"\n                          )}\n                        </div>\n                      </div>\n                      <div className=\"flex flex-wrap -mx-3 mb-12\">\n                        <div className=\"w-full px-3 pt-4\">\n                          <label className=\"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-10\">\n                            Amount\n                          </label>\n                          <div className=\"relative\">\n                            <InputRange\n                              formatLabel={(value) =>\n                                `â‚¦` + Number(value).toLocaleString()\n                              }\n                              maxValue={\n                                selectedProduct\n                                  ? Number(selectedProduct.max_loan_amount)\n                                  : 0\n                              }\n                              minValue={\n                                selectedProduct\n                                  ? Number(selectedProduct.min_loan_amount)\n                                  : 0\n                              }\n                              step={1000}\n                              value={loanAmount}\n                              onChange={_handleLoanAmountUpdate}\n                              disabled={!!!selectedProduct}\n                              name=\"loan_amount\"\n                            />\n                          </div>\n                        </div>\n                      </div>\n\n                      <div className=\"flex flex-wrap -mx-3 mb-12\">\n                        <div className=\"w-full px-3 pt-4\">\n                          <label className=\"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-10\">\n                            Duration\n                          </label>\n                          <div className=\"relative\">\n                            <InputRange\n                              formatLabel={(value) => value + \" months\"}\n                              maxValue={\n                                selectedProduct\n                                  ? Number(\n                                      selectedProduct.max_number_of_repayment\n                                    )\n                                  : 0\n                              }\n                              minValue={\n                                selectedProduct\n                                  ? Number(\n                                      selectedProduct.min_number_of_repayment\n                                    )\n                                  : 0\n                              }\n                              step={1}\n                              value={noOfRepayments}\n                              onChange={_handleRepaymentsUpdate}\n                              disabled={!!!selectedProduct}\n                              name=\"no_of_repayments\"\n                            />\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"flex justify-center\">\n                        <button\n                          onClick={() =>\n                            props.history.replace({\n                              pathname: \"/loan-schedule\",\n                              loanData: {\n                                loan_amount: loanAmount,\n                                no_of_repayments: noOfRepayments,\n                                ...selectedProduct,\n                              },\n                            })\n                          }\n                          className={\n                            selectedProduct\n                              ? \"bg-green-600 hover:bg-green-700 text-white text-xl font-light py-3 px-10 rounded-lg focus:outline-none focus:shadow-outline inline-flex items-center transition-colors duration-150 ease-in-out\"\n                              : \"bg-gray-300 text-white text-xl font-light py-3 px-10 rounded-lg focus:outline-none focus:shadow-outline inline-flex items-center cursor-not-allowed\"\n                          }\n                          disabled={selectedProduct ? false : true}\n                          type=\"button\"\n                        >\n                          <span> Apply! </span>\n                          <svg\n                            className=\"ml-2 -mt-1\"\n                            width=\"18\"\n                            height=\"18\"\n                            viewBox=\"0 0 18 18\"\n                            fill=\"none\"\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                          >\n                            <g id=\"chevron_right_24px\">\n                              <path\n                                id=\"icon/navigation/chevron_right_24px\"\n                                d=\"M9.70492 6L8.29492 7.41L12.8749 12L8.29492 16.59L9.70492 18L15.7049 12L9.70492 6Z\"\n                                fill=\"white\"\n                              />\n                            </g>\n                          </svg>\n                        </button>\n                      </div>\n                    </div>\n                  </form>\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n        <br />\n      </main>\n    </>\n  );\n};\n\nexport default withRouter(NewLoanRequest);\n"]},"metadata":{},"sourceType":"module"}