{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Documents/react app/agilecreditportal/src/pages/PayWithCard.tsx\";\nimport React, { useState, useCallback } from \"react\";\nimport useAuthStore from \"../stores/authStore\";\nimport useProfileStore from \"../stores/profileStore\";\nimport { withRouter } from \"react-router-dom\";\nimport PayWithExistingCard from \"./PayWithExistingCard\";\nimport PayWithNewCard from \"./PayWithNewCard\";\n\nconst PayWithCard = props => {\n  const amountToPay = props.amount ? props.amount : null;\n  const loanId = props.loanId ? props.loanId : null;\n  const [isLoading, setLoading] = useState(false);\n  const token = useAuthStore(state => state.accessToken);\n  const profile = useProfileStore(useCallback(state => state.data, []));\n  const [responseData, setResponse] = useState();\n  const [responseMessage, setResponseMessage] = useState(null);\n  const [showCardsList, setShowCardsList] = useState(false);\n  const [selectedCard, setSelectedCard] = useState();\n  const [launchInitializaPayment, setLaunchInitializePayment] = useState(false);\n  const [errorMsg, setErrorMsg] = useState([]);\n\n  const updateErrors = errors => {\n    setErrorMsg(Object.values(errors).flat());\n  };\n\n  const _handlePayWithExistingCard = () => {\n    setShowCardsList(true);\n  };\n\n  const _handleCardSelection = id => {\n    setSelectedCard(id);\n  };\n\n  const _handlePayWithNewCard = () => {\n    setLaunchInitializePayment(true);\n  };\n\n  if (isLoading || !profile.e_mail) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-11/12 bg-white rounded py-12 shadow-lg m-auto px-8 relative mt-20\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"/img/loading-gif.gif\",\n      alt: \"\",\n      className: \"w-1/8 m-auto py-10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"h6\", {\n      className: \"m-auto text-lg text-gray-700 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }\n    }, \"Please wait while we process your request...\")));\n  }\n\n  if (amountToPay === null || loanId === null) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-11/12 bg-white rounded py-12 m-auto px-4 relative mt-20\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"/img/error-icon.svg\",\n      alt: \"\",\n      className: \"w-2/4 md:w-1/4 m-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"h6\", {\n      className: \"m-auto text-lg text-red-600 text-center font-semibold mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }\n    }, \"Ooops! The system was unable to capture one or more of your payment data. Please try again!\")));\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, errorMsg.length ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-11/12 m-auto bg-red-100 border-t-4 border-red-500 rounded-b text-red-900 px-4 py-3 shadow-md my-5\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"py-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    className: \"fill-current h-6 w-6 text-red-500 mr-4\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    style: {\n      listStyleType: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 15\n    }\n  }, errorMsg.map((error, i) => /*#__PURE__*/React.createElement(\"li\", {\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 19\n    }\n  }, error)))))) : \"\", responseMessage && (responseData === null || responseData === void 0 ? void 0 : responseData.length) > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-11/12 m-auto bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fade-in\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"py-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    className: \"fill-current h-6 w-6 text-teal-500 mr-4\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 15\n    }\n  }, responseMessage)))) : null, !showCardsList && !launchInitializaPayment ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"md:flex w-11/12 m-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex justify-between items-center w-full md:w-1/2 h-28 p-4 my-6 mr-2 hover:bg-green-100 rounded-lg border border-blue-300 shadow-md cursor-pointer transition duration-300 ease-in-out fadeInUp\",\n    onClick: _handlePayWithExistingCard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"rounded-lg h-12 w-12\",\n    src: \"/img/new-card.svg\",\n    alt: \"Saved cards\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ml-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-sm font-semibold text-gray-600\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 17\n    }\n  }, \"Use Existing Card\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-sm font-light text-gray-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 17\n    }\n  }, \"Pay with any of your previously saved cards.\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex justify-between items-center w-full md:w-1/2 h-28 p-4 my-6 mr-2 hover:bg-green-100 rounded-lg border border-blue-300 shadow-md cursor-pointer transition duration-300 ease-in-out fadeInUp\",\n    onClick: _handlePayWithNewCard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"rounded-lg h-12 w-12\",\n    src: \"/img/saved-cards.svg\",\n    alt: \"New card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ml-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-sm font-semibold text-gray-600\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 17\n    }\n  }, \"New Card\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-sm font-light text-gray-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 17\n    }\n  }, \"Pay with a new card\"))))) : null, showCardsList ? /*#__PURE__*/React.createElement(PayWithExistingCard, {\n    amount: amountToPay,\n    loanId: loanId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 24\n    }\n  }) : null, launchInitializaPayment ? /*#__PURE__*/React.createElement(PayWithNewCard, {\n    amount: amountToPay,\n    loanId: loanId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 34\n    }\n  }) : null);\n};\n\nexport default withRouter(PayWithCard);","map":{"version":3,"sources":["/Users/mac/Documents/react app/agilecreditportal/src/pages/PayWithCard.tsx"],"names":["React","useState","useCallback","useAuthStore","useProfileStore","withRouter","PayWithExistingCard","PayWithNewCard","PayWithCard","props","amountToPay","amount","loanId","isLoading","setLoading","token","state","accessToken","profile","data","responseData","setResponse","responseMessage","setResponseMessage","showCardsList","setShowCardsList","selectedCard","setSelectedCard","launchInitializaPayment","setLaunchInitializePayment","errorMsg","setErrorMsg","updateErrors","errors","Object","values","flat","_handlePayWithExistingCard","_handleCardSelection","id","_handlePayWithNewCard","e_mail","length","listStyleType","map","error","i"],"mappings":"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","sourcesContent":["import React, { useState, useCallback } from \"react\";\nimport MyCards from \"./MyCards\";\nimport useAuthStore from \"../stores/authStore\";\nimport useProfileStore from \"../stores/profileStore\";\nimport { getCards } from \"../clients/cards\";\nimport { withRouter } from \"react-router-dom\";\nimport PayWithExistingCard from \"./PayWithExistingCard\";\nimport PayWithNewCard from \"./PayWithNewCard\";\n\nconst PayWithCard = (props: any) => {\n  const amountToPay = props.amount ? props.amount : null;\n  const loanId = props.loanId ? props.loanId : null;\n  const [isLoading, setLoading] = useState(false);\n\n  const token = useAuthStore((state) => state.accessToken);\n  const profile: any = useProfileStore(useCallback((state) => state.data, []));\n  const [responseData, setResponse]: any = useState();\n  const [responseMessage, setResponseMessage]: any = useState(null);\n  const [showCardsList, setShowCardsList]: any = useState(false);\n  const [selectedCard, setSelectedCard] = useState<any>();\n  const [launchInitializaPayment, setLaunchInitializePayment] = useState(false);\n\n  const [errorMsg, setErrorMsg] = useState([]);\n\n  const updateErrors = (errors: []) => {\n    setErrorMsg(Object.values(errors).flat());\n  };\n\n  const _handlePayWithExistingCard = () => {\n    setShowCardsList(true);\n  };\n\n  const _handleCardSelection = (id) => {\n    setSelectedCard(id);\n  };\n\n  const _handlePayWithNewCard = () => {\n    setLaunchInitializePayment(true);\n  };\n\n  if (isLoading || !profile.e_mail) {\n    return (\n      <>\n        <div className=\"w-11/12 bg-white rounded py-12 shadow-lg m-auto px-8 relative mt-20\">\n          <img\n            src=\"/img/loading-gif.gif\"\n            alt=\"\"\n            className=\"w-1/8 m-auto py-10\"\n          />\n          <h6 className=\"m-auto text-lg text-gray-700 text-center\">\n            Please wait while we process your request...\n          </h6>\n        </div>\n      </>\n    );\n  }\n\n  if (amountToPay === null || loanId === null) {\n    return (\n      <>\n        <div className=\"w-11/12 bg-white rounded py-12 m-auto px-4 relative mt-20\">\n          <img\n            src=\"/img/error-icon.svg\"\n            alt=\"\"\n            className=\"w-2/4 md:w-1/4 m-auto\"\n          />\n          <h6 className=\"m-auto text-lg text-red-600 text-center font-semibold mt-4\">\n            Ooops! The system was unable to capture one or more of your payment data. Please try\n            again!\n          </h6>\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <>\n      {errorMsg.length ? (\n        <div\n          className=\"w-11/12 m-auto bg-red-100 border-t-4 border-red-500 rounded-b text-red-900 px-4 py-3 shadow-md my-5\"\n          role=\"alert\"\n        >\n          <div className=\"flex\">\n            <div className=\"py-1\">\n              <svg\n                className=\"fill-current h-6 w-6 text-red-500 mr-4\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                viewBox=\"0 0 20 20\"\n              >\n                <path d=\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\" />\n              </svg>\n            </div>\n            <div>\n              <ul style={{ listStyleType: \"none\" }}>\n                {errorMsg.map((error, i) => (\n                  <li key={i}>{error}</li>\n                ))}\n              </ul>\n            </div>\n          </div>\n        </div>\n      ) : (\n        \"\"\n      )}\n      {responseMessage && responseData?.length > 0 ? (\n        <div\n          className=\"w-11/12 m-auto bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md fade-in\"\n          role=\"alert\"\n        >\n          <div className=\"flex\">\n            <div className=\"py-1\">\n              <svg\n                className=\"fill-current h-6 w-6 text-teal-500 mr-4\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                viewBox=\"0 0 20 20\"\n              >\n                <path d=\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\" />\n              </svg>\n            </div>\n            <div>\n              <p className=\"text-sm\">{responseMessage}</p>\n            </div>\n          </div>\n        </div>\n      ) : null}\n\n      {!showCardsList && !launchInitializaPayment ? (\n        <div className=\"md:flex w-11/12 m-auto\">\n          <div\n            className=\"flex justify-between items-center w-full md:w-1/2 h-28 p-4 my-6 mr-2 hover:bg-green-100 rounded-lg border border-blue-300 shadow-md cursor-pointer transition duration-300 ease-in-out fadeInUp\"\n            onClick={_handlePayWithExistingCard}\n          >\n            <div className=\"flex items-center\">\n              <img\n                className=\"rounded-lg h-12 w-12\"\n                src=\"/img/new-card.svg\"\n                alt=\"Saved cards\"\n              />\n              <div className=\"ml-4\">\n                <div className=\"text-sm font-semibold text-gray-600\">\n                  Use Existing Card\n                </div>\n                <div className=\"text-sm font-light text-gray-500\">\n                  Pay with any of your previously saved cards.\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"flex justify-between items-center w-full md:w-1/2 h-28 p-4 my-6 mr-2 hover:bg-green-100 rounded-lg border border-blue-300 shadow-md cursor-pointer transition duration-300 ease-in-out fadeInUp\" onClick={_handlePayWithNewCard}>\n            <div className=\"flex items-center\">\n              <img\n                className=\"rounded-lg h-12 w-12\"\n                src=\"/img/saved-cards.svg\"\n                alt=\"New card\"\n              />\n              <div className=\"ml-4\">\n                <div className=\"text-sm font-semibold text-gray-600\">\n                  New Card\n                </div>\n                <div className=\"text-sm font-light text-gray-500\">\n                  Pay with a new card\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      ) : null}\n      {showCardsList ? <PayWithExistingCard amount={amountToPay} loanId={loanId} /> : null}\n      {launchInitializaPayment ? <PayWithNewCard amount={amountToPay} loanId={loanId}/> : null}\n    </>\n  );\n};\n\nexport default withRouter(PayWithCard);\n"]},"metadata":{},"sourceType":"module"}