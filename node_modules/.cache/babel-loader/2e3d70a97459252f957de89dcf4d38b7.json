{"ast":null,"code":"import _slicedToArray from\"/Users/mac/Documents/react app/agilecreditportal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useCallback}from'react';export default function DecliningBalanceEqualPrincipal(props){var principal=parseFloat(props.amount);var rate=parseFloat(props.rate);var tenor=parseFloat(props.tenor);// Re-storing principal varialble as a static value for later calculation\nvar staticPrincipal=principal;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),schedule=_useState2[0],setSchedule=_useState2[1];var interestRate=rate/100;var monthly=interestRate/12;var calculateSchedule=useCallback(function(){function fixVal(value,numberOfCharacters,numberOfDecimals,padCharacter){var i,stringObject,stringLength,numberToPad;value=value*Math.pow(10,numberOfDecimals);value=Math.round(value);stringObject=new String(value);stringLength=stringObject.length;// get length of string\nwhile(stringLength<numberOfDecimals){stringObject=\"0\"+stringObject;// add a leading zero\nstringLength=stringLength+1;}if(numberOfDecimals>0){stringObject=stringObject.substring(0,stringLength-numberOfDecimals)+\".\"+stringObject.substring(stringLength-numberOfDecimals,stringLength);}if(stringObject.length<numberOfCharacters&&numberOfCharacters>0){numberToPad=numberOfCharacters-stringObject.length;for(i=0;i<numberToPad;i=i+1){stringObject=padCharacter+stringObject;}}return stringObject;}var monthlyPrincipal=principal/tenor;var totalInterest=0;var i=1;var data=[];while(i<=tenor){var monthlyInterest=monthly*principal;var repayment=monthlyPrincipal+monthlyInterest;var newBalance=principal-monthlyPrincipal;var innerData={};innerData={\"i\":i,\"repayment\":fixVal(repayment,0,2,' '),\"interest\":fixVal(monthlyInterest,0,2,' '),\"principal\":fixVal(monthlyPrincipal,0,2,' '),\"balance\":fixVal(newBalance,0,2,' ')};data.push(innerData);principal=newBalance;// Get the total interest to be paid\ntotalInterest+=monthlyInterest;i++;}// Get the total repayment to be paid\nvar totalRepayment=staticPrincipal+totalInterest;// Append total interest and total repayment to be paid to the data array for display on the page\ndata.push(totalInterest,totalRepayment);setSchedule(data);},[monthly,principal,tenor]);useEffect(function(){calculateSchedule();},[calculateSchedule]);var totalInterest=schedule[schedule.length-2];var totalRepayment=schedule[schedule.length-1];var filteredSchedule=schedule.slice(0,schedule.length-2);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",{className:\"text-gray-700 text-md md:text-xl\"},\" Total Interest: \",/*#__PURE__*/React.createElement(\"span\",{className:\"font-bold\"},\"\\u20A6\",Number(totalInterest).toLocaleString(undefined,{maximumFractionDigits:2}),\" \")),/*#__PURE__*/React.createElement(\"h3\",{className:\"text-gray-700 text-md md:text-xl\"},\" Total Repayment: \",/*#__PURE__*/React.createElement(\"span\",{className:\"font-bold text-green-700\"},\"\\u20A6\",Number(totalRepayment).toLocaleString(undefined,{maximumFractionDigits:2}),\" \"))),/*#__PURE__*/React.createElement(\"div\",{className:\"-mx-4 sm:-mx-8 px-4 sm:px-8 py-4 overflow-auto  fade-in mt-5 mb-10\"},/*#__PURE__*/React.createElement(\"div\",{className:\"inline-block min-w-full shadow rounded-lg overflow-hidden\"},/*#__PURE__*/React.createElement(\"table\",{className:\"min-w-full w-full leading-normal\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"flex w-full\"},/*#__PURE__*/React.createElement(\"tr\",{className:\"flex w-full\"},/*#__PURE__*/React.createElement(\"th\",{className:\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\"},\"S/N\"),/*#__PURE__*/React.createElement(\"th\",{className:\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider text-center\"},\"Principal (\\u20A6)\"),/*#__PURE__*/React.createElement(\"th\",{className:\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider text-center\"},\"Interest (\\u20A6)\"),/*#__PURE__*/React.createElement(\"th\",{className:\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider text-center\"},\"Repayment (\\u20A6)\"),/*#__PURE__*/React.createElement(\"th\",{className:\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider text-center\"},\"Balance (\\u20A6)\"))),/*#__PURE__*/React.createElement(\"tbody\",{className:\"flex flex-col items-center overflow-y-scroll w-full schedule-table\"},filteredSchedule.map(function(s){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"tr\",{className:\"flex w-full\"},/*#__PURE__*/React.createElement(\"td\",{className:\"p-4 w-1/4 px-5 py-5 border-b border-gray-200 bg-white text-sm text-gray-700\"},s.i,\".\"),/*#__PURE__*/React.createElement(\"td\",{className:\"p-4 w-1/4 px-5 py-5 border-b border-gray-200 bg-white text-sm text-gray-700 text-center\"},Number(s.principal).toLocaleString(undefined,{maximumFractionDigits:2})),/*#__PURE__*/React.createElement(\"td\",{className:\"p-4 w-1/4 px-5 py-5 border-b border-gray-200 bg-white text-sm text-gray-700 text-center\"},Number(s.interest).toLocaleString(undefined,{maximumFractionDigits:2})),/*#__PURE__*/React.createElement(\"td\",{className:\"p-4 w-1/4 px-5 py-5 border-b border-gray-200 bg-white text-sm text-green-600 font-bold text-center\"},Number(s.repayment).toLocaleString(undefined,{maximumFractionDigits:2})),/*#__PURE__*/React.createElement(\"td\",{className:\"p-4 w-1/4 px-5 py-5 border-b border-gray-200 bg-white text-sm text-gray-700 text-center\"},Number(s.balance).toLocaleString(undefined,{maximumFractionDigits:2}))));}))))));}","map":{"version":3,"sources":["/Users/mac/Documents/react app/agilecreditportal/src/components/LoanSchedule/DecliningBalanceEqualPrincipal.tsx"],"names":["React","useState","useEffect","useCallback","DecliningBalanceEqualPrincipal","props","principal","parseFloat","amount","rate","tenor","staticPrincipal","schedule","setSchedule","interestRate","monthly","calculateSchedule","fixVal","value","numberOfCharacters","numberOfDecimals","padCharacter","i","stringObject","stringLength","numberToPad","Math","pow","round","String","length","substring","monthlyPrincipal","totalInterest","data","monthlyInterest","repayment","newBalance","innerData","push","totalRepayment","filteredSchedule","slice","Number","toLocaleString","undefined","maximumFractionDigits","map","s","interest","balance"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useCallback} from 'react';\n\n\nexport default function DecliningBalanceEqualPrincipal(props: any) {\n\n    let principal = parseFloat(props.amount);\n    let rate = parseFloat(props.rate);\n    let tenor = parseFloat(props.tenor);\n    \n    // Re-storing principal varialble as a static value for later calculation\n    const staticPrincipal = principal; \n\n    const [schedule, setSchedule] = useState<any[]>([]);\n\n    let interestRate=rate/100;\n    let monthly=interestRate/12;\n\n    const calculateSchedule = useCallback(() => {\n\n        function fixVal(value,numberOfCharacters,numberOfDecimals,padCharacter) { \n            var i, stringObject, stringLength, numberToPad;            \n        \n            value=value*Math.pow(10,numberOfDecimals);                 \n            value=Math.round(value);                                   \n        \n            stringObject=new String(value);                            \n            stringLength=stringObject.length;                          // get length of string\n            while(stringLength<numberOfDecimals) {                     \n                stringObject=\"0\"+stringObject;                     // add a leading zero\n                stringLength=stringLength+1;                       \n            }\n        \n            if(numberOfDecimals>0) {\t\t\t           \n                stringObject=stringObject.substring(0,stringLength-numberOfDecimals)+\".\"+\n                stringObject.substring(stringLength-numberOfDecimals,stringLength);\n            }\n        \n            if (stringObject.length<numberOfCharacters && numberOfCharacters>0) {\n                numberToPad=numberOfCharacters-stringObject.length;      \n                for (i=0; i<numberToPad; i=i+1) {\n                    stringObject=padCharacter+stringObject;\n                }\n            }\n        \n            return stringObject;                                       \n        }\n    \n        let monthlyPrincipal=principal/tenor;\n        let totalInterest  = 0;\n        \n        let i =1;\n        let data: any[] = [];\n        while (i <= tenor) {\n\n            let monthlyInterest=monthly*principal;\n            let repayment = monthlyPrincipal + monthlyInterest \n            let newBalance = principal - monthlyPrincipal\n            \n            let innerData = {};\n\n            innerData= {\n                \"i\" : i,\n                \"repayment\": fixVal(repayment,0,2,' '),\n                \"interest\": fixVal(monthlyInterest,0,2,' '),\n                \"principal\": fixVal(monthlyPrincipal,0,2,' '),\n                \"balance\": fixVal(newBalance,0,2,' ')\n            };\n            data.push(innerData);\n\n            principal = newBalance;\n            // Get the total interest to be paid\n            totalInterest  += monthlyInterest;\n            i++;\n        }\n\n        // Get the total repayment to be paid\n        let totalRepayment = staticPrincipal + totalInterest\n\n\n        // Append total interest and total repayment to be paid to the data array for display on the page\n        data.push(totalInterest, totalRepayment);\n\n        setSchedule(data);\n        \n\n    }, [monthly, principal, tenor]);\n\n    useEffect(() => {\n        calculateSchedule();\n    }, [calculateSchedule])\n    \n    const totalInterest = schedule[schedule.length-2];\n    const totalRepayment = schedule[schedule.length-1];\n    const filteredSchedule = schedule.slice(0, schedule.length-2);\n\n\n    return (\n        <>  \n            <div>\n                <h3 className=\"text-gray-700 text-md md:text-xl\"> Total Interest: <span className=\"font-bold\">₦{Number(totalInterest).toLocaleString(undefined, {maximumFractionDigits: 2})} </span></h3>\n                <h3 className=\"text-gray-700 text-md md:text-xl\"> Total Repayment: <span className=\"font-bold text-green-700\">₦{Number(totalRepayment).toLocaleString(undefined, {maximumFractionDigits: 2})} </span></h3>\n            </div>\n            <div className=\"-mx-4 sm:-mx-8 px-4 sm:px-8 py-4 overflow-auto  fade-in mt-5 mb-10\">\n                <div className=\"inline-block min-w-full shadow rounded-lg overflow-hidden\">\n                    <table className=\"min-w-full w-full leading-normal\">\n                        <thead className=\"flex w-full\">\n                            <tr className=\"flex w-full\">\n                                <th className=\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">S/N</th>\n                                <th className=\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider text-center\">Principal (₦)</th>\n                                <th className=\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider text-center\">Interest (₦)</th>\n                                <th className=\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider text-center\">Repayment (₦)</th>\n                                <th className=\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider text-center\">Balance (₦)</th>\n                            </tr>\n                        </thead>\n                        <tbody className=\"flex flex-col items-center overflow-y-scroll w-full schedule-table\">\n                            {filteredSchedule.map((s) => (\n                                <>\n                                    <tr className=\"flex w-full\">\n                                        <td className=\"p-4 w-1/4 px-5 py-5 border-b border-gray-200 bg-white text-sm text-gray-700\">{s.i}.</td>\n                                        <td className=\"p-4 w-1/4 px-5 py-5 border-b border-gray-200 bg-white text-sm text-gray-700 text-center\">{Number(s.principal).toLocaleString(undefined, {maximumFractionDigits: 2})}</td>\n                                        <td className=\"p-4 w-1/4 px-5 py-5 border-b border-gray-200 bg-white text-sm text-gray-700 text-center\">{Number(s.interest).toLocaleString(undefined, {maximumFractionDigits: 2})}</td>\n                                        <td className=\"p-4 w-1/4 px-5 py-5 border-b border-gray-200 bg-white text-sm text-green-600 font-bold text-center\">{Number(s.repayment).toLocaleString(undefined, {maximumFractionDigits: 2})}</td>\n                                        <td className=\"p-4 w-1/4 px-5 py-5 border-b border-gray-200 bg-white text-sm text-gray-700 text-center\">{Number(s.balance).toLocaleString(undefined, {maximumFractionDigits: 2})}</td>\n                                    </tr>\n                                </>\n                            ))}\n                        </tbody>\n                    </table>  \n                </div>\n            </div>\n        </>\n    ) \n}"]},"metadata":{},"sourceType":"module"}