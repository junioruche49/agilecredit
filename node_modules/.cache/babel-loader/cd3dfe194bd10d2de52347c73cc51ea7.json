{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Documents/react app/agilecreditportal/src/App.tsx\";\nimport React, { useEffect, useCallback } from \"react\";\nimport { BrowserRouter as Router, Switch, Route, useHistory } from \"react-router-dom\";\nimport Layout from \"./components/Layout\";\nimport Home from \"./pages/Home\";\nimport Profile from \"./pages/Profile\";\nimport Onboarding from \"./pages/Onboarding\";\nimport useAuthStore from \"./stores/authStore\";\nimport useProfileStore from \"./stores/profileStore\";\nimport MyLoans from \"./pages/MyLoans\";\nimport NewLoanRequest from \"./pages/NewLoanRequest\";\nimport LoanSchedule from \"./pages/LoanSchedule\";\nimport MyCards from \"./pages/MyCards\";\nimport AddCard from \"./pages/AddCard\";\nimport { getPersonalDetails } from \"./clients/profile\";\nimport { getProfileSection } from \"./clients/onboarding\";\nimport LoanRequests from \"./pages/LoanRequests\";\nimport keycloak from \"./auth/keycloak\";\nimport PaymentCallback from \"./pages/PaymentCallback\";\nimport Pay from \"./pages/Pay\";\nimport PageNotFound from \"./pages/PageNotFound\";\nimport PaymentSuccess from \"./pages/PaymentSuccess\";\nimport LoanDetails from \"./pages/LoanDetails\";\nexport default function App() {\n  const history = useHistory();\n  const authenticated = useAuthStore(useCallback(state => state.authenticated, []));\n  const initializeAuthStore = useAuthStore(useCallback(state => state.initialize, []));\n  const initializeProfileStore = useProfileStore(useCallback(state => state.initialize, []));\n  const initializeProfileSection = useProfileStore(useCallback(state => state.initializeProfileSection, []));\n\n  const _initializeStores = useCallback(async keycloak => {\n    initializeAuthStore(keycloak);\n    const {\n      token\n    } = keycloak;\n\n    try {\n      const {\n        data\n      } = await getPersonalDetails(token);\n      const checklist = await getProfileSection(token);\n      initializeProfileStore(data);\n      initializeProfileSection(checklist, checklist.every(loan => loan.completed === true));\n    } catch (error) {}\n  }, [initializeAuthStore, initializeProfileSection, initializeProfileStore]);\n\n  const _refreshToken = useCallback(async keycloak => {\n    keycloak.updateToken(70).then(async refreshed => {\n      if (refreshed) {\n        initializeAuthStore(keycloak);\n      }\n    }).catch(err => {\n      keycloak.logout();\n      history.replace(\"/\");\n    });\n  }, [initializeAuthStore, history]);\n\n  const _initializeAuthentication = useCallback(() => {\n    keycloak.init({\n      onLoad: \"login-required\"\n    }).then(async authenticated => {\n      if (authenticated) {\n        _initializeStores(keycloak);\n      }\n    });\n  }, [_initializeStores, keycloak]);\n\n  useEffect(() => {\n    _initializeAuthentication();\n\n    return () => {};\n  }, [_initializeAuthentication]);\n\n  if (!authenticated) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-full m-auto px-8 relative\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"/img/loading-gif.gif\",\n      alt: \"\",\n      className: \"w-1/8 m-auto pt-64 pb-10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"h6\", {\n      className: \"m-auto text-lg text-gray-700 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }\n    }, \"One moment please...\")));\n  }\n\n  return /*#__PURE__*/React.createElement(Router, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Home, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/new-loan-request\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(NewLoanRequest, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/loan-schedule\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(LoanSchedule, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Profile, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/loans\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(MyLoans, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/loan-details/:loanId\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(LoanDetails, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/onboarding\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Onboarding, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/applications\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(LoanRequests, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/pay/callback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(PaymentCallback, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/cards/add\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(AddCard, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/cards\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(MyCards, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/pay/success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(PaymentSuccess, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/pay/:loanId\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Pay, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"*\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(PageNotFound, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }\n  })))));\n}","map":{"version":3,"sources":["/Users/mac/Documents/react app/agilecreditportal/src/App.tsx"],"names":["React","useEffect","useCallback","BrowserRouter","Router","Switch","Route","useHistory","Layout","Home","Profile","Onboarding","useAuthStore","useProfileStore","MyLoans","NewLoanRequest","LoanSchedule","MyCards","AddCard","getPersonalDetails","getProfileSection","LoanRequests","keycloak","PaymentCallback","Pay","PageNotFound","PaymentSuccess","LoanDetails","App","history","authenticated","state","initializeAuthStore","initialize","initializeProfileStore","initializeProfileSection","_initializeStores","token","data","checklist","every","loan","completed","error","_refreshToken","updateToken","then","refreshed","catch","err","logout","replace","_initializeAuthentication","init","onLoad"],"mappings":"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","sourcesContent":["import React, { useEffect, useCallback } from \"react\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  useHistory,\n} from \"react-router-dom\";\nimport Keycloak from \"keycloak-js\";\n\nimport Layout from \"./components/Layout\";\nimport Home from \"./pages/Home\";\nimport Profile from \"./pages/Profile\";\nimport Onboarding from \"./pages/Onboarding\";\nimport Bvn from \"./pages/Bvn\";\nimport useAuthStore from \"./stores/authStore\";\nimport useProfileStore from \"./stores/profileStore\";\nimport MyLoans from \"./pages/MyLoans\";\nimport NewLoanRequest from \"./pages/NewLoanRequest\";\nimport LoanSchedule from \"./pages/LoanSchedule\";\nimport MyCards from \"./pages/MyCards\";\nimport AddCard from \"./pages/AddCard\";\n\nimport { getPersonalDetails } from \"./clients/profile\";\nimport { getProfileSection } from \"./clients/onboarding\";\nimport LoanRequests from \"./pages/LoanRequests\";\nimport keycloak from \"./auth/keycloak\";\nimport PaymentCallback from \"./pages/PaymentCallback\";\nimport Pay from \"./pages/Pay\";\nimport PageNotFound from \"./pages/PageNotFound\";\nimport PaymentSuccess from \"./pages/PaymentSuccess\";\nimport LoanDetails from \"./pages/LoanDetails\";\n\nexport default function App() {\n  const history = useHistory();\n\n  const authenticated = useAuthStore(\n    useCallback((state) => state.authenticated, [])\n  );\n\n  const initializeAuthStore = useAuthStore(\n    useCallback((state) => state.initialize, [])\n  );\n\n  const initializeProfileStore = useProfileStore(\n    useCallback((state) => state.initialize, [])\n  );\n\n  const initializeProfileSection = useProfileStore(\n    useCallback((state) => state.initializeProfileSection, [])\n  );\n\n  const _initializeStores = useCallback(\n    async (keycloak: Keycloak.KeycloakInstance) => {\n      initializeAuthStore(keycloak);\n      const { token } = keycloak;\n      try {\n        const { data } = await getPersonalDetails(token);\n        const checklist = await getProfileSection(token);\n        initializeProfileStore(data);\n        initializeProfileSection(\n          checklist,\n          checklist.every((loan) => loan.completed === true)\n        );\n      } catch (error) {}\n    },\n    [initializeAuthStore, initializeProfileSection, initializeProfileStore]\n  );\n\n  const _refreshToken = useCallback(\n    async (keycloak: Keycloak.KeycloakInstance) => {\n      keycloak\n        .updateToken(70)\n        .then(async (refreshed) => {\n          if (refreshed) {\n            initializeAuthStore(keycloak);\n          }\n        })\n        .catch((err) => {\n          keycloak.logout();\n          history.replace(\"/\");\n        });\n    },\n    [initializeAuthStore, history]\n  );\n\n  const _initializeAuthentication = useCallback(() => {\n    keycloak.init({ onLoad: \"login-required\" }).then(async (authenticated) => {\n      if (authenticated) {\n        _initializeStores(keycloak);\n      }\n    });\n  }, [_initializeStores, keycloak]);\n\n  useEffect(() => {\n    _initializeAuthentication();\n    return () => {};\n  }, [_initializeAuthentication]);\n\n  if (!authenticated) {\n    return (\n      <>\n        <div className=\"w-full m-auto px-8 relative\">\n          <img\n            src=\"/img/loading-gif.gif\"\n            alt=\"\"\n            className=\"w-1/8 m-auto pt-64 pb-10\"\n          />\n          <h6 className=\"m-auto text-lg text-gray-700 text-center\">\n            One moment please...\n          </h6>\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <Router>\n      <Layout>\n        <Switch>\n          <Route exact path=\"/\">\n            <Home />\n          </Route>\n          <Route path=\"/new-loan-request\">\n            <NewLoanRequest />\n          </Route>\n          <Route path=\"/loan-schedule\">\n            <LoanSchedule />\n          </Route>\n          <Route path=\"/profile\">\n            <Profile />\n          </Route>\n          <Route path=\"/loans\">\n            <MyLoans />\n          </Route>\n          <Route path=\"/loan-details/:loanId\">\n            <LoanDetails />\n          </Route>\n          <Route path=\"/onboarding\">\n            <Onboarding />\n          </Route>\n          <Route path=\"/applications\">\n            <LoanRequests />\n          </Route>\n          <Route path=\"/pay/callback\">\n            <PaymentCallback />\n          </Route>\n          <Route path=\"/cards/add\">\n            <AddCard />\n          </Route>\n          <Route path=\"/cards\">\n            <MyCards />\n          </Route>\n          <Route path=\"/pay/success\">\n            <PaymentSuccess />\n          </Route>\n          <Route path=\"/pay/:loanId\">\n            <Pay />\n          </Route>\n          <Route path=\"*\">\n            <PageNotFound />\n          </Route>\n        </Switch>\n      </Layout>\n    </Router>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}