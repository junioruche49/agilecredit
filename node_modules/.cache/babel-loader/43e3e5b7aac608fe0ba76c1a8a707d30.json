{"ast":null,"code":"import create from \"zustand\";\nconst useAuthStore = create(set => ({\n  authenticated: false,\n  accessToken: null,\n  currentUser: null,\n  logout: () => {},\n\n  initialize(keycloak) {\n    set({\n      logout: keycloak.logout,\n      authenticated: keycloak.authenticated,\n      accessToken: keycloak.token\n    });\n    keycloak.loadUserProfile().then(profile => {\n      set({\n        currentUser: profile\n      });\n    }).catch(_ => {});\n  }\n\n}));\nexport default useAuthStore;","map":{"version":3,"sources":["/Users/mac/Documents/react app/agilecreditportal/src/stores/authStore.ts"],"names":["create","useAuthStore","set","authenticated","accessToken","currentUser","logout","initialize","keycloak","token","loadUserProfile","then","profile","catch","_"],"mappings":"AAAA,OAAOA,MAAP,MAAwC,SAAxC;AAUA,MAAMC,YAAiC,GAAGD,MAAM,CAAEE,GAAD,KAAU;AACzDC,EAAAA,aAAa,EAAE,KAD0C;AAEzDC,EAAAA,WAAW,EAAE,IAF4C;AAGzDC,EAAAA,WAAW,EAAE,IAH4C;AAIzDC,EAAAA,MAAM,EAAE,MAAM,CAAE,CAJyC;;AAKzDC,EAAAA,UAAU,CAACC,QAAD,EAAsC;AAC9CN,IAAAA,GAAG,CAAC;AACFI,MAAAA,MAAM,EAAEE,QAAQ,CAACF,MADf;AAEFH,MAAAA,aAAa,EAAEK,QAAQ,CAACL,aAFtB;AAGFC,MAAAA,WAAW,EAAEI,QAAQ,CAACC;AAHpB,KAAD,CAAH;AAMAD,IAAAA,QAAQ,CACLE,eADH,GAEGC,IAFH,CAESC,OAAD,IAAa;AACjBV,MAAAA,GAAG,CAAC;AAAEG,QAAAA,WAAW,EAAEO;AAAf,OAAD,CAAH;AACD,KAJH,EAKGC,KALH,CAKUC,CAAD,IAAO,CAAE,CALlB;AAMD;;AAlBwD,CAAV,CAAD,CAAhD;AAqBA,eAAeb,YAAf","sourcesContent":["import create, { UseStore, State } from \"zustand\";\n\nexport interface AuthState extends State {\n  authenticated: boolean;\n  accessToken: null | string;\n  currentUser: null | Keycloak.KeycloakProfile;\n  initialize: (keycloak: Keycloak.KeycloakInstance) => void;\n  logout: () => void;\n}\n\nconst useAuthStore: UseStore<AuthState> = create((set) => ({\n  authenticated: false,\n  accessToken: null,\n  currentUser: null,\n  logout: () => {},\n  initialize(keycloak: Keycloak.KeycloakInstance) {\n    set({\n      logout: keycloak.logout,\n      authenticated: keycloak.authenticated,\n      accessToken: keycloak.token,\n    });\n\n    keycloak\n      .loadUserProfile()\n      .then((profile) => {\n        set({ currentUser: profile });\n      })\n      .catch((_) => {});\n  },\n}));\n\nexport default useAuthStore;\n"]},"metadata":{},"sourceType":"module"}