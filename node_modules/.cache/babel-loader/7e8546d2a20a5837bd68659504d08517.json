{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mac/Documents/react app/agilecreditportal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mac/Documents/react app/agilecreditportal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mac/Documents/react app/agilecreditportal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useTable}from\"react-table\";import useAuthStore from\"../stores/authStore\";import{getLoans}from\"../clients/loan\";import{withRouter}from\"react-router\";function MyLoans(props){var token=useAuthStore(function(state){return state.accessToken;});var _useState=useState([]),_useState2=_slicedToArray(_useState,2),allMyLoans=_useState2[0],setAllMyLoans=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),errorMsg=_useState6[0],setErrorMsg=_useState6[1];var updateErrors=function updateErrors(errors){setErrorMsg(Object.values(errors).flat());};var getAllLoans=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(token){var postData,data,tableDatas,msg,_msg,_data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.prev=1;_context.next=4;return getLoans(token);case 4:postData=_context.sent;data=postData.data;tableDatas=[];setLoading(false);data&&data.map(function(item){tableDatas.push({col1:item.loan_id,col2:item.description,col3:/*#__PURE__*/React.createElement(\"span\",{className:\"text-green-600 font-bold\"},\"\\u20A6\",Number(item.loan_amount).toLocaleString(undefined,{maximumFractionDigits:2})),col4:new Date(item.repayment_starting_date).toDateString(),col6:/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return props.history.push(\"/loan-details/\"+item.uuid);},className:\"bg-blue-800 py-1 px-2 rounded\"},/*#__PURE__*/React.createElement(\"svg\",{width:\"15\",height:\"15\",viewBox:\"0 0 15 15\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"g\",{id:\"visibility_24px\"},/*#__PURE__*/React.createElement(\"path\",{id:\"icon/action/visibility_24px\",fillRule:\"evenodd\",clipRule:\"evenodd\",d:\"M0.625 7.5C1.70625 4.75625 4.375 2.8125 7.5 2.8125C10.625 2.8125 13.2937 4.75625 14.375 7.5C13.2937 10.2438 10.625 12.1875 7.5 12.1875C4.375 12.1875 1.70625 10.2438 0.625 7.5ZM13.0125 7.5C11.9813 5.39375 9.86878 4.0625 7.50003 4.0625C5.13128 4.0625 3.01878 5.39375 1.98753 7.5C3.01878 9.60625 5.13128 10.9375 7.50003 10.9375C9.86878 10.9375 11.9813 9.60625 13.0125 7.5ZM7.5 5.9375C8.3625 5.9375 9.0625 6.6375 9.0625 7.5C9.0625 8.3625 8.3625 9.0625 7.5 9.0625C6.6375 9.0625 5.9375 8.3625 5.9375 7.5C5.9375 6.6375 6.6375 5.9375 7.5 5.9375ZM4.6875 7.5C4.6875 5.95 5.95 4.6875 7.5 4.6875C9.05 4.6875 10.3125 5.95 10.3125 7.5C10.3125 9.05 9.05 10.3125 7.5 10.3125C5.95 10.3125 4.6875 9.05 4.6875 7.5Z\",fill:\"white\"}))))});});setAllMyLoans(tableDatas);_context.next=27;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);setLoading(false);if(!(_context.t0&&_context.t0.response.status===500)){_context.next=20;break;}msg=[];msg.push(_context.t0.response.data.message);setErrorMsg(msg);return _context.abrupt(\"return\");case 20:if(_context.t0.response){_context.next=25;break;}_msg=[];_msg.push(\"Network Error, Check Your Internet Connection\");setErrorMsg(_msg);return _context.abrupt(\"return\");case 25:_data=_context.t0.response.data;_data.errors&&updateErrors(_data.errors);case 27:case\"end\":return _context.stop();}}},_callee,null,[[1,12]]);}));return function getAllLoans(_x){return _ref.apply(this,arguments);};}();useEffect(function(){getAllLoans(token);},[]);var columns=React.useMemo(function(){return[{Header:\"Loan ID\",accessor:\"col1\"// accessor is the \"key\" in the data\n},{Header:\"Type\",accessor:\"col2\"},{Header:\"Amount\",accessor:\"col3\"},{Header:\"Date\",accessor:\"col4\"},{Header:\"Action\",accessor:\"col6\"}];},[]);var _useTable=useTable({columns:columns,data:allMyLoans}),getTableProps=_useTable.getTableProps,getTableBodyProps=_useTable.getTableBodyProps,headerGroups=_useTable.headerGroups,rows=_useTable.rows,prepareRow=_useTable.prepareRow;if(loading){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"w-full m-auto px-8 relative\"},/*#__PURE__*/React.createElement(\"img\",{src:\"/img/loading-gif.gif\",alt:\"\",className:\"w-1/8 m-auto py-20\"})));}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"main\",{className:\"md:pl-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex \"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-full \"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex items-center mt-10 lg:mt-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-8 h-1 bg-blue-700 rounded mr-0 hidden md:block\"}),/*#__PURE__*/React.createElement(\"h4\",{className:\"bg-blue-700 md:bg-transparent text-white md:text-gray-700 font-light md:font-semibold text-sm md:text-xl tracking-wide uppercase md:normal-case py-2 px-6 rounded-r-lg\"},\"My Loans\")),/*#__PURE__*/React.createElement(\"br\",null),errorMsg.length?/*#__PURE__*/React.createElement(\"div\",{className:\"bg-red-100 border-t-4 border-red-500 rounded-b text-red-900 px-4 py-3 shadow-md my-5\",role:\"alert\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"py-1\"},/*#__PURE__*/React.createElement(\"svg\",{className:\"fill-current h-6 w-6 text-red-500 mr-4\",xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 20 20\"},/*#__PURE__*/React.createElement(\"path\",{d:\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\"}))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"ul\",{style:{listStyleType:\"none\"}},errorMsg.map(function(error,i){return/*#__PURE__*/React.createElement(\"li\",{key:i},error);}))))):\"\",/*#__PURE__*/React.createElement(\"div\",{className:\"w-11/12 flex justify-end items-center h-16 my-2 md:m-0 m-auto\"},/*#__PURE__*/React.createElement(\"button\",{className:\"flex bg-blue-200 hover:bg-blue-300 items-center py-2 px-4 rounded-lg transition-colors duration-150 ease-in-out cursor-pointer\",onClick:function onClick(){return props.history.push(\"/applications\");}},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"svg\",{width:\"24\",height:\"25\",viewBox:\"0 0 24 25\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"g\",{id:\"add_24px\"},/*#__PURE__*/React.createElement(\"path\",{id:\"icon/content/add_24px\",d:\"M19 13.3832H13V19.229H11V13.3832H5V11.4346H11V5.58878H13V11.4346H19V13.3832Z\",fill:\"#0A54A2\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"ml-2 text-blue-700 text-md\"},\"My Applications\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"w-11/12 bg-white flex rounded py-12 shadow-lg border-b-4 border-blue-700 md:border-none  mb-20 m-auto md:m-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"w-full mb-6 px-8 py-6 relative\"},allMyLoans.length>0?/*#__PURE__*/React.createElement(\"div\",{className:\"-mx-4 sm:-mx-8 px-4 sm:px-8 py-0 md:py-4 overflow-auto  fade-in mt-5 mb-10\"},/*#__PURE__*/React.createElement(\"div\",{className:\"inline-block min-w-full shadow rounded-lg overflow-hidden\"},/*#__PURE__*/React.createElement(\"table\",Object.assign({},getTableProps(),{className:\"min-w-full w-full leading-normal\"}),/*#__PURE__*/React.createElement(\"thead\",{className:\"flex w-full\"},headerGroups.map(function(headerGroup){return/*#__PURE__*/React.createElement(\"tr\",Object.assign({},headerGroup.getHeaderGroupProps(),{className:\"flex w-full\"}),headerGroup.headers.map(function(column){return/*#__PURE__*/React.createElement(\"th\",Object.assign({},column.getHeaderProps(),{// style={{ fontSize: 16 }}\nclassName:\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-center text-sm font-semibold text-gray-600 uppercase tracking-wider\"//   style={{\n//     borderBottom: \"solid 3px red\",\n//     background: \"aliceblue\",\n//     color: \"black\",\n//     fontWeight: \"bold\",\n//   }}\n}),column.render(\"Header\"));}));})),/*#__PURE__*/React.createElement(\"tbody\",Object.assign({},getTableBodyProps(),{className:\"flex flex-col items-center overflow-y-scroll w-full schedule-table\"}),rows.map(function(row){prepareRow(row);return/*#__PURE__*/React.createElement(\"tr\",Object.assign({},row.getRowProps(),{className:\"flex w-full\"}),row.cells.map(function(cell){return/*#__PURE__*/React.createElement(\"td\",Object.assign({},cell.getCellProps(),{// style={{\n//   padding: \"10px\",\n//   fontSize: 16,\n//   textAlign: \"center\",\n//   paddingBottom: 40,\n// }}\nclassName:\"p-4 w-1/4 px-5 py-5 text-center border-b border-gray-200 bg-white text-xs md:text-sm text-gray-700\"}),cell.render(\"Cell\"));}));}))))):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"w-full m-auto mb-6\"},/*#__PURE__*/React.createElement(\"img\",{src:\"/img/check-files.svg\",alt:\"\",className:\"w-3/4 md:w-1/3 m-auto opacity-50\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"w-3/4 m-auto\"},/*#__PURE__*/React.createElement(\"p\",{className:\"text-gray-700 font-medium text-center my-6\"},\"You have not requested for any loan so far...\"),/*#__PURE__*/React.createElement(\"div\",{className:\"w-full mb-8 lg:mb-16 m-auto text-center\"},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return props.history.push(\"/new-loan-request\");},className:\"inline-flex m-auto shadow-xl text-xl text-white px-8 lg:px-10 py-2 lg:py-3 items-center bg-blue-700 rounded-md hover:bg-blue-600 transition-colors duration-150 ease-in-out\"},/*#__PURE__*/React.createElement(\"svg\",{width:\"24\",height:\"25\",viewBox:\"0 0 24 25\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"g\",{id:\"add_24px\"},/*#__PURE__*/React.createElement(\"path\",{id:\"icon/content/add_24px\",d:\"M19 13.3832H13V19.229H11V13.3832H5V11.4346H11V5.58878H13V11.4346H19V13.3832Z\",fill:\"white\"}))),/*#__PURE__*/React.createElement(\"span\",{className:\"ml-2 text-lg font-normal\"},\"Take a loan\"))))))),/*#__PURE__*/React.createElement(\"div\",{className:\"w-11/12 mt-8 hidden md:block\"},/*#__PURE__*/React.createElement(\"hr\",{className:\"w-9/12 border-t-2 border-blue-600 bg-blue-400 rounded m-auto\"})))),/*#__PURE__*/React.createElement(\"br\",null)));}export default withRouter(MyLoans);","map":{"version":3,"sources":["/Users/mac/Documents/react app/agilecreditportal/src/pages/MyLoans.tsx"],"names":["React","useEffect","useState","useTable","useAuthStore","getLoans","withRouter","MyLoans","props","token","state","accessToken","allMyLoans","setAllMyLoans","loading","setLoading","errorMsg","setErrorMsg","updateErrors","errors","Object","values","flat","getAllLoans","postData","data","tableDatas","map","item","push","col1","loan_id","col2","description","col3","Number","loan_amount","toLocaleString","undefined","maximumFractionDigits","col4","Date","repayment_starting_date","toDateString","col6","history","uuid","response","status","msg","message","columns","useMemo","Header","accessor","getTableProps","getTableBodyProps","headerGroups","rows","prepareRow","length","listStyleType","error","i","headerGroup","getHeaderGroupProps","headers","column","getHeaderProps","render","row","getRowProps","cells","cell","getCellProps"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\nimport { useTable } from \"react-table\";\nimport ReactDatatable from \"@ashvin27/react-datatable\";\n// import 'bootstrap/dist/css/bootstrap.css';\nimport { useQuery } from \"react-query\";\nimport useAuthStore from \"../stores/authStore\";\nimport { getLoans } from \"../clients/loan\";\nimport { withRouter } from \"react-router\";\n\nfunction MyLoans(props) {\n  const token = useAuthStore((state) => state.accessToken);\n  const [allMyLoans, setAllMyLoans] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [errorMsg, setErrorMsg] = useState([]);\n\n  const updateErrors = (errors: []) => {\n    setErrorMsg(Object.values(errors).flat());\n  };\n\n  const getAllLoans = async (token) => {\n    setLoading(true);\n    try {\n      let postData = await getLoans(token);\n      const { data } = postData;\n      let tableDatas = [] as any;\n      setLoading(false);\n      data &&\n        data.map((item) => {\n          tableDatas.push({\n            col1: item.loan_id,\n            col2: item.description,\n            col3: (\n              <span className=\"text-green-600 font-bold\">\n                â‚¦\n                {Number(item.loan_amount).toLocaleString(undefined, {\n                  maximumFractionDigits: 2,\n                })}\n              </span>\n            ),\n            col4: new Date(item.repayment_starting_date).toDateString(),\n            col6: (\n              <button\n                onClick={() => props.history.push(\"/loan-details/\" + item.uuid)}\n                className=\"bg-blue-800 py-1 px-2 rounded\"\n              >\n                <svg\n                  width=\"15\"\n                  height=\"15\"\n                  viewBox=\"0 0 15 15\"\n                  fill=\"none\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                  <g id=\"visibility_24px\">\n                    <path\n                      id=\"icon/action/visibility_24px\"\n                      fillRule=\"evenodd\"\n                      clipRule=\"evenodd\"\n                      d=\"M0.625 7.5C1.70625 4.75625 4.375 2.8125 7.5 2.8125C10.625 2.8125 13.2937 4.75625 14.375 7.5C13.2937 10.2438 10.625 12.1875 7.5 12.1875C4.375 12.1875 1.70625 10.2438 0.625 7.5ZM13.0125 7.5C11.9813 5.39375 9.86878 4.0625 7.50003 4.0625C5.13128 4.0625 3.01878 5.39375 1.98753 7.5C3.01878 9.60625 5.13128 10.9375 7.50003 10.9375C9.86878 10.9375 11.9813 9.60625 13.0125 7.5ZM7.5 5.9375C8.3625 5.9375 9.0625 6.6375 9.0625 7.5C9.0625 8.3625 8.3625 9.0625 7.5 9.0625C6.6375 9.0625 5.9375 8.3625 5.9375 7.5C5.9375 6.6375 6.6375 5.9375 7.5 5.9375ZM4.6875 7.5C4.6875 5.95 5.95 4.6875 7.5 4.6875C9.05 4.6875 10.3125 5.95 10.3125 7.5C10.3125 9.05 9.05 10.3125 7.5 10.3125C5.95 10.3125 4.6875 9.05 4.6875 7.5Z\"\n                      fill=\"white\"\n                    />\n                  </g>\n                </svg>\n              </button>\n            ),\n          });\n        });\n      setAllMyLoans(tableDatas);\n    } catch (error) {\n      setLoading(false);\n      if (error && error.response.status === 500) {\n        let msg = [] as any;\n        msg.push(error.response.data.message);\n        setErrorMsg(msg);\n        return;\n      }\n      if (!error.response) {\n        let msg = [] as any;\n        msg.push(\"Network Error, Check Your Internet Connection\");\n        setErrorMsg(msg);\n        return;\n      }\n      const {\n        response: { data },\n      } = error;\n      data.errors && updateErrors(data.errors);\n    }\n  };\n\n  useEffect(() => {\n    getAllLoans(token);\n  }, []);\n\n  const columns = React.useMemo(\n    () => [\n      {\n        Header: \"Loan ID\",\n        accessor: \"col1\", // accessor is the \"key\" in the data\n      },\n      {\n        Header: \"Type\",\n        accessor: \"col2\",\n      },\n      {\n        Header: \"Amount\",\n        accessor: \"col3\",\n      },\n      {\n        Header: \"Date\",\n        accessor: \"col4\",\n      },\n      {\n        Header: \"Action\",\n        accessor: \"col6\",\n      },\n    ],\n    []\n  );\n\n  const {\n    getTableProps,\n    getTableBodyProps,\n    headerGroups,\n    rows,\n    prepareRow,\n  } = useTable({ columns: columns, data: allMyLoans });\n\n  if (loading) {\n    return (\n      <>\n        <div className=\"w-full m-auto px-8 relative\">\n          <img\n            src=\"/img/loading-gif.gif\"\n            alt=\"\"\n            className=\"w-1/8 m-auto py-20\"\n          />\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <>\n      <main className=\"md:pl-12\">\n        <div className=\"flex \">\n          <div className=\"w-full \">\n            <div className=\"flex items-center mt-10 lg:mt-0\">\n              <div className=\"w-8 h-1 bg-blue-700 rounded mr-0 hidden md:block\"></div>\n              <h4 className=\"bg-blue-700 md:bg-transparent text-white md:text-gray-700 font-light md:font-semibold text-sm md:text-xl tracking-wide uppercase md:normal-case py-2 px-6 rounded-r-lg\">\n                My Loans\n              </h4>\n            </div>\n            <br />\n            {errorMsg.length ? (\n              <div\n                className=\"bg-red-100 border-t-4 border-red-500 rounded-b text-red-900 px-4 py-3 shadow-md my-5\"\n                role=\"alert\"\n              >\n                <div className=\"flex\">\n                  <div className=\"py-1\">\n                    <svg\n                      className=\"fill-current h-6 w-6 text-red-500 mr-4\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      viewBox=\"0 0 20 20\"\n                    >\n                      <path d=\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\" />\n                    </svg>\n                  </div>\n                  <div>\n                    {/* <p className=\"font-bold\">Sent successfully</p> */}\n                    {/* <p className=\"text-sm\">{errorMsg}</p> */}\n                    <ul style={{ listStyleType: \"none\" }}>\n                      {errorMsg.map((error, i) => (\n                        <li key={i}>{error}</li>\n                      ))}\n                    </ul>\n                  </div>\n                </div>\n              </div>\n            ) : (\n              \"\"\n            )}\n            <div className=\"w-11/12 flex justify-end items-center h-16 my-2 md:m-0 m-auto\">\n              <button\n                className=\"flex bg-blue-200 hover:bg-blue-300 items-center py-2 px-4 rounded-lg transition-colors duration-150 ease-in-out cursor-pointer\"\n                onClick={() => props.history.push(\"/applications\")}\n              >\n                <div>\n                  <svg\n                    width=\"24\"\n                    height=\"25\"\n                    viewBox=\"0 0 24 25\"\n                    fill=\"none\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <g id=\"add_24px\">\n                      <path\n                        id=\"icon/content/add_24px\"\n                        d=\"M19 13.3832H13V19.229H11V13.3832H5V11.4346H11V5.58878H13V11.4346H19V13.3832Z\"\n                        fill=\"#0A54A2\"\n                      />\n                    </g>\n                  </svg>\n                </div>\n                <div className=\"ml-2 text-blue-700 text-md\">\n                  My Applications\n                </div>\n              </button>\n            </div>\n            <div className=\"w-11/12 bg-white flex rounded py-12 shadow-lg border-b-4 border-blue-700 md:border-none  mb-20 m-auto md:m-0\">\n              <div className=\"w-full mb-6 px-8 py-6 relative\">\n                {allMyLoans.length > 0 ? (\n                  <div className=\"-mx-4 sm:-mx-8 px-4 sm:px-8 py-0 md:py-4 overflow-auto  fade-in mt-5 mb-10\">\n                    <div className=\"inline-block min-w-full shadow rounded-lg overflow-hidden\">\n                      <table\n                        {...getTableProps()}\n                        className=\"min-w-full w-full leading-normal\"\n                      >\n                        <thead className=\"flex w-full\">\n                          {headerGroups.map((headerGroup) => (\n                            <tr\n                              {...headerGroup.getHeaderGroupProps()}\n                              className=\"flex w-full\"\n                            >\n                              {headerGroup.headers.map((column) => (\n                                <th\n                                  {...column.getHeaderProps()}\n                                  // style={{ fontSize: 16 }}\n                                  className=\"p-4 w-1/4 px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-center text-sm font-semibold text-gray-600 uppercase tracking-wider\"\n                                  //   style={{\n                                  //     borderBottom: \"solid 3px red\",\n                                  //     background: \"aliceblue\",\n                                  //     color: \"black\",\n                                  //     fontWeight: \"bold\",\n                                  //   }}\n                                >\n                                  {column.render(\"Header\")}\n                                </th>\n                              ))}\n                            </tr>\n                          ))}\n                        </thead>\n                        <tbody\n                          {...getTableBodyProps()}\n                          className=\"flex flex-col items-center overflow-y-scroll w-full schedule-table\"\n                        >\n                          {rows.map((row) => {\n                            prepareRow(row);\n                            return (\n                              <tr\n                                {...row.getRowProps()}\n                                className=\"flex w-full\"\n                              >\n                                {row.cells.map((cell) => {\n                                  return (\n                                    <td\n                                      {...cell.getCellProps()}\n                                      // style={{\n                                      //   padding: \"10px\",\n                                      //   fontSize: 16,\n                                      //   textAlign: \"center\",\n                                      //   paddingBottom: 40,\n                                      // }}\n                                      className=\"p-4 w-1/4 px-5 py-5 text-center border-b border-gray-200 bg-white text-xs md:text-sm text-gray-700\"\n                                    >\n                                      {cell.render(\"Cell\")}\n                                    </td>\n                                  );\n                                })}\n                              </tr>\n                            );\n                          })}\n                        </tbody>\n                      </table>\n                    </div>\n                  </div>\n                ) : (\n                  <>\n                    <div className=\"w-full m-auto mb-6\">\n                      <img\n                        src=\"/img/check-files.svg\"\n                        alt=\"\"\n                        className=\"w-3/4 md:w-1/3 m-auto opacity-50\"\n                      />\n                    </div>\n                    <div className=\"w-3/4 m-auto\">\n                      <p className=\"text-gray-700 font-medium text-center my-6\">\n                        You have not requested for any loan so far...\n                      </p>\n                      <div className=\"w-full mb-8 lg:mb-16 m-auto text-center\">\n                        <button\n                          onClick={() =>\n                            props.history.push(\"/new-loan-request\")\n                          }\n                          className=\"inline-flex m-auto shadow-xl text-xl text-white px-8 lg:px-10 py-2 lg:py-3 items-center bg-blue-700 rounded-md hover:bg-blue-600 transition-colors duration-150 ease-in-out\"\n                        >\n                          <svg\n                            width=\"24\"\n                            height=\"25\"\n                            viewBox=\"0 0 24 25\"\n                            fill=\"none\"\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                          >\n                            <g id=\"add_24px\">\n                              <path\n                                id=\"icon/content/add_24px\"\n                                d=\"M19 13.3832H13V19.229H11V13.3832H5V11.4346H11V5.58878H13V11.4346H19V13.3832Z\"\n                                fill=\"white\"\n                              />\n                            </g>\n                          </svg>\n                          <span className=\"ml-2 text-lg font-normal\">\n                            Take a loan\n                          </span>\n                        </button>\n                      </div>\n                    </div>\n                  </>\n                )}\n              </div>\n            </div>\n            <div className=\"w-11/12 mt-8 hidden md:block\">\n              <hr className=\"w-9/12 border-t-2 border-blue-600 bg-blue-400 rounded m-auto\"></hr>\n            </div>\n          </div>\n        </div>\n        <br />\n      </main>\n    </>\n  );\n}\n\nexport default withRouter(MyLoans);\n"]},"metadata":{},"sourceType":"module"}